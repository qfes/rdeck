"use strict";(self.webpackChunkrdeck=self.webpackChunkrdeck||[]).push([[474],{3371:(e,t,r)=>{r.d(t,{u:()=>Ce});var n=r(962),s=r(3983);const i="3.2.4",o={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"};Object.keys(o);var a=r(6269);function c(e,t,r){(0,a.h)(e instanceof ArrayBuffer);const n=new TextDecoder("utf8"),s=new Uint8Array(e,t,r);return n.decode(s)}var u=r(3774);const l={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},h={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,...l};var d=r(3855),f=r(4942);const A={[l.DOUBLE]:Float64Array,[l.FLOAT]:Float32Array,[l.UNSIGNED_SHORT]:Uint16Array,[l.UNSIGNED_INT]:Uint32Array,[l.UNSIGNED_BYTE]:Uint8Array,[l.BYTE]:Int8Array,[l.SHORT]:Int16Array,[l.INT]:Int32Array},B={DOUBLE:l.DOUBLE,FLOAT:l.FLOAT,UNSIGNED_SHORT:l.UNSIGNED_SHORT,UNSIGNED_INT:l.UNSIGNED_INT,UNSIGNED_BYTE:l.UNSIGNED_BYTE,BYTE:l.BYTE,SHORT:l.SHORT,INT:l.INT},p="Failed to convert GL type";class m{static fromTypedArray(e){e=ArrayBuffer.isView(e)?e.constructor:e;for(const t in A){if(A[t]===e)return t}throw new Error(p)}static fromName(e){const t=B[e];if(!t)throw new Error(p);return t}static getArrayType(e){switch(e){case l.UNSIGNED_SHORT_5_6_5:case l.UNSIGNED_SHORT_4_4_4_4:case l.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:const t=A[e];if(!t)throw new Error(p);return t}}static getByteSize(e){return m.getArrayType(e).BYTES_PER_ELEMENT}static validate(e){return Boolean(m.getArrayType(e))}static createTypedArray(e,t,r=0,n){void 0===n&&(n=(t.byteLength-r)/m.getByteSize(e));return new(m.getArrayType(e))(t,r,n)}}class y{constructor(e,t){(0,f.Z)(this,"json",void 0),(0,f.Z)(this,"buffer",void 0),(0,f.Z)(this,"featuresLength",0),(0,f.Z)(this,"_cachedTypedArrays",{}),this.json=e,this.buffer=t}getExtension(e){return this.json.extensions&&this.json.extensions[e]}hasProperty(e){return Boolean(this.json[e])}getGlobalProperty(e,t=h.UNSIGNED_INT,r=1){const n=this.json[e];return n&&Number.isFinite(n.byteOffset)?this._getTypedArrayFromBinary(e,t,r,1,n.byteOffset):n}getPropertyArray(e,t,r){const n=this.json[e];return n&&Number.isFinite(n.byteOffset)?("componentType"in n&&(t=m.fromName(n.componentType)),this._getTypedArrayFromBinary(e,t,r,this.featuresLength,n.byteOffset)):this._getTypedArrayFromArray(e,t,n)}getProperty(e,t,r,n,s){const i=this.json[e];if(!i)return i;const o=this.getPropertyArray(e,t,r);if(1===r)return o[n];for(let e=0;e<r;++e)s[e]=o[r*n+e];return s}_getTypedArrayFromBinary(e,t,r,n,s){const i=this._cachedTypedArrays;let o=i[e];return o||(o=m.createTypedArray(t,this.buffer.buffer,this.buffer.byteOffset+s,n*r),i[e]=o),o}_getTypedArrayFromArray(e,t,r){const n=this._cachedTypedArrays;let s=n[e];return s||(s=m.createTypedArray(t,r),n[e]=s),s}}const g={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},C={SCALAR:(e,t)=>e[t],VEC2:(e,t)=>[e[2*t+0],e[2*t+1]],VEC3:(e,t)=>[e[3*t+0],e[3*t+1],e[3*t+2]],VEC4:(e,t)=>[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]],MAT2:(e,t)=>[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]],MAT3:(e,t)=>[e[9*t+0],e[9*t+1],e[9*t+2],e[9*t+3],e[9*t+4],e[9*t+5],e[9*t+6],e[9*t+7],e[9*t+8]],MAT4:(e,t)=>[e[16*t+0],e[16*t+1],e[16*t+2],e[16*t+3],e[16*t+4],e[16*t+5],e[16*t+6],e[16*t+7],e[16*t+8],e[16*t+9],e[16*t+10],e[16*t+11],e[16*t+12],e[16*t+13],e[16*t+14],e[16*t+15]]},b={SCALAR:(e,t,r)=>{t[r]=e},VEC2:(e,t,r)=>{t[2*r+0]=e[0],t[2*r+1]=e[1]},VEC3:(e,t,r)=>{t[3*r+0]=e[0],t[3*r+1]=e[1],t[3*r+2]=e[2]},VEC4:(e,t,r)=>{t[4*r+0]=e[0],t[4*r+1]=e[1],t[4*r+2]=e[2],t[4*r+3]=e[3]},MAT2:(e,t,r)=>{t[4*r+0]=e[0],t[4*r+1]=e[1],t[4*r+2]=e[2],t[4*r+3]=e[3]},MAT3:(e,t,r)=>{t[9*r+0]=e[0],t[9*r+1]=e[1],t[9*r+2]=e[2],t[9*r+3]=e[3],t[9*r+4]=e[4],t[9*r+5]=e[5],t[9*r+6]=e[6],t[9*r+7]=e[7],t[9*r+8]=e[8],t[9*r+9]=e[9]},MAT4:(e,t,r)=>{t[16*r+0]=e[0],t[16*r+1]=e[1],t[16*r+2]=e[2],t[16*r+3]=e[3],t[16*r+4]=e[4],t[16*r+5]=e[5],t[16*r+6]=e[6],t[16*r+7]=e[7],t[16*r+8]=e[8],t[16*r+9]=e[9],t[16*r+10]=e[10],t[16*r+11]=e[11],t[16*r+12]=e[12],t[16*r+13]=e[13],t[16*r+14]=e[14],t[16*r+15]=e[15]}};const T=e=>void 0!==e;function I(e,t,r){if(!t)return null;let n=e.getExtension("3DTILES_batch_table_hierarchy");const s=t.HIERARCHY;return s&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),t.extensions=t.extensions||{},t.extensions["3DTILES_batch_table_hierarchy"]=s,n=s),n?function(e,t){let r,n,s;const i=e.instancesLength,o=e.classes;let a,c=e.classIds,u=e.parentCounts,l=e.parentIds,h=i;T(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,s=getBinaryAccessor(c),c=s.createArrayBufferView(t.buffer,t.byteOffset+c.byteOffset,i));if(T(u))for(T(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,GL.UNSIGNED_SHORT),u.type=AttributeType.SCALAR,s=getBinaryAccessor(u),u=s.createArrayBufferView(t.buffer,t.byteOffset+u.byteOffset,i)),a=new Uint16Array(i),h=0,r=0;r<i;++r)a[r]=h,h+=u[r];T(l)&&T(l.byteOffset)&&(l.componentType=defaultValue(l.componentType,GL.UNSIGNED_SHORT),l.type=AttributeType.SCALAR,s=getBinaryAccessor(l),l=s.createArrayBufferView(t.buffer,t.byteOffset+l.byteOffset,h));const d=o.length;for(r=0;r<d;++r){const e=o[r].length,n=o[r].instances,s=getBinaryProperties(e,n,t);o[r].instances=combine(s,n)}const f=new Array(d).fill(0),A=new Uint16Array(i);for(r=0;r<i;++r)n=c[r],A[r]=f[n],++f[n];const B={classes:o,classIds:c,classIndexes:A,parentCounts:u,parentIndexes:a,parentIds:l};return function(e){const t=e.classIds.length;for(let r=0;r<t;++r)F(e,r,stack)}(B),B}(n,r):null}function E(e,t,r){if(!e)return;const n=e.parentCounts;return e.parentIds?r(e,t):n>0?function(e,t,r){const n=e.classIds,s=e.parentCounts,i=e.parentIds,o=e.parentIndexes,a=n.length,c=scratchVisited;c.length=Math.max(c.length,a);const u=++marker,l=scratchStack;l.length=0,l.push(t);for(;l.length>0;){if(c[t=l.pop()]===u)continue;c[t]=u;const n=r(e,t);if(T(n))return n;const a=s[t],h=o[t];for(let e=0;e<a;++e){const r=i[h+e];r!==t&&l.push(r)}}return null}(e,t,r):function(e,t,r){let n=!0;for(;n;){const s=r(e,t);if(T(s))return s;const i=e.parentIds[t];n=i!==t,t=i}throw new Error("traverseHierarchySingleParent")}(e,t,r)}function F(e,t,r){const n=e.parentCounts,s=e.parentIds,i=e.parentIndexes,o=e.classIds.length;if(!T(s))return;assert(t<o,"Parent index ".concat(t," exceeds the total number of instances: ").concat(o)),assert(-1===r.indexOf(t),"Circular dependency detected in the batch table hierarchy."),r.push(t);const a=T(n)?n[t]:1,c=T(n)?i[t]:t;for(let n=0;n<a;++n){const i=s[c+n];i!==t&&F(e,i,r)}r.pop(t)}function w(e){return null!=e}const _=(e,t)=>e,v={HIERARCHY:!0,extensions:!0,extras:!0};class D{constructor(e,t,r,n={}){var s;(0,f.Z)(this,"json",void 0),(0,f.Z)(this,"binary",void 0),(0,f.Z)(this,"featureCount",void 0),(0,f.Z)(this,"_extensions",void 0),(0,f.Z)(this,"_properties",void 0),(0,f.Z)(this,"_binaryProperties",void 0),(0,f.Z)(this,"_hierarchy",void 0),(0,a.h)(r>=0),this.json=e||{},this.binary=t,this.featureCount=r,this._extensions=(null===(s=this.json)||void 0===s?void 0:s.extensions)||{},this._properties={};for(const e in this.json)v[e]||(this._properties[e]=this.json[e]);this._binaryProperties=this._initializeBinaryProperties(),n["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=I(this,this.json,this.binary))}getExtension(e){return this.json&&this.json.extensions&&this.json.extensions[e]}memorySizeInBytes(){return 0}isClass(e,t){if(this._checkBatchId(e),(0,a.h)("string"==typeof t,t),this._hierarchy){return w(E(this._hierarchy,e,((e,r)=>{const n=e.classIds[r];return e.classes[n].name===t})))}return!1}isExactClass(e,t){return(0,a.h)("string"==typeof t,t),this.getExactClassName(e)===t}getExactClassName(e){if(this._checkBatchId(e),this._hierarchy){const t=this._hierarchy.classIds[e];return this._hierarchy.classes[t].name}}hasProperty(e,t){return this._checkBatchId(e),(0,a.h)("string"==typeof t,t),w(this._properties[t])||this._hasPropertyInHierarchy(e,t)}getPropertyNames(e,t){this._checkBatchId(e),(t=w(t)?t:[]).length=0;const r=Object.keys(this._properties);return t.push(...r),this._hierarchy&&this._getPropertyNamesInHierarchy(e,t),t}getProperty(e,t){if(this._checkBatchId(e),(0,a.h)("string"==typeof t,t),this._binaryProperties){const r=this._binaryProperties[t];if(w(r))return this._getBinaryProperty(r,e)}const r=this._properties[t];if(w(r))return _(r[e]);if(this._hierarchy){const r=this._getHierarchyProperty(e,t);if(w(r))return r}}setProperty(e,t,r){const n=this.featureCount;if(this._checkBatchId(e),(0,a.h)("string"==typeof t,t),this._binaryProperties){const n=this._binaryProperties[t];if(n)return void this._setBinaryProperty(n,e,r)}if(this._hierarchy&&this._setHierarchyProperty(this,e,t,r))return;let s=this._properties[t];w(s)||(this._properties[t]=new Array(n),s=this._properties[t]),s[e]=_(r)}_checkBatchId(e){if(!(e>=0&&e<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}_getBinaryProperty(e,t){return e.unpack(e.typedArray,t)}_setBinaryProperty(e,t,r){e.pack(r,e.typedArray,t)}_initializeBinaryProperties(){let e=null;for(const t in this._properties){const r=this._properties[t],n=this._initializeBinaryProperty(t,r);n&&(e=e||{},e[t]=n)}return e}_initializeBinaryProperty(e,t){if("byteOffset"in t){const r=t;(0,a.h)(this.binary,"Property ".concat(e," requires a batch table binary.")),(0,a.h)(r.type,"Property ".concat(e," requires a type."));const n=function(e,t,r,n){const{componentType:s}=e;(0,a.h)(e.componentType);const i="string"==typeof s?m.fromName(s):s,o=g[e.type],c=C[e.type],u=b[e.type];return r+=e.byteOffset,{values:m.createTypedArray(i,t,r,o*n),type:i,size:o,unpacker:c,packer:u}}(r,this.binary.buffer,0|this.binary.byteOffset,this.featureCount);return{typedArray:n.values,componentCount:n.size,unpack:n.unpacker,pack:n.packer}}return null}_hasPropertyInHierarchy(e,t){if(!this._hierarchy)return!1;const r=E(this._hierarchy,e,((e,r)=>{const n=e.classIds[r];return w(e.classes[n].instances[t])}));return w(r)}_getPropertyNamesInHierarchy(e,t){E(this._hierarchy,e,((e,r)=>{const n=e.classIds[r],s=e.classes[n].instances;for(const e in s)s.hasOwnProperty(e)&&-1===t.indexOf(e)&&t.push(e)}))}_getHierarchyProperty(e,t){return E(this._hierarchy,e,((e,r)=>{const n=e.classIds[r],s=e.classes[n],i=e.classIndexes[r],o=s.instances[t];return w(o)?w(o.typedArray)?this._getBinaryProperty(o,i):_(o[i]):null}))}_setHierarchyProperty(e,t,r,n){const s=E(this._hierarchy,t,((e,s)=>{const i=e.classIds[s],o=e.classes[i],c=e.classIndexes[s],u=o.instances[r];return!!w(u)&&((0,a.h)(s===t,'Inherited property "'.concat(r,'" is read-only.')),w(u.typedArray)?this._setBinaryProperty(u,c,n):u[c]=_(n),!0)}));return w(s)}}function M(e,t,r=0){const n=new DataView(t);if(e.magic=n.getUint32(r,!0),r+=4,e.version=n.getUint32(r,!0),r+=4,e.byteLength=n.getUint32(r,!0),r+=4,1!==e.version)throw new Error("3D Tile Version ".concat(e.version," not supported"));return r}const G="b3dm tile in legacy format.";function U(e,t,r){const n=new DataView(t);let s;e.header=e.header||{};let i=n.getUint32(r,!0);r+=4;let o=n.getUint32(r,!0);r+=4;let a=n.getUint32(r,!0);r+=4;let c=n.getUint32(r,!0);return r+=4,a>=570425344?(r-=8,s=i,a=o,c=0,i=0,o=0,console.warn(G)):c>=570425344&&(r-=4,s=a,a=i,c=o,i=0,o=0,console.warn(G)),e.header.featureTableJsonByteLength=i,e.header.featureTableBinaryByteLength=o,e.header.batchTableJsonByteLength=a,e.header.batchTableBinaryByteLength=c,e.header.batchLength=s,r}function R(e,t,r,n){return r=function(e,t,r,n){const{featureTableJsonByteLength:s,featureTableBinaryByteLength:i,batchLength:o}=e.header;if(e.featureTableJson={BATCH_LENGTH:o||0},s>0){const n=c(t,r,s);e.featureTableJson=JSON.parse(n)}return r+=s,e.featureTableBinary=new Uint8Array(t,r,i),r+=i}(e,t,r),r=function(e,t,r,n){const{batchTableJsonByteLength:s,batchTableBinaryByteLength:i}=e.header;if(s>0){const n=c(t,r,s);e.batchTableJson=JSON.parse(n),r+=s,i>0&&(e.batchTableBinary=new Uint8Array(t,r,i),e.batchTableBinary=new Uint8Array(e.batchTableBinary),r+=i)}return r}(e,t,r),r}function O(e,t=[0,0,0]){const r=e>>11&31,n=e>>5&63,s=31&e;return t[0]=r<<3,t[1]=n<<2,t[2]=s<<3,t}function S(e,t,r){if(!(t||e&&e.batchIds&&r))return null;const{batchIds:n,isRGB565:s,pointCount:i}=e;if(n&&r){const e=new Uint8ClampedArray(3*i);for(let t=0;t<i;t++){const s=n[t],i=r.getProperty(s,"dimensions").map((e=>255*e));e[3*t]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2]}return{type:h.UNSIGNED_BYTE,value:e,size:3,normalized:!0}}if(s){const e=new Uint8ClampedArray(3*i);for(let r=0;r<i;r++){const n=O(t[r]);e[3*r]=n[0],e[3*r+1]=n[1],e[3*r+2]=n[2]}return{type:h.UNSIGNED_BYTE,value:e,size:3,normalized:!0}}return t&&t.length===3*i?{type:h.UNSIGNED_BYTE,value:t,size:3,normalized:!0}:{type:h.UNSIGNED_BYTE,value:t,size:4,normalized:!0}}var J=r(7069),P=r(4034);new J.Z,new d.Z,new J.Z,new J.Z,new Uint8Array(1);function H(e,t=255){return(0,P.uZ)(e,0,t)/t*2-1}function x(e){return e<0?-1:1}function L(e,t,r,n){if(function(e,t){if(!e)throw new Error("math.gl assertion failed. ".concat(t))}(n),e<0||e>r||t<0||t>r)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(r));if(n.x=H(e,r),n.y=H(t,r),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){const e=n.x;n.x=(1-Math.abs(n.y))*x(e),n.y=(1-Math.abs(e))*x(n.y)}return n.normalize()}function N(e,t,r){return L(e,t,255,r)}const Z=new d.Z;function j(e,t,r){return e.isQuantized?r["3d-tiles"]&&r["3d-tiles"].decodeQuantizedPositions?(e.isQuantized=!1,function(e,t){const r=new d.Z,n=new Float32Array(3*e.pointCount);for(let s=0;s<e.pointCount;s++)r.set(t[3*s],t[3*s+1],t[3*s+2]).scale(1/e.quantizedRange).multiply(e.quantizedVolumeScale).add(e.quantizedVolumeOffset).toArray(n,3*s);return n}(e,t)):{type:h.UNSIGNED_SHORT,value:t,size:3,normalized:!0}:t}async function V(e,t,r,n,s){r=R(e,t,r=U(e,t,r=M(e,t,r))),function(e){e.attributes={positions:null,colors:null,normals:null,batchIds:null},e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1}(e);const{featureTable:i,batchTable:o}=function(e){const t=new y(e.featureTableJson,e.featureTableBinary),r=t.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(r))throw new Error("POINTS_LENGTH must be defined");t.featuresLength=r,e.featuresLength=r,e.pointsLength=r,e.pointCount=r,e.rtcCenter=t.getGlobalProperty("RTC_CENTER",h.FLOAT,3);const n=function(e,t){let r=null;if(!e.batchIds&&t.hasProperty("BATCH_ID")&&(e.batchIds=t.getPropertyArray("BATCH_ID",h.UNSIGNED_SHORT,1),e.batchIds)){const n=t.getGlobalProperty("BATCH_LENGTH");if(!n)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");const{batchTableJson:s,batchTableBinary:i}=e;r=new D(s,i,n)}return r}(e,t);return{featureTable:t,batchTable:n}}(e);return await async function(e,t,r,n,s){let i,o,a;const c=e.batchTableJson&&e.batchTableJson.extensions&&e.batchTableJson.extensions["3DTILES_draco_point_compression"];c&&(a=c.properties);const l=t.getExtension("3DTILES_draco_point_compression");if(l){o=l.properties;const t=l.byteOffset,r=l.byteLength;if(!o||!Number.isFinite(t)||!r)throw new Error("Draco properties, byteOffset, and byteLength must be defined");i=e.featureTableBinary.slice(t,t+r),e.hasPositions=Number.isFinite(o.POSITION),e.hasColors=Number.isFinite(o.RGB)||Number.isFinite(o.RGBA),e.hasNormals=Number.isFinite(o.NORMAL),e.hasBatchIds=Number.isFinite(o.BATCH_ID),e.isTranslucent=Number.isFinite(o.RGBA)}if(!i)return!0;const h={buffer:i,properties:{...o,...a},featureTableProperties:o,batchTableProperties:a,dequantizeInShader:!1};return await async function(e,t,r,n){const{parse:s}=n,i={...r,draco:{...r.draco,extraAttributes:t.batchTableProperties||{}}};delete i["3d-tiles"];const o=await s(t.buffer,u.VJ,i),a=o.attributes.POSITION&&o.attributes.POSITION.value,c=o.attributes.COLOR_0&&o.attributes.COLOR_0.value,l=o.attributes.NORMAL&&o.attributes.NORMAL.value,h=o.attributes.BATCH_ID&&o.attributes.BATCH_ID.value,f=a&&o.attributes.POSITION.value.quantization,A=l&&o.attributes.NORMAL.value.quantization;if(f){const t=o.POSITION.data.quantization,r=t.range;e.quantizedVolumeScale=new d.Z(r,r,r),e.quantizedVolumeOffset=new d.Z(t.minValues),e.quantizedRange=(1<<t.quantizationBits)-1,e.isQuantizedDraco=!0}A&&(e.octEncodedRange=(1<<o.NORMAL.data.quantization.quantizationBits)-1,e.isOctEncodedDraco=!0);const B={};if(t.batchTableProperties)for(const e of Object.keys(t.batchTableProperties))o.attributes[e]&&o.attributes[e].value&&(B[e.toLowerCase()]=o.attributes[e].value);e.attributes={positions:a,colors:S(e,c,void 0),normals:l,batchIds:h,...B}}(e,h,n,s)}(e,i,0,n,s),function(e,t,r){if(!e.attributes.positions)if(t.hasProperty("POSITION"))e.attributes.positions=t.getPropertyArray("POSITION",h.FLOAT,3);else if(t.hasProperty("POSITION_QUANTIZED")){const n=t.getPropertyArray("POSITION_QUANTIZED",h.UNSIGNED_SHORT,3);if(e.isQuantized=!0,e.quantizedRange=65535,e.quantizedVolumeScale=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",h.FLOAT,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",h.FLOAT,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");e.attributes.positions=j(e,n,r)}if(!e.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}(e,i,n),function(e,t,r){if(!e.attributes.colors){let n=null;t.hasProperty("RGBA")?(n=t.getPropertyArray("RGBA",h.UNSIGNED_BYTE,4),e.isTranslucent=!0):t.hasProperty("RGB")?n=t.getPropertyArray("RGB",h.UNSIGNED_BYTE,3):t.hasProperty("RGB565")&&(n=t.getPropertyArray("RGB565",h.UNSIGNED_SHORT,1),e.isRGB565=!0),e.attributes.colors=S(e,n,r)}t.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=t.getGlobalProperty("CONSTANT_RGBA",h.UNSIGNED_BYTE,4))}(e,i,o),function(e,t){if(!e.attributes.normals){let r=null;t.hasProperty("NORMAL")?r=t.getPropertyArray("NORMAL",h.FLOAT,3):t.hasProperty("NORMAL_OCT16P")&&(r=t.getPropertyArray("NORMAL_OCT16P",h.UNSIGNED_BYTE,2),e.isOctEncoded16P=!0),e.attributes.normals=function(e,t){if(!t)return null;if(e.isOctEncoded16P){const r=new Float32Array(3*e.pointsLength);for(let n=0;n<e.pointsLength;n++)N(t[2*n],t[2*n+1],Z),Z.toArray(r,3*n);return{type:h.FLOAT,size:2,value:r}}return{type:h.FLOAT,size:2,value:t}}(e,r)}}(e,i),r}var Q=r(7103),K=r(5680);const k=0,Y=1;function X(e,t,r,n){e.rotateYtoZ=!0;const s=e.byteOffset+e.byteLength-r;if(0===s)throw new Error("glTF byte length must be greater than 0.");return e.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",e.gltfArrayBuffer=(0,K.qv)(t,r,s),e.gltfByteOffset=0,e.gltfByteLength=s,r%4==0||console.warn("".concat(e.type,": embedded glb is not aligned to a 4-byte boundary.")),e.byteOffset+e.byteLength}async function q(e,t,r,n){const s=r["3d-tiles"]||{};if(function(e,t,r){switch(t){case k:const t=new Uint8Array(e.gltfArrayBuffer,e.gltfByteOffset),r=(new TextDecoder).decode(t);e.gltfUrl=r.replace(/[\s\0]+$/,""),delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;break;case Y:break;default:throw new Error("b3dm: Illegal glTF format field")}}(e,t),s.loadGLTF){const{parse:t,fetch:s}=n;e.gltfUrl&&(e.gltfArrayBuffer=await s(e.gltfUrl,r),e.gltfByteOffset=0),e.gltfArrayBuffer&&(e.gltf=await t(e.gltfArrayBuffer,Q.E,r,n),delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength)}}async function W(e,t,r,n,s){var i;r=function(e,t,r,n,s){r=M(e,t,r),r=U(e,t,r),r=R(e,t,r),r=X(e,t,r,n);const i=new y(e.featureTableJson,e.featureTableBinary);return e.rtcCenter=i.getGlobalProperty("RTC_CENTER",h.FLOAT,3),r}(e,t,r,n),await q(e,Y,n,s);const o=null==e||null===(i=e.gltf)||void 0===i?void 0:i.extensions;return o&&o.CESIUM_RTC&&(e.rtcCenter=o.CESIUM_RTC.center),r}var z=r(540),$=r(3037),ee=r(5451),te=r(596);async function re(e,t,r,n,s){return r=function(e,t,r,n,s){if(r=M(e,t,r),1!==e.version)throw new Error("Instanced 3D Model version ".concat(e.version," is not supported"));r=U(e,t,r);const i=new DataView(t);if(e.gltfFormat=i.getUint32(r,!0),r=R(e,t,r+=4),r=X(e,t,r,n),0===e.featureTableJsonByteLength)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");const o=new y(e.featureTableJson,e.featureTableBinary),a=o.getGlobalProperty("INSTANCES_LENGTH");if(o.featuresLength=a,!Number.isFinite(a))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=o.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=o.getGlobalProperty("RTC_CENTER",h.FLOAT,3);new D(e.batchTableJson,e.batchTableBinary,a);return function(e,t,r,n){const s=[new Array(n),e._batchTable][0],i=new d.Z,o=new d.Z,a=new d.Z,c=new d.Z,u=new z.Z,l=new $.Z,f=new d.Z,A={},B=new ee.Z,p=[],m=[],y=new d.Z,g=new d.Z;for(let r=0;r<n;r++){let n;if(t.hasProperty("POSITION"))n=t.getProperty("POSITION",h.FLOAT,3,r,i);else if(t.hasProperty("POSITION_QUANTIZED")){n=t.getProperty("POSITION_QUANTIZED",h.UNSIGNED_SHORT,3,r,i);const e=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",h.FLOAT,3,y);if(!e)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const s=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",h.FLOAT,3,g);if(!s)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const o=65535;for(let t=0;t<3;t++)n[t]=n[t]/o*s[t]+e[t]}if(!n)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");i.copy(n),A.translation=i,e.normalUp=t.getProperty("NORMAL_UP",h.FLOAT,3,r,p),e.normalRight=t.getProperty("NORMAL_RIGHT",h.FLOAT,3,r,m);const d=!1;if(e.normalUp){if(!e.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");e.hasCustomOrientation=!0}else{if(e.octNormalUp=t.getProperty("NORMAL_UP_OCT32P",h.UNSIGNED_SHORT,2,p),e.octNormalRight=t.getProperty("NORMAL_RIGHT_OCT32P",h.UNSIGNED_SHORT,2,m),e.octNormalUp){if(!e.octNormalRight)throw new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");throw new Error("i3dm: oct-encoded orientation not implemented")}e.eastNorthUp?(te.H.WGS84.eastNorthUpToFixedFrame(i,B),B.getRotationMatrix3(u)):u.identity()}d&&(c.copy(o).cross(a).normalize(),u.setColumn(0,o),u.setColumn(1,a),u.setColumn(2,c)),l.fromMatrix3(u),A.rotation=l,f.set(1,1,1);const C=t.getProperty("SCALE",h.FLOAT,1,r);Number.isFinite(C)&&f.multiplyByScalar(C);const b=t.getProperty("SCALE_NON_UNIFORM",h.FLOAT,3,r,p);b&&f.scale(b),A.scale=f;let T=t.getProperty("BATCH_ID",h.UNSIGNED_SHORT,1,r);void 0===T&&(T=r);const I=(new ee.Z).fromQuaternion(A.rotation);B.identity(),B.translate(A.translation),B.multiplyRight(I),B.scale(A.scale);const E=B.clone();s[r]={modelMatrix:E,batchId:T}}e.instances=s}(e,o,0,a),r}(e,t,r,n),await q(e,e.gltfFormat,n,s),r}async function ne(e,t=0,r,n,s={}){switch(s.byteOffset=t,s.type=function(e,t=0){const r=new DataView(e);return"".concat(String.fromCharCode(r.getUint8(t+0))).concat(String.fromCharCode(r.getUint8(t+1))).concat(String.fromCharCode(r.getUint8(t+2))).concat(String.fromCharCode(r.getUint8(t+3)))}(e,t),s.type){case o.COMPOSITE:return await async function(e,t,r,n,s,i){r=M(e,t,r);const o=new DataView(t);for(e.tilesLength=o.getUint32(r,!0),r+=4,e.tiles=[];e.tiles.length<e.tilesLength&&e.byteLength-r>12;){const o={};e.tiles.push(o),r=await i(t,r,n,s,o)}return r}(s,e,t,r,n,ne);case o.BATCHED_3D_MODEL:return await W(s,e,t,r,n);case o.GLTF:return await async function(e,t,r,n){e.rotateYtoZ=!0,e.gltfUpAxis=r["3d-tiles"]&&r["3d-tiles"].assetGltfUpAxis?r["3d-tiles"].assetGltfUpAxis:"Y";const{parse:s}=n;e.gltf=await s(t,Q.E,r,n)}(s,e,r,n);case o.INSTANCED_3D_MODEL:return await re(s,e,t,r,n);case o.POINT_CLOUD:return await V(s,e,t,r,n);default:throw new Error("3DTileLoader: unknown type ".concat(s.type))}}var se=r(7321);async function ie(e,t,r){const n=e[t].bufferView,s=e.bufferViews[n],i=e.buffers[s.buffer];if(i.uri){const e=await(0,se.d)(i.uri),t=await e.arrayBuffer();return new Uint8Array(t,s.byteOffset,s.byteLength)}return new Uint8Array(r,s.byteOffset,s.byteLength)}function oe(e){const t=new DataView(e);return t.getUint32(0,!0)+2**32*t.getUint32(4,!0)}const ae={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:i,extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:async function(e){if(1952609651!==new Uint32Array(e.slice(0,4))[0])throw new Error("Wrong subtree file magic number");if(1!==new Uint32Array(e.slice(4,8))[0])throw new Error("Wrong subtree file verson, must be 1");const t=oe(e.slice(8,16)),r=new Uint8Array(e,24,t),n=new TextDecoder("utf8").decode(r),s=JSON.parse(n),i=oe(e.slice(16,24));let o=new ArrayBuffer(0);return i&&(o=e.slice(24+t)),"bufferView"in s.tileAvailability&&(s.tileAvailability.explicitBitstream=await ie(s,"tileAvailability",o)),"bufferView"in s.contentAvailability&&(s.contentAvailability.explicitBitstream=await ie(s,"contentAvailability",o)),"bufferView"in s.childSubtreeAvailability&&(s.childSubtreeAvailability.explicitBitstream=await ie(s,"childSubtreeAvailability",o)),s},options:{}};var ce=r(8162);const ue={QUADTREE:4,OCTREE:8};async function le(e){const{options:t,parentData:r={mortonIndex:0,x:0,y:0,z:0},childIndex:n=0,globalData:s={level:0,mortonIndex:0,x:0,y:0,z:0}}=e;let{subtree:i,level:o=0}=e;const{subdivisionScheme:a,subtreeLevels:c,maximumLevel:u,contentUrlTemplate:l,subtreesUriTemplate:h,basePath:d}=t,f={children:[],lodMetricValue:0,contentUrl:""},A=ue[a],B=1&n,p=n>>1&1,m=n>>2&1,y=(A**o-1)/(A-1);let g=fe(r.mortonIndex,n),C=y+g,b=fe(r.x,B),T=fe(r.y,p),I=fe(r.z,m),E=!1;o+1>c&&(E=he(i.childSubtreeAvailability,g));const F=fe(s.x,b),w=fe(s.y,T),_=fe(s.z,I),v=o+s.level;if(E){const e=Ae("".concat(d,"/").concat(h),v,F,w,_);i=await(0,ce.z)(e,ae),s.mortonIndex=g,s.x=b,s.y=T,s.z=I,s.level=o,g=0,C=0,b=0,T=0,I=0,o=0}if(!he(i.tileAvailability,C)||o>u)return f;he(i.contentAvailability,C)&&(f.contentUrl=Ae(l,v,F,w,_));const D=o+1,M={mortonIndex:g,x:b,y:T,z:I};for(let e=0;e<A;e++){const r=await le({subtree:i,options:t,parentData:M,childIndex:e,level:D,globalData:s});if(r.contentUrl||r.children.length){const e=de(r,v+1,{childTileX:b,childTileY:T,childTileZ:I},t);f.children.push(e)}}return f}function he(e,t){return"constant"in e?Boolean(e.constant):!!e.explicitBitstream&&function(e,t){const r=Math.floor(e/8),n=e%8;return 1==(t[r]>>n&1)}(t,e.explicitBitstream)}function de(e,t,r,n){const{basePath:s,refine:i,getRefine:o,lodMetricType:a,getTileType:c,rootLodMetricValue:u,rootBoundingVolume:l}=n,h=e.contentUrl&&e.contentUrl.replace("".concat(s,"/"),""),d=u/2**t,f=function(e,t,r){if(t.region){const{childTileX:n,childTileY:s,childTileZ:i}=r,[o,a,c,u,l,h]=t.region,d=2**e,f=(c-o)/d,A=(u-a)/d,B=(h-l)/d,[p,m]=[o+f*n,o+f*(n+1)],[y,g]=[a+A*s,a+A*(s+1)],[C,b]=[l+B*i,l+B*(i+1)];return{region:[p,y,m,g,C,b]}}return console.warn("Unsupported bounding volume type: ",t),null}(t,l,r);return{children:e.children,contentUrl:e.contentUrl,content:{uri:h},id:e.contentUrl,refine:o(i),type:c(e),lodMetricType:a,lodMetricValue:d,boundingVolume:f}}function fe(e,t){return parseInt(e.toString(2)+t.toString(2),2)}function Ae(e,t,r,n,s){const i=function(e){const t={};for(const r in e)t["{".concat(r,"}")]=e[r];return t}({level:t,x:r,y:n,z:s});return e.replace(/{level}|{x}|{y}|{z}/gi,(e=>i[e]))}function Be(e){if(!e.contentUrl)return s.R7.EMPTY;const t=e.contentUrl.split(".").pop();switch(t){case"pnts":return s.R7.POINTCLOUD;case"i3dm":case"b3dm":case"glb":case"gltf":return s.R7.SCENEGRAPH;default:return t}}function pe(e){switch(e){case"REPLACE":case"replace":return s.F$.REPLACE;case"ADD":case"add":return s.F$.ADD;default:return e}}function me(e,t){if(!e)return null;if(e.content){const r=e.content.uri||e.content.url;e.contentUrl="".concat(t.basePath,"/").concat(r)}return e.id=e.contentUrl,e.lodMetricType=s.ci.GEOMETRIC_ERROR,e.lodMetricValue=e.geometricError,e.transformMatrix=e.transform,e.type=Be(e),e.refine=pe(e.refine),e}async function ye(e){if(!e.root)return null;const t=e.basePath,r=e.root.extensions["3DTILES_implicit_tiling"],{subdivisionScheme:n,maximumLevel:i,subtreeLevels:o,subtrees:{uri:a}}=r,c=Ae(a,0,0,0,0),u="".concat(t,"/").concat(c),l=await(0,ce.z)(u,ae),h="".concat(t,"/").concat(e.root.content.uri),d=e.root.refine,f=e.root.geometricError,A=e.root.boundingVolume,B={contentUrlTemplate:h,subtreesUriTemplate:a,subdivisionScheme:n,subtreeLevels:o,maximumLevel:i,refine:d,basePath:t,lodMetricType:s.ci.GEOMETRIC_ERROR,rootLodMetricValue:f,rootBoundingVolume:A,getTileType:Be,getRefine:pe};return await async function(e,t,r){if(!e)return null;e.lodMetricType=s.ci.GEOMETRIC_ERROR,e.lodMetricValue=e.geometricError,e.transformMatrix=e.transform;const{children:n,contentUrl:i}=await le({subtree:t,options:r});i&&(e.contentUrl=i,e.content={uri:i.replace("".concat(r.basePath,"/"),"")});return e.refine=pe(e.refine),e.type=Be(e),e.children=n,e.id=e.contentUrl,e}(e.root,l,B)}const ge="3DTILES_implicit_tiling",Ce={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:i,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:async function(e,t,r){const i=t["3d-tiles"]||{};let o;o="auto"===i.isTileset?r.url&&-1!==r.url.indexOf(".json"):i.isTileset;e=o?await async function(e,t,r){var i;const o=JSON.parse((new TextDecoder).decode(e));return o.loader=t.loader||Ce,o.url=r.url,o.basePath=function(e){return n.XX(e.url)}(o),o.root=function(e){var t,r;return(null==e||null===(t=e.extensionsRequired)||void 0===t?void 0:t.includes(ge))&&(null==e||null===(r=e.extensionsUsed)||void 0===r?void 0:r.includes(ge))}(o)?await ye(o):function(e){const t=e.basePath,r=me(e.root,e),n=[];for(n.push(r);n.length>0;){const e=(n.pop()||{}).children||[];for(const r of e)me(r,{basePath:t}),n.push(r)}return r}(o),o.type=s.i3.TILES3D,o.lodMetricType=s.ci.GEOMETRIC_ERROR,o.lodMetricValue=(null===(i=o.root)||void 0===i?void 0:i.lodMetricValue)||0,o}(e,t,r):await async function(e,t,r){const n={content:{featureIds:null}},s=0;return await ne(e,s,t,r,n.content),n.content}(e,t,r);return e},options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}}},6255:(e,t,r)=>{r.d(t,{D0:()=>c,Ew:()=>u,Kn:()=>i,Lj:()=>l,Os:()=>d,Ss:()=>o,TW:()=>a,zH:()=>h});const n=e=>"boolean"==typeof e,s=e=>"function"==typeof e,i=e=>null!==e&&"object"==typeof e,o=e=>i(e)&&e.constructor==={}.constructor,a=e=>e&&"function"==typeof e[Symbol.iterator],c=e=>e&&"function"==typeof e[Symbol.asyncIterator],u=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,l=e=>"undefined"!=typeof Blob&&e instanceof Blob,h=e=>e&&"object"==typeof e&&e.isBuffer,d=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||i(e)&&s(e.tee)&&s(e.cancel)&&s(e.getReader))(e)||(e=>i(e)&&s(e.read)&&s(e.pipe)&&n(e.readable))(e)},8162:(e,t,r)=>{r.d(t,{z:()=>Q});var n=r(6255),s=r(2033),i=r(1523),o=r(6040);var a=r(6013),c=r(4942);class u{}const l=new Map;function h(e){(0,o.h)(e.source&&!e.url||!e.source&&e.url);let t=l.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return d((t=e,"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var t}(e.url),l.set(e.url,t)),e.source&&(t=d(e.source),l.set(e.source,t))),(0,o.h)(t),t}function d(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function f(e,t=!0,r){const n=r||new Set;if(e){if(A(e))n.add(e);else if(A(e.buffer))n.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"==typeof e)for(const r in e)f(e[r],t,n)}else;return void 0===r?Array.from(n):[]}function A(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}const B=()=>{};class p{static isSupported(){return"undefined"!=typeof Worker&&a.jU||void 0!==typeof u}constructor(e){(0,c.Z)(this,"name",void 0),(0,c.Z)(this,"source",void 0),(0,c.Z)(this,"url",void 0),(0,c.Z)(this,"terminated",!1),(0,c.Z)(this,"worker",void 0),(0,c.Z)(this,"onMessage",void 0),(0,c.Z)(this,"onError",void 0),(0,c.Z)(this,"_loadableURL","");const{name:t,source:r,url:n}=e;(0,o.h)(r||n),this.name=t,this.source=r,this.url=n,this.onMessage=B,this.onError=e=>console.log(e),this.worker=a.jU?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=B,this.onError=B,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||f(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=h({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new u(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new u(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class m{constructor(e,t){(0,c.Z)(this,"name",void 0),(0,c.Z)(this,"workerThread",void 0),(0,c.Z)(this,"isRunning",!0),(0,c.Z)(this,"result",void 0),(0,c.Z)(this,"_resolve",(()=>{})),(0,c.Z)(this,"_reject",(()=>{})),this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){(0,o.h)(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){(0,o.h)(this.isRunning),this.isRunning=!1,this._reject(e)}}class y{static isSupported(){return p.isSupported()}constructor(e){(0,c.Z)(this,"name","unnamed"),(0,c.Z)(this,"source",void 0),(0,c.Z)(this,"url",void 0),(0,c.Z)(this,"maxConcurrency",1),(0,c.Z)(this,"maxMobileConcurrency",1),(0,c.Z)(this,"onDebug",(()=>{})),(0,c.Z)(this,"reuseWorkers",!0),(0,c.Z)(this,"props",{}),(0,c.Z)(this,"jobQueue",[]),(0,c.Z)(this,"idleQueue",[]),(0,c.Z)(this,"count",0),(0,c.Z)(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e,t=((e,t,r)=>e.done(r)),r=((e,t)=>e.error(t))){const n=new Promise((n=>(this.jobQueue.push({name:e,onMessage:t,onError:r,onStart:n}),this)));return this._startQueuedJob(),await n}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const r=new m(t.name,e);e.onMessage=e=>t.onMessage(r,e.type,e.payload),e.onError=e=>t.onError(r,e),t.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new p({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return a.tq?this.maxMobileConcurrency:this.maxConcurrency}}const g={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class C{static isSupported(){return p.isSupported()}static getWorkerFarm(e={}){return C._workerFarm=C._workerFarm||new C({}),C._workerFarm.setProps(e),C._workerFarm}constructor(e){(0,c.Z)(this,"props",void 0),(0,c.Z)(this,"workerPools",new Map),this.props={...g},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:r,url:n}=e;let s=this.workerPools.get(t);return s||(s=new y({name:t,source:r,url:n}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(0,c.Z)(C,"_workerFarm",void 0);async function b(e,t,r,n,s){const i=e.id,a=function(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let s=r.workerUrl;if(s||"compression"!==e.id||(s=t.workerUrl),"test"===t._workerType&&(s="modules/".concat(e.module,"/dist/").concat(n)),!s){let t=e.version;"latest"===t&&(t="latest");const r=t?"@".concat(t):"";s="https://unpkg.com/@loaders.gl/".concat(e.module).concat(r,"/dist/").concat(n)}return(0,o.h)(s),s}(e,r),c=C.getWorkerFarm(r).getWorkerPool({name:i,url:a});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await c.startJob("process-on-worker",T.bind(null,s));u.postMessage("process",{input:t,options:r,context:n});const l=await u.result;return await l.result}async function T(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:s,input:i,options:o}=n;try{const r=await e(i,o);t.postMessage("done",{id:s,result:r})}catch(e){const r=e instanceof Error?e.message:"unknown error";t.postMessage("error",{id:s,error:r})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}var I=r(5680);const E=262144;var F=r(4959);function w(e,t){return F.jU?async function*(e,t){const r=e.getReader();let n;try{for(;;){const e=n||r.read();null!=t&&t._streamReadAhead&&(n=r.read());const{done:s,value:i}=await e;if(s)return;yield(0,I.rJ)(i)}}catch(e){r.releaseLock()}}(e,t):async function*(e,t){for await(const t of e)yield(0,I.rJ)(t)}(e)}function _(e,t){if("string"==typeof e)return function*(e,t){const r=(null==t?void 0:t.chunkSize)||262144;let n=0;const s=new TextEncoder;for(;n<e.length;){const t=Math.min(e.length-n,r),i=e.slice(n,n+t);n+=t,yield s.encode(i)}}(e,t);if(e instanceof ArrayBuffer)return function*(e,t={}){const{chunkSize:r=E}=t;let n=0;for(;n<e.byteLength;){const t=Math.min(e.byteLength-n,r),s=new ArrayBuffer(t),i=new Uint8Array(e,n,t);new Uint8Array(s).set(i),n+=t,yield s}}(e,t);if((0,n.Lj)(e))return async function*(e,t){const r=(null==t?void 0:t.chunkSize)||1048576;let n=0;for(;n<e.size;){const t=n+r,s=await e.slice(n,t).arrayBuffer();n=t,yield s}}(e,t);if((0,n.Os)(e))return w(e,t);if((0,n.Ew)(e)){return w(e.body,t)}throw new Error("makeIterator")}var v=r(7927);const D="Cannot convert supplied data type";async function M(e,t,r){const s=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||s)return function(e,t,r){if(t.text&&"string"==typeof e)return e;if((0,n.zH)(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const n=e.byteLength||e.length;return 0===e.byteOffset&&n===r.byteLength||(r=r.slice(e.byteOffset,e.byteOffset+n)),r}throw new Error(D)}(e,t);if((0,n.Lj)(e)&&(e=await(0,v.L1)(e)),(0,n.Ew)(e)){const r=e;return await(0,v.mm)(r),t.binary?await r.arrayBuffer():await r.text()}if((0,n.Os)(e)&&(e=_(e,r)),(0,n.TW)(e)||(0,n.D0)(e))return async function(e){const t=[];for await(const r of e)t.push(r);return(0,I.JY)(...t)}(e);throw new Error(D)}var G=r(9752),U=r(962);const R=new(r(9109).Z)({id:"loaders.gl"});var O=r(6228);const S=/\.([^.]+)$/;function J(e,t=[],r,n){if(!P(e))return null;if(t&&!Array.isArray(t))return(0,s.T)(t);let i=[];t&&(i=i.concat(t)),null!=r&&r.ignoreRegisteredLoaders||i.push(...(0,O.kO)()),function(e){for(const t of e)(0,s.T)(t)}(i);const o=function(e,t,r,n){const{url:s,type:i}=(0,G.l)(e),o=s||(null==n?void 0:n.url);let a=null,c="";null!=r&&r.mimeType&&(a=x(t,null==r?void 0:r.mimeType),c="match forced by supplied MIME type ".concat(null==r?void 0:r.mimeType));var u;a=a||function(e,t){const r=t&&S.exec(t),n=r&&r[1];return n?function(e,t){t=t.toLowerCase();for(const r of e)for(const e of r.extensions)if(e.toLowerCase()===t)return r;return null}(e,n):null}(t,o),c=c||(a?"matched url ".concat(o):""),a=a||x(t,i),c=c||(a?"matched MIME type ".concat(i):""),a=a||function(e,t){if(!t)return null;for(const r of e)if("string"==typeof t){if(L(t,r))return r}else if(ArrayBuffer.isView(t)){if(N(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer){if(N(t,0,r))return r}return null}(t,e),c=c||(a?"matched initial data ".concat(Z(e)):""),a=a||x(t,null==r?void 0:r.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(i):""),c&&R.log(1,"selectLoader selected ".concat(null===(u=a)||void 0===u?void 0:u.name,": ").concat(c,"."));return a}(e,i,r,n);if(!(o||null!=r&&r.nothrow))throw new Error(H(e));return o}function P(e){return!(e instanceof Response&&204===e.status)}function H(e){const{url:t,type:r}=(0,G.l)(e);let n="No valid loader found (";n+=t?"".concat(U.vB(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const s=e?Z(e):"";return n+=s?' first bytes: "'.concat(s,'"'):"first bytes: not available",n+=")",n}function x(e,t){for(const r of e){if(r.mimeTypes&&r.mimeTypes.includes(t))return r;if(t==="application/x.".concat(r.id))return r}return null}function L(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function N(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some((n=>function(e,t,r,n){if(n instanceof ArrayBuffer)return(0,I.Xq)(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":return n===j(e,t,n.length);default:return!1}}(e,t,r,n)))}function Z(e,t=5){if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return j(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return j(e,0,t)}return""}function j(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let s="";for(let e=0;e<r;e++)s+=String.fromCharCode(n.getUint8(t+e));return s}async function V(e,t,r,c){(0,o.h)(!c||"object"==typeof c),!t||Array.isArray(t)||(0,s.C)(t)||(c=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:u}=(0,G.l)(e),l=function(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...e]:e}return r&&r.length?r:null}(t,c),h=await async function(e,t=[],r,s){if(!P(e))return null;let i=J(e,t,{...r,nothrow:!0},s);if(i)return i;if((0,n.Lj)(e)&&(i=J(e=await e.slice(0,10).arrayBuffer(),t,r,s)),!(i||null!=r&&r.nothrow))throw new Error(H(e));return i}(e,l,r);return h?(c=function(e,t,r=null){if(r)return r;const n={fetch:(0,i.bV)(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}({url:u,parse:V,loaders:l},r=(0,i.GR)(r,h,l,u),c),await async function(e,t,r,s){if(function(e,t="3.2.4"){(0,o.h)(e,"no worker provided");const r=e.version}(e),(0,n.Ew)(t)){const e=t,{ok:r,redirected:n,status:i,statusText:o,type:a,url:c}=e,u=Object.fromEntries(e.headers.entries());s.response={headers:u,ok:r,redirected:n,status:i,statusText:o,type:a,url:c}}if(t=await M(t,e,r),e.parseTextSync&&"string"==typeof t)return r.dataType="text",e.parseTextSync(t,r,s,e);if(function(e,t){return!!C.isSupported()&&!!(a.jU||null!=t&&t._nodeWorkers)&&e.worker&&(null==t?void 0:t.worker)}(e,r))return await b(e,t,r,s,V);if(e.parseText&&"string"==typeof t)return await e.parseText(t,r,s,e);if(e.parse)return await e.parse(t,r,s,e);throw(0,o.h)(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}(h,e,r,c)):null}async function Q(e,t,r,o){Array.isArray(t)||(0,s.C)(t)||(void 0,r=t,t=void 0);const a=(0,i.bV)(r);let c=e;return"string"==typeof e&&(c=await a(e)),(0,n.Lj)(e)&&(c=await a(e)),await V(c,t,r)}},6228:(e,t,r)=>{r.d(t,{fh:()=>o,kO:()=>a});var n=r(2033),s=r(1523);const i=()=>{const e=(0,s.rx)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function o(e){const t=i();e=Array.isArray(e)?e:[e];for(const r of e){const e=(0,n.T)(r);t.find((t=>e===t))||t.unshift(e)}}function a(){return i()}},7321:(e,t,r)=>{r.d(t,{d:()=>o});let n="";const s={};var i=r(7927);async function o(e,t){if("string"==typeof e){e=function(e){for(const t in s)if(e.startsWith(t)){const r=s[t];e=e.replace(t,r)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat(n).concat(e)),e}(e);let r=t;return null!=t&&t.fetch&&"function"!=typeof(null==t?void 0:t.fetch)&&(r=t.fetch),await fetch(e,r)}return await(0,i.L1)(e)}},2033:(e,t,r)=>{r.d(t,{C:()=>s,T:()=>i});var n=r(6269);function s(e){var t;if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(null===(t=e)||void 0===t?void 0:t.extensions)}function i(e){var t,r;let i;return(0,n.h)(e,"null loader"),(0,n.h)(s(e),"invalid loader"),Array.isArray(e)&&(i=e[1],e=e[0],e={...e,options:{...e.options,...i}}),(null!==(t=e)&&void 0!==t&&t.parseTextSync||null!==(r=e)&&void 0!==r&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}},1523:(e,t,r)=>{r.d(t,{bV:()=>A,rx:()=>h,GR:()=>f});var n=r(6255),s=r(7321),i=r(4942);const o=new(r(9109).Z)({id:"loaders.gl"});class a{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var c=r(4959);const u={fetch:null,mimeType:void 0,nothrow:!1,log:new class{constructor(){(0,i.Z)(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:c.jU,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},l={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function h(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const d=()=>{const e=h();return e.globalOptions=e.globalOptions||{...u},e.globalOptions};function f(e,t,r,n){return r=r||[],function(e,t){B(e,null,u,l,t);for(const r of t){const n=e&&e[r.id]||{},s=r.options&&r.options[r.id]||{},i=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};B(n,r.id,s,i,t)}}(e,r=Array.isArray(r)?r:[r]),m(t,e,n)}function A(e,t){const r=d(),i=e||r;return"function"==typeof i.fetch?i.fetch:(0,n.Kn)(i.fetch)?e=>(0,s.d)(e,i):null!=t&&t.fetch?null==t?void 0:t.fetch:s.d}function B(e,t,r,s,i){const a=t||"Top level",c=t?"".concat(t,"."):"";for(const u in e){const l=!t&&(0,n.Kn)(e[u]),h="baseUri"===u&&!t,d="workerUrl"===u&&t;if(!(u in r)&&!h&&!d)if(u in s)o.warn("".concat(a," loader option '").concat(c).concat(u,"' no longer supported, use '").concat(s[u],"'"))();else if(!l){const e=p(u,i);o.warn("".concat(a," loader option '").concat(c).concat(u,"' not recognized. ").concat(e))()}}}function p(e,t){const r=e.toLowerCase();let n="";for(const s of t)for(const t in s.options){if(e===t)return"Did you mean '".concat(s.id,".").concat(t,"'?");const i=t.toLowerCase();(r.startsWith(i)||i.startsWith(r))&&(n=n||"Did you mean '".concat(s.id,".").concat(t,"'?"))}return n}function m(e,t,r){const n={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(n,r),null===n.log&&(n.log=new a),y(n,d()),y(n,t),n}function y(e,t){for(const r in t)if(r in t){const s=t[r];(0,n.Ss)(s)&&(0,n.Ss)(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}},9752:(e,t,r)=>{r.d(t,{C:()=>l,l:()=>u});var n=r(6255);const s=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,i=/^([-\w.]+\/[-\w.+]+)/;function o(e){const t=i.exec(e);return t?t[1]:e}function a(e){const t=s.exec(e);return t?t[1]:""}const c=/\?.*/;function u(e){if((0,n.Ew)(e)){const t=h(e.url||"");return{url:t,type:o(e.headers.get("content-type")||"")||a(t)}}return(0,n.Lj)(e)?{url:h(e.name||""),type:e.type||""}:"string"==typeof e?{url:h(e),type:a(e)}:{url:"",type:""}}function l(e){return(0,n.Ew)(e)?e.headers["content-length"]||-1:(0,n.Lj)(e)?e.size:"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function h(e){return e.replace(c,"")}},7927:(e,t,r)=>{r.d(t,{L1:()=>i,mm:()=>o});var n=r(6255),s=r(9752);async function i(e){if((0,n.Ew)(e))return e;const t={},r=(0,s.C)(e);r>=0&&(t["content-length"]=String(r));const{url:i,type:o}=(0,s.l)(e);o&&(t["content-type"]=o);const a=await async function(e){const t=5;if("string"==typeof e)return"data:,".concat(e.slice(0,t));if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const r=new FileReader;r.onload=t=>{var r;return e(null==t||null===(r=t.target)||void 0===r?void 0:r.result)},r.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){const r=function(e){let t="";const r=new Uint8Array(e);for(let e=0;e<r.byteLength;e++)t+=String.fromCharCode(r[e]);return btoa(t)}(e.slice(0,t));return"data:base64,".concat(r)}return null}(e);a&&(t["x-first-bytes"]=a),"string"==typeof e&&(e=(new TextEncoder).encode(e));const c=new Response(e,{headers:t});return Object.defineProperty(c,"url",{value:i}),c}async function o(e){if(!e.ok){const t=await async function(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch(e){}return t}(e);throw new Error(t)}}},3774:(e,t,r)=>{r.d(t,{VJ:()=>Q});const n="3.2.4",s={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:n,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};var i=r(4942);class o{constructor(e,t,r=!1,n=new Map){(0,i.Z)(this,"name",void 0),(0,i.Z)(this,"type",void 0),(0,i.Z)(this,"nullable",void 0),(0,i.Z)(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=r,this.metadata=n}get typeId(){return this.type&&this.type.typeId}clone(){return new o(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let a,c,u,l,h,d,f,A,B;!function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"}(a||(a={}));class p{static isNull(e){return e&&e.typeId===a.Null}static isInt(e){return e&&e.typeId===a.Int}static isFloat(e){return e&&e.typeId===a.Float}static isBinary(e){return e&&e.typeId===a.Binary}static isUtf8(e){return e&&e.typeId===a.Utf8}static isBool(e){return e&&e.typeId===a.Bool}static isDecimal(e){return e&&e.typeId===a.Decimal}static isDate(e){return e&&e.typeId===a.Date}static isTime(e){return e&&e.typeId===a.Time}static isTimestamp(e){return e&&e.typeId===a.Timestamp}static isInterval(e){return e&&e.typeId===a.Interval}static isList(e){return e&&e.typeId===a.List}static isStruct(e){return e&&e.typeId===a.Struct}static isUnion(e){return e&&e.typeId===a.Union}static isFixedSizeBinary(e){return e&&e.typeId===a.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===a.FixedSizeList}static isMap(e){return e&&e.typeId===a.Map}static isDictionary(e){return e&&e.typeId===a.Dictionary}get typeId(){return a.NONE}compareTo(e){return this===e}}Symbol.toStringTag;Symbol.toStringTag;c=Symbol.toStringTag;class m extends p{constructor(e,t){super(),(0,i.Z)(this,"isSigned",void 0),(0,i.Z)(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return a.Int}get[c](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class y extends m{constructor(){super(!0,8)}}class g extends m{constructor(){super(!0,16)}}class C extends m{constructor(){super(!0,32)}}class b extends m{constructor(){super(!1,8)}}class T extends m{constructor(){super(!1,16)}}class I extends m{constructor(){super(!1,32)}}const E=32,F=64;u=Symbol.toStringTag;class w extends p{constructor(e){super(),(0,i.Z)(this,"precision",void 0),this.precision=e}get typeId(){return a.Float}get[u](){return"Float"}toString(){return"Float".concat(this.precision)}}class _ extends w{constructor(){super(E)}}class v extends w{constructor(){super(F)}}Symbol.toStringTag;Symbol.toStringTag;l=Symbol.toStringTag;h=Symbol.toStringTag;d=Symbol.toStringTag;f=Symbol.toStringTag;A=Symbol.toStringTag;class D extends p{constructor(e,t){super(),(0,i.Z)(this,"listSize",void 0),(0,i.Z)(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return a.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[A](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}B=Symbol.toStringTag;function M(e,t,r){const n=function(e){switch(e.constructor){case Int8Array:return new y;case Uint8Array:return new b;case Int16Array:return new g;case Uint16Array:return new T;case Int32Array:return new C;case Uint32Array:return new I;case Float32Array:return new _;case Float64Array:return new v;default:throw new Error("array type not supported")}}(t.value),s=r||function(e){const t=new Map;"byteOffset"in e&&t.set("byteOffset",e.byteOffset.toString(10));"byteStride"in e&&t.set("byteStride",e.byteStride.toString(10));"normalized"in e&&t.set("normalized",e.normalized.toString());return t}(t);return new o(e,new D(t.size,new o("value",n)),!1,s)}class G{constructor(e,t){(0,i.Z)(this,"fields",void 0),(0,i.Z)(this,"metadata",void 0),function(e,t){if(!e)throw new Error(t||"loader assertion failed.")}(Array.isArray(e)),function(e){const t={};for(const r of e)t[r.name]&&console.warn("Schema: duplicated field name",r.name,r),t[r.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata)return!1;if(this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const r=this.fields.filter((e=>t[e.name]));return new G(r,this.metadata)}selectAt(...e){const t=e.map((e=>this.fields[e])).filter(Boolean);return new G(t,this.metadata)}assign(e){let t,r=this.metadata;if(e instanceof G){const n=e;t=n.fields,r=U(U(new Map,this.metadata),n.metadata)}else t=e;const n=Object.create(null);for(const e of this.fields)n[e.name]=e;for(const e of t)n[e.name]=e;const s=Object.values(n);return new G(s,r)}}function U(e,t){return new Map([...e||new Map,...t||new Map])}function R(e,t,r){return M(e,t,r?O(r.metadata):void 0)}function O(e){const t=new Map;for(const r in e)t.set("".concat(r,".string"),JSON.stringify(e[r]));return t}const S={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},J={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class P{constructor(e){(0,i.Z)(this,"draco",void 0),(0,i.Z)(this,"decoder",void 0),(0,i.Z)(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const r=new this.draco.DecoderBuffer;r.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const n=this.decoder.GetEncodedGeometryType(r),s=n===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let e;switch(n){case this.draco.TRIANGULAR_MESH:e=this.decoder.DecodeBufferToMesh(r,s);break;case this.draco.POINT_CLOUD:e=this.decoder.DecodeBufferToPointCloud(r,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!e.ok()||!s.ptr){const t="DRACO decompression failed: ".concat(e.error_msg());throw new Error(t)}const i=this._getDracoLoaderData(s,n,t),o=this._getMeshData(s,i,t),a=function(e){let t=1/0,r=1/0,n=1/0,s=-1/0,i=-1/0,o=-1/0;const a=e.POSITION?e.POSITION.value:[],c=a&&a.length;for(let e=0;e<c;e+=3){const c=a[e],u=a[e+1],l=a[e+2];t=c<t?c:t,r=u<r?u:r,n=l<n?l:n,s=c>s?c:s,i=u>i?u:i,o=l>o?l:o}return[[t,r,n],[s,i,o]]}(o.attributes),c=function(e,t,r){const n=O(t.metadata),s=[],i=function(e){const t={};for(const r in e){const n=e[r];t[n.name||"undefined"]=n}return t}(t.attributes);for(const t in e){const r=R(t,e[t],i[t]);s.push(r)}if(r){const e=R("indices",r);s.push(e)}return new G(s,n)}(o.attributes,i,o.indices);return{loader:"draco",loaderData:i,header:{vertexCount:s.num_points(),boundingBox:a},...o,schema:c}}finally{this.draco.destroy(r),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,t,r){const n=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,r);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:n,attributes:s}}_getDracoAttributes(e,t){const r={};for(let n=0;n<e.num_attributes();n++){const s=this.decoder.GetAttribute(e,n),i=this._getAttributeMetadata(e,n);r[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:n,metadata:i};const o=this._getQuantizationTransform(s,t);o&&(r[s.unique_id()].quantization_transform=o);const a=this._getOctahedronTransform(s,t);a&&(r[s.unique_id()].octahedron_transform=a)}return r}_getMeshData(e,t,r){const n=this._getMeshAttributes(t,e,r);if(!n.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===r.topology?{topology:"triangle-strip",mode:4,attributes:n,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:n,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:n}}_getMeshAttributes(e,t,r){const n={};for(const s of Object.values(e.attributes)){const e=this._deduceAttributeName(s,r);s.name=e;const{value:i,size:o}=this._getAttributeValues(t,s);n[e]={value:i,size:o,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return n}_getTriangleListIndices(e){const t=3*e.num_faces(),r=4*t,n=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,n),new Uint32Array(this.draco.HEAPF32.buffer,n,t).slice()}finally{this.draco._free(n)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function(e){const t=e.size(),r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=e.GetValue(n);return r}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const r=J[t.data_type],n=t.num_components,s=e.num_points()*n,i=s*r.BYTES_PER_ELEMENT,o=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32;default:return e.DT_INVALID}}(this.draco,r);let a;const c=this.draco._malloc(i);try{const n=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,n,o,i,c),a=new r(this.draco.HEAPF32.buffer,c,s).slice()}finally{this.draco._free(c)}return{value:a,size:n}}_deduceAttributeName(e,t){const r=e.unique_id;for(const[e,n]of Object.entries(t.extraAttributes||{}))if(n===r)return e;const n=e.attribute_type;for(const e in S){if(this.draco[e]===n)return S[e]}const s=t.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(r)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const r=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(r)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},r=this.metadataQuerier.NumEntries(e);for(let n=0;n<r;n++){const r=this.metadataQuerier.GetEntryName(e,n);t[r]=this._getDracoMetadataField(e,r)}return t}_getDracoMetadataField(e,t){const r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,r);const n=function(e){const t=e.size(),r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=e.GetValue(n);return r}(r);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:n}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:r=[]}=e,n=[...t,...r];for(const e of n)this.decoder.SkipAttributeTransform(this.draco[e])}_getQuantizationTransform(e,t){const{quantizedAttributes:r=[]}=t,n=e.attribute_type();if(r.map((e=>this.decoder[e])).includes(n)){const t=new this.draco.AttributeQuantizationTransform;try{if(t.InitFromAttribute(e))return{quantization_bits:t.quantization_bits(),range:t.range(),min_values:new Float32Array([1,2,3]).map((e=>t.min_value(e)))}}finally{this.draco.destroy(t)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:r=[]}=t,n=e.attribute_type();if(r.map((e=>this.decoder[e])).includes(n)){const t=new this.draco.AttributeQuantizationTransform;try{if(t.InitFromAttribute(e))return{quantization_bits:t.quantization_bits()}}finally{this.draco.destroy(t)}}return null}}var H=r(6706);const x="1.4.1",L="https://www.gstatic.com/draco/versioned/decoders/".concat(x,"/draco_decoder.js"),N="https://www.gstatic.com/draco/versioned/decoders/".concat(x,"/draco_wasm_wrapper.js"),Z="https://www.gstatic.com/draco/versioned/decoders/".concat(x,"/draco_decoder.wasm");"https://raw.githubusercontent.com/google/draco/".concat(x,"/javascript/draco_encoder.js");let j;async function V(e){const t=e.modules||{};return j=t.draco3d?j||t.draco3d.createDecoderModule({}).then((e=>({draco:e}))):j||async function(e){let t,r;if("js"===(e.draco&&e.draco.decoderType))t=await(0,H.Y)(L,"draco",e);else[t,r]=await Promise.all([await(0,H.Y)(N,"draco",e),await(0,H.Y)(Z,"draco",e)]);return t=t||globalThis.DracoDecoderModule,await function(e,t){const r={};t&&(r.wasmBinary=t);return new Promise((t=>{e({...r,onModuleLoaded:e=>t({draco:e})})}))}(t,r)}(e),await j}r(6013).jU;const Q={...s,parse:async function(e,t){const{draco:r}=await V(t),n=new P(r);try{return n.parseSync(e,null==t?void 0:t.draco)}finally{n.destroy()}}}},2827:(e,t,r)=>{function n(e,t){const r=null==t?void 0:t.globalFeatureId;return void 0!==r?function(e,t){const r=o(e);for(const e of r){let r=0,n=e.featureIds.value[0];for(let s=0;s<e.featureIds.value.length;s++){const i=e.featureIds.value[s];if(i!==n){if(t===e.globalFeatureIds.value[r])return a(e,r,s);r=s,n=i}}if(t===e.globalFeatureIds.value[r])return a(e,r,e.featureIds.value.length)}throw new Error("featureId:".concat(t," not found"))}(e,r):s(e,null==t?void 0:t.type)}function s(e,t){return function(e){const t=[];for(const r of e){if(0===r.featureIds.value.length)continue;let e=0,n=r.featureIds.value[0];for(let s=0;s<r.featureIds.value.length;s++){const i=r.featureIds.value[s];i!==n&&(t.push(a(r,e,s)),e=s,n=i)}t.push(a(r,e,r.featureIds.value.length))}return t}(o(e,t))}function i(e,t,r){switch(e.type){case"Point":return function(e,t,r){const{positions:n}=e,s=u(n,t,r);if(s.length>1)return{type:"MultiPoint",coordinates:s};return{type:"Point",coordinates:s[0]}}(e,t,r);case"LineString":return function(e,t=-1/0,r=1/0){const{positions:n}=e,s=e.pathIndices.value.filter((e=>e>=t&&e<=r));if(!(s.length>2)){return{type:"LineString",coordinates:u(n,s[0],s[1])}}const i=[];for(let e=0;e<s.length-1;e++){const t=u(n,s[e],s[e+1]);i.push(t)}return{type:"MultiLineString",coordinates:i}}(e,t,r);case"Polygon":return c(e,t,r);default:const n=e;throw new Error("Unsupported geometry type: ".concat(null==n?void 0:n.type))}}function o(e,t){if(!Boolean(e.points||e.lines||e.polygons))return e.type=t||function(e){if(e.pathIndices)return"LineString";if(e.polygonIndices)return"Polygon";return"Point"}(e),[e];const r=[];return e.points&&(e.points.type="Point",r.push(e.points)),e.lines&&(e.lines.type="LineString",r.push(e.lines)),e.polygons&&(e.polygons.type="Polygon",r.push(e.polygons)),r}function a(e,t,r){const n=i(e,t,r),s=function(e,t=0,r){const n=Object.assign({},e.properties[e.featureIds.value[t]]);for(const r in e.numericProps)n[r]=e.numericProps[r].value[t];return n}(e,t),o=function(e,t=0,r){return e.fields&&e.fields[e.featureIds.value[t]]}(e,t);return{type:"Feature",geometry:n,properties:s,...o}}function c(e,t=-1/0,r=1/0){const{positions:n}=e,s=e.polygonIndices.value.filter((e=>e>=t&&e<=r)),i=e.primitivePolygonIndices.value.filter((e=>e>=t&&e<=r));if(!(s.length>2)){const e=[];for(let t=0;t<i.length-1;t++){const r=u(n,i[t],i[t+1]);e.push(r)}return{type:"Polygon",coordinates:e}}const o=[];for(let t=0;t<s.length-1;t++){const r=c(e,s[t],s[t+1]).coordinates;o.push(r)}return{type:"MultiPolygon",coordinates:o}}function u(e,t,r){t=t||0,r=r||e.value.length/e.size;const n=[];for(let s=t;s<r;s++){const t=Array();for(let r=s*e.size;r<(s+1)*e.size;r++)t.push(Number(e.value[r]));n.push(t)}return n}r.d(t,{F_:()=>n})},7103:(e,t,r)=>{r.d(t,{E:()=>Et});var n={};r.r(n),r.d(n,{decode:()=>ye,name:()=>me});var s={};r.r(s),r.d(s,{name:()=>Fe,preprocess:()=>we});var i={};r.r(i),r.d(i,{name:()=>ve,preprocess:()=>De});var o={};r.r(o),r.d(o,{decode:()=>Se,encode:()=>Je,name:()=>Re,preprocess:()=>Oe});var a={};r.r(a),r.d(a,{decode:()=>Ze,encode:()=>je,name:()=>Ne});var c={};r.r(c),r.d(c,{decode:()=>Ke,encode:()=>ke,name:()=>Qe});var u={};r.r(u),r.d(u,{decode:()=>qe,encode:()=>We,name:()=>Xe});var l=r(6706);const h="3.2.4",d="https://unpkg.com/@loaders.gl/textures@".concat(h,"/dist/libs/basis_encoder.wasm"),f="https://unpkg.com/@loaders.gl/textures@".concat(h,"/dist/libs/basis_encoder.js");let A,B;async function p(e){const t=e.modules||{};return t.basis?t.basis:(A=A||async function(e){let t=null,r=null;return[t,r]=await Promise.all([await(0,l.Y)("basis_transcoder.js","textures",e),await(0,l.Y)("basis_transcoder.wasm","textures",e)]),t=t||globalThis.BASIS,await function(e,t){const r={};t&&(r.wasmBinary=t);return new Promise((t=>{e(r).then((e=>{const{BasisFile:r,initializeBasis:n}=e;n(),t({BasisFile:r})}))}))}(t,r)}(e),await A)}async function m(e){const t=e.modules||{};return t.basisEncoder?t.basisEncoder:(B=B||async function(e){let t=null,r=null;return[t,r]=await Promise.all([await(0,l.Y)(f,"textures",e),await(0,l.Y)(d,"textures",e)]),t=t||globalThis.BASIS,await function(e,t){const r={};t&&(r.wasmBinary=t);return new Promise((t=>{e(r).then((e=>{const{BasisFile:r,KTX2File:n,initializeBasis:s,BasisEncoder:i}=e;s(),t({BasisFile:r,KTX2File:n,BasisEncoder:i})}))}))}(t,r)}(e),await B)}const y=33776,g=33779,C=35840,b=35842,T=36196,I=37808,E=["","WEBKIT_","MOZ_"],F={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let w=null;function _(e){if(!w){e=e||function(){try{return document.createElement("canvas").getContext("webgl")}catch(e){return null}}()||void 0,w=new Set;for(const t of E)for(const r in F)if(e&&e.getExtension("".concat(t).concat(r))){const e=F[r];w.add(e)}}return w}r(1029);const v=[171,75,84,88,32,50,48,187,13,10,26,10];const D={etc1:{basisFormat:0,compressed:!0,format:T},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:y},bc3:{basisFormat:3,compressed:!0,format:g},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:C},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:b},"astc-4x4":{basisFormat:10,compressed:!0,format:I},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function M(e,t,r){const n=new e(new Uint8Array(t));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");const e=n.getNumImages(),t=[];for(let s=0;s<e;s++){const e=n.getNumLevels(s),i=[];for(let t=0;t<e;t++)i.push(G(n,s,t,r));t.push(i)}return t}finally{n.close(),n.delete()}}function G(e,t,r,n){const s=e.getImageWidth(t,r),i=e.getImageHeight(t,r),o=e.getHasAlpha(),{compressed:a,format:c,basisFormat:u}=O(n,o),l=e.getImageTranscodedSizeInBytes(t,r,u),h=new Uint8Array(l);if(!e.transcodeImage(h,t,r,u,0,0))throw new Error("failed to start Basis transcoding");return{width:s,height:i,data:h,compressed:a,format:c,hasAlpha:o}}function U(e,t,r){const n=new e(new Uint8Array(t));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");const e=n.getLevels(),t=[];for(let s=0;s<e;s++){t.push(R(n,s,r));break}return[t]}finally{n.close(),n.delete()}}function R(e,t,r){const{alphaFlag:n,height:s,width:i}=e.getImageLevelInfo(t,0,0),{compressed:o,format:a,basisFormat:c}=O(r,n),u=e.getImageTranscodedSizeInBytes(t,0,0,c),l=new Uint8Array(u);if(!e.transcodeImage(l,t,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:i,height:s,data:l,compressed:o,hasAlpha:n,format:a}}function O(e,t){let r=e&&e.basis&&e.basis.format;return"auto"===r&&(r=S()),"object"==typeof r&&(r=t?r.alpha:r.noAlpha),r=r.toLowerCase(),D[r]}function S(){const e=_();return e.has("astc")?"astc-4x4":e.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:e.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:e.has("etc1")?"etc1":e.has("etc2")?"etc2":"rgb565"}const J={name:"Basis",id:"basis",module:"textures",version:"3.2.4",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},P={...J,parse:async function(e,t){if("auto"===t.basis.containerFormat){if(function(e){const t=new Uint8Array(e);return!(t.byteLength<v.length||t[0]!==v[0]||t[1]!==v[1]||t[2]!==v[2]||t[3]!==v[3]||t[4]!==v[4]||t[5]!==v[5]||t[6]!==v[6]||t[7]!==v[7]||t[8]!==v[8]||t[9]!==v[9]||t[10]!==v[10]||t[11]!==v[11])}(e)){return U((await m(t)).KTX2File,e,t)}const{BasisFile:r}=await p(t);return M(r,e,t)}if("encoder"===t.basis.module){const r=await m(t);return"ktx2"===t.basis.containerFormat?U(r.KTX2File,e,t):M(r.BasisFile,e,t)}{const{BasisFile:r}=await p(t);return M(r,e,t)}}};var H=r(6487);function x(e,t,r){if(e.byteLength<=t+r)return"";const n=new DataView(e);let s="";for(let e=0;e<r;e++)s+=String.fromCharCode(n.getUint8(t+e));return s}function L(e){try{return JSON.parse(e)}catch(t){throw new Error('Failed to parse JSON from data starting with "'.concat(function(e,t=5){if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return x(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer)return x(e,0,t);return""}(e),'"'))}}var N=r(5680);function Z(e,t){if(!e)throw new Error(t||"assert failed: gltf")}function j(e,t){if(e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:"))return e;const r=t.baseUri||t.uri;if(!r)throw new Error("'baseUri' must be provided to resolve relative url ".concat(e));return r.substr(0,r.lastIndexOf("/")+1)+e}function V(e,t,r){const n=e.bufferViews[r];Z(n);const s=t[n.buffer];Z(s);const i=(n.byteOffset||0)+s.byteOffset;return new Uint8Array(s.arrayBuffer,i,n.byteLength)}var Q=r(4942),K=r(9105),k=r(6269);function Y(e,t){return(0,k.h)(e>=0),(0,k.h)(t>0),e+(t-1)&~(t-1)}function X(e,t,r){let n;if(e instanceof ArrayBuffer)n=new Uint8Array(e);else{const t=e.byteOffset,r=e.byteLength;n=new Uint8Array(e.buffer||e.arrayBuffer,t,r)}return t.set(n,r),r+Y(n.byteLength,4)}const q=["SCALAR","VEC2","VEC3","VEC4"],W=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],z=new Map(W),$={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ee={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},te={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function re(e){return q[e-1]||q[0]}function ne(e){const t=z.get(e.constructor);if(!t)throw new Error("Illegal typed array");return t}function se(e,t){const r=te[e.componentType],n=$[e.type],s=ee[e.componentType],i=e.count*n,o=e.count*n*s;return Z(o>=0&&o<=t.byteLength),{ArrayType:r,length:i,byteLength:o}}const ie={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class oe{constructor(e){(0,Q.Z)(this,"gltf",void 0),(0,Q.Z)(this,"sourceBuffers",void 0),(0,Q.Z)(this,"byteLength",void 0),this.gltf=e||{json:{...ie},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){const t=this.getUsedExtensions().find((t=>t===e)),r=this.json.extensions||{};return t?r[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find((t=>t===e))?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const r=this.json[e]&&this.json[e][t];if(!r)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return r}getTypedArrayForBufferView(e){const t=(e=this.getBufferView(e)).buffer,r=this.gltf.buffers[t];Z(r);const n=(e.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,n,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:n,length:s}=se(e,t);return new n(r,t.byteOffset+e.byteOffset,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,n=t.byteOffset||0;return new Uint8Array(r,n,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,r){return e.extensions=e.extensions||{},e.extensions[t]=r,this.registerUsedExtension(t),this}setObjectExtension(e,t,r){(e.extensions||{})[t]=r}removeObjectExtension(e,t){const r=e.extensions||{},n=r[t];return delete r[t],n}addExtension(e,t={}){return Z(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return Z(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find((t=>t===e))||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find((t=>t===e))||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:r}=e;this.json.nodes=this.json.nodes||[];const n={mesh:t};return r&&(n.matrix=r),this.json.nodes.push(n),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:r,material:n,mode:s=4}=e,i={primitives:[{attributes:this._addAttributes(t),mode:s}]};if(r){const e=this._addIndices(r);i.primitives[0].indices=e}return Number.isFinite(n)&&(i.primitives[0].material=n),this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addPointCloud(e){const t={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(t),this.json.meshes.length-1}addImage(e,t){const r=(0,K.I)(e),n=t||(null==r?void 0:r.mimeType),s={bufferView:this.addBufferView(e),mimeType:n};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){const t=e.byteLength;Z(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const r={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=Y(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(r),this.json.bufferViews.length-1}addAccessor(e,t){const r={bufferView:e,type:re(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const r=this.addBufferView(e);let n={min:t.min,max:t.max};n.min&&n.max||(n=this._getAccessorMinMax(e,t.size));const s={size:t.size,componentType:ne(e),count:Math.round(e.length/t.size),min:n.min,max:n.max};return this.addAccessor(r,Object.assign(s,t))}addTexture(e){const{imageIndex:t}=e,r={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const r=this.byteLength,n=new ArrayBuffer(r),s=new Uint8Array(n);let i=0;for(const e of this.sourceBuffers||[])i=X(e,s,i);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=r:this.json.buffers=[{byteLength:r}],this.gltf.binary=n,this.sourceBuffers=[n]}_removeStringFromArray(e,t){let r=!0;for(;r;){const n=e.indexOf(t);n>-1?e.splice(n,1):r=!1}}_addAttributes(e={}){const t={};for(const r in e){const n=e[r],s=this._getGltfAttributeName(r),i=this.addBinaryBuffer(n.value,n);t[s]=i}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const r={min:null,max:null};if(e.length<t)return r;r.min=[],r.max=[];const n=e.subarray(0,t);for(const e of n)r.min.push(e),r.max.push(e);for(let n=t;n<e.length;n+=t)for(let s=0;s<t;s++)r.min[0+s]=Math.min(r.min[0+s],e[n+s]),r.max[0+s]=Math.max(r.max[0+s],e[n+s]);return r}}const ae="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",ce="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",ue=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),le=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),he={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},de={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};let fe;async function Ae(){return fe||(fe=async function(){let e=ae;WebAssembly.validate(ue)&&(e=ce,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const t=await WebAssembly.instantiate(function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);t[r]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}let r=0;for(let n=0;n<e.length;++n)t[r++]=t[n]<60?le[t[n]]:64*(t[n]-60)+t[++n];return t.buffer.slice(0,r)}(e),{});return await t.instance.exports.__wasm_call_ctors(),t.instance}()),fe}function Be(e,t,r,n,s,i,o){const a=e.exports.sbrk,c=n+3&-4,u=a(c*s),l=a(i.length),h=new Uint8Array(e.exports.memory.buffer);h.set(i,l);const d=t(u,n,s,l,i.length);if(0===d&&o&&o(u,c,s),r.set(h.subarray(u,u+n*s)),a(u-a(0)),0!==d)throw new Error("Malformed buffer data: ".concat(d))}const pe="EXT_meshopt_compression",me=pe;async function ye(e,t){var r;const n=new oe(e);if(null==t||null===(r=t.gltf)||void 0===r||!r.decompressMeshes)return;const s=[];for(const t of e.json.bufferViews||[])s.push(ge(n,t));await Promise.all(s),n.removeExtension(pe)}async function ge(e,t){const r=e.getObjectExtension(t,pe);if(r){const{byteOffset:n=0,byteLength:s=0,byteStride:i,count:o,mode:a,filter:c="NONE",buffer:u}=r,l=e.gltf.buffers[u],h=new Uint8Array(l.arrayBuffer,l.byteOffset+n,s),d=new Uint8Array(e.gltf.buffers[t.buffer].arrayBuffer,t.byteOffset,t.byteLength);return await async function(e,t,r,n,s,i="NONE"){const o=await Ae();Be(o,o.exports[de[s]],e,t,r,n,o.exports[he[i||"NONE"]])}(d,o,i,h,a,c),d}return null}var Ce=r(4959);const be=["image/png","image/jpeg","image/gif"],Te={};function Ie(e){return void 0===Te[e]&&(Te[e]=function(e){switch(e){case"image/webp":return function(){if(!Ce.jU)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return Ce.jU;default:if(!Ce.jU){const{_parseImageNode:t}=globalThis;return Boolean(t)&&be.includes(e)}return!0}}(e)),Te[e]}const Ee="EXT_texture_webp",Fe=Ee;function we(e,t){const r=new oe(e);if(!Ie("image/webp")){if(r.getRequiredExtensions().includes(Ee))throw new Error("gltf: Required extension ".concat(Ee," not supported by browser"));return}const{json:n}=r;for(const e of n.textures||[]){const t=r.getObjectExtension(e,Ee);t&&(e.source=t.source),r.removeObjectExtension(e,Ee)}r.removeExtension(Ee)}const _e="KHR_texture_basisu",ve=_e;function De(e,t){const r=new oe(e),{json:n}=r;for(const e of n.textures||[]){const t=r.getObjectExtension(e,_e);t&&(e.source=t.source),r.removeObjectExtension(e,_e)}r.removeExtension(_e)}var Me=r(3774);function Ge(e){const{buffer:t,size:r,count:n}=function(e){let t=e,r=1,n=0;e&&e.value&&(t=e.value,r=e.size||1);t&&(ArrayBuffer.isView(t)||(t=function(e,t,r=!1){if(!e)return null;if(Array.isArray(e))return new t(e);if(r&&!(e instanceof t))return new t(e);return e}(t,Float32Array)),n=t.length/r);return{buffer:t,size:r,count:n}}(e);return{value:t,size:r,byteOffset:0,count:n,type:re(r),componentType:ne(t)}}const Ue="KHR_draco_mesh_compression",Re=Ue;function Oe(e,t,r){const n=new oe(e);for(const e of xe(n))n.getObjectExtension(e,Ue)}async function Se(e,t,r){var n;if(null==t||null===(n=t.gltf)||void 0===n||!n.decompressMeshes)return;const s=new oe(e),i=[];for(const e of xe(s))s.getObjectExtension(e,Ue)&&i.push(Pe(s,e,t,r));await Promise.all(i),s.removeExtension(Ue)}function Je(e,t={}){const r=new oe(e);for(const e of r.json.meshes||[])He(e,t),r.addRequiredExtension(Ue)}async function Pe(e,t,r,n){const s=e.getObjectExtension(t,Ue);if(!s)return;const i=e.getTypedArrayForBufferView(s.bufferView),o=(0,N.qv)(i.buffer,i.byteOffset),{parse:a}=n,c={...r};delete c["3d-tiles"];const u=await a(o,Me.VJ,c,n),l=function(e){const t={};for(const r in e){const n=e[r];if("indices"!==r){const e=Ge(n);t[r]=e}}return t}(u.attributes);for(const[r,n]of Object.entries(l))if(r in t.attributes){const s=t.attributes[r],i=e.getAccessor(s);null!=i&&i.min&&null!=i&&i.max&&(n.min=i.min,n.max=i.max)}t.attributes=l,u.indices&&(t.indices=Ge(u.indices)),function(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(t)}function He(e,t,r=4,n,s){var i;if(!n.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=n.DracoWriter.encodeSync({attributes:e}),a=null==s||null===(i=s.parseSync)||void 0===i?void 0:i.call(s,{attributes:e}),c=n._addFauxAttributes(a.attributes),u=n.addBufferView(o);return{primitives:[{attributes:c,mode:r,extensions:{[Ue]:{bufferView:u,attributes:c}}}]}}function*xe(e){for(const t of e.json.meshes||[])for(const e of t.primitives)yield e}const Le="KHR_lights_punctual",Ne=Le;async function Ze(e){const t=new oe(e),{json:r}=t,n=t.getExtension(Le);n&&(t.json.lights=n.lights,t.removeExtension(Le));for(const e of r.nodes||[]){const r=t.getObjectExtension(e,Le);r&&(e.light=r.light),t.removeObjectExtension(e,Le)}}async function je(e){const t=new oe(e),{json:r}=t;if(r.lights){const e=t.addExtension(Le);Z(!e.lights),e.lights=r.lights,delete r.lights}if(t.json.lights){for(const e of t.json.lights){const r=e.node;t.addObjectExtension(r,Le,e)}delete t.json.lights}}const Ve="KHR_materials_unlit",Qe=Ve;async function Ke(e){const t=new oe(e),{json:r}=t;t.removeExtension(Ve);for(const e of r.materials||[]){e.extensions&&e.extensions.KHR_materials_unlit&&(e.unlit=!0),t.removeObjectExtension(e,Ve)}}function ke(e){const t=new oe(e),{json:r}=t;if(t.materials)for(const e of r.materials||[])e.unlit&&(delete e.unlit,t.addObjectExtension(e,Ve,{}),t.addExtension(Ve))}const Ye="KHR_techniques_webgl",Xe=Ye;async function qe(e){const t=new oe(e),{json:r}=t,n=t.getExtension(Ye);if(n){const e=function(e,t){const{programs:r=[],shaders:n=[],techniques:s=[]}=e,i=new TextDecoder;return n.forEach((e=>{if(!Number.isFinite(e.bufferView))throw new Error("KHR_techniques_webgl: no shader code");e.code=i.decode(t.getTypedArrayForBufferView(e.bufferView))})),r.forEach((e=>{e.fragmentShader=n[e.fragmentShader],e.vertexShader=n[e.vertexShader]})),s.forEach((e=>{e.program=r[e.program]})),s}(n,t);for(const n of r.materials||[]){const r=t.getObjectExtension(n,Ye);r&&(n.technique=Object.assign({},r,e[r.technique]),n.technique.values=ze(n.technique,t)),t.removeObjectExtension(n,Ye)}t.removeExtension(Ye)}}async function We(e,t){}function ze(e,t){const r=Object.assign({},e.values);return Object.keys(e.uniforms||{}).forEach((t=>{e.uniforms[t].value&&!(t in r)&&(r[t]=e.uniforms[t].value)})),Object.keys(r).forEach((e=>{"object"==typeof r[e]&&void 0!==r[e].index&&(r[e].texture=t.getTexture(r[e].index))})),r}const $e=[n,s,i,o,a,c,u];function et(e,t){var r;const n=(null==t||null===(r=t.gltf)||void 0===r?void 0:r.excludeExtensions)||{};return!(e in n&&!n[e])}const tt="KHR_binary_glTF";const rt={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},nt={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class st{constructor(){(0,Q.Z)(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),(0,Q.Z)(this,"json",void 0)}normalize(e,t){this.json=e.json;const r=e.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(r.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),function(e){const t=new oe(e),{json:r}=t;for(const e of r.images||[]){const r=t.getObjectExtension(e,tt);r&&Object.assign(e,r),t.removeObjectExtension(e,tt)}r.buffers&&r.buffers[0]&&delete r.buffers[0].uri,t.removeExtension(tt)}(e),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in rt)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const r=e[t];if(r&&!Array.isArray(r)){e[t]=[];for(const n in r){const s=r[n];s.id=s.id||n;const i=e[t].length;e[t].push(s),this.idToIndexMap[t][n]=i}}}_convertObjectIdsToArrayIndices(e){for(const t in rt)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:e,indices:r,material:n}=t;for(const t in e)e[t]=this._convertIdToIndex(e[t],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),n&&(t.material=this._convertIdToIndex(n,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map((e=>this._convertIdToIndex(e,"node")))),e.meshes&&(e.meshes=e.meshes.map((e=>this._convertIdToIndex(e,"mesh"))))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map((e=>this._convertIdToIndex(e,"node"))))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const r of e[t])for(const e in r){const t=r[e],n=this._convertIdToIndex(t,e);r[e]=n}}_convertIdToIndex(e,t){const r=nt[t];if(r in this.idToIndexMap){const n=this.idToIndexMap[r][e];if(!Number.isFinite(n))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return n}return e}_updateObjects(e){for(const e of this.json.buffers)delete e.type}_updateMaterial(e){for(const n of e.materials){var t,r;n.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const s=(null===(t=n.values)||void 0===t?void 0:t.tex)||(null===(r=n.values)||void 0===r?void 0:r.texture2d_0),i=e.textures.findIndex((e=>e.id===s));-1!==i&&(n.pbrMetallicRoughness.baseColorTexture={index:i})}}}const it={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ot={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},at=10240,ct=10241,ut=10242,lt=10243,ht=10497,dt={magFilter:at,minFilter:ct,wrapS:ut,wrapT:lt},ft={[at]:9729,[ct]:9986,[ut]:ht,[lt]:ht};class At{constructor(){(0,Q.Z)(this,"baseUri",""),(0,Q.Z)(this,"json",{}),(0,Q.Z)(this,"buffers",[]),(0,Q.Z)(this,"images",[])}postProcess(e,t={}){const{json:r,buffers:n=[],images:s=[],baseUri:i=""}=e;return Z(r),this.baseUri=i,this.json=r,this.buffers=n,this.images=s,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map(((e,t)=>this._resolveBufferView(e,t)))),e.images&&(e.images=e.images.map(((e,t)=>this._resolveImage(e,t)))),e.samplers&&(e.samplers=e.samplers.map(((e,t)=>this._resolveSampler(e,t)))),e.textures&&(e.textures=e.textures.map(((e,t)=>this._resolveTexture(e,t)))),e.accessors&&(e.accessors=e.accessors.map(((e,t)=>this._resolveAccessor(e,t)))),e.materials&&(e.materials=e.materials.map(((e,t)=>this._resolveMaterial(e,t)))),e.meshes&&(e.meshes=e.meshes.map(((e,t)=>this._resolveMesh(e,t)))),e.nodes&&(e.nodes=e.nodes.map(((e,t)=>this._resolveNode(e,t)))),e.skins&&(e.skins=e.skins.map(((e,t)=>this._resolveSkin(e,t)))),e.scenes&&(e.scenes=e.scenes.map(((e,t)=>this._resolveScene(e,t)))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const r=this.json[e]&&this.json[e][t];return r||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),r}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map((e=>this.getNode(e))),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map((e=>this.getNode(e)))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce(((e,t)=>{const r=this.getMesh(t);return e.id=r.id,e.primitives=e.primitives.concat(r.primitives),e}),{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map((e=>{const t=(e={...e}).attributes;e.attributes={};for(const r in t)e.attributes[r]=this.getAccessor(t[r]);return void 0!==e.indices&&(e.indices=this.getAccessor(e.indices)),void 0!==e.material&&(e.material=this.getMaterial(e.material)),e}))),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const t=e.pbrMetallicRoughness;t.baseColorTexture&&(t.baseColorTexture={...t.baseColorTexture},t.baseColorTexture.texture=this.getTexture(t.baseColorTexture.index)),t.metallicRoughnessTexture&&(t.metallicRoughnessTexture={...t.metallicRoughnessTexture},t.metallicRoughnessTexture.texture=this.getTexture(t.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){var r,n;if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=(r=e.componentType,ot[r]),e.components=(n=e.type,it[n]),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const t=e.bufferView.buffer,{ArrayType:r,byteLength:n}=se(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+t.byteOffset;let i=t.arrayBuffer.slice(s,s+n);e.bufferView.byteStride&&(i=this._getValueFromInterleavedBuffer(t,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(i)}return e}_getValueFromInterleavedBuffer(e,t,r,n,s){const i=new Uint8Array(s*n);for(let o=0;o<s;o++){const s=t+o*r;i.set(new Uint8Array(e.arrayBuffer.slice(s,s+n)),o*n)}return i.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):ft,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const t in e){const r=this._enumSamplerParameter(t);void 0!==r&&(e.parameters[r]=e[t])}return e}_enumSamplerParameter(e){return dt[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const r=this.images[t];return r&&(e.image=r),e}_resolveBufferView(e,t){const r=e.buffer,n={id:"bufferView-".concat(t),...e,buffer:this.buffers[r]},s=this.buffers[r].arrayBuffer;let i=this.buffers[r].byteOffset||0;return"byteOffset"in e&&(i+=e.byteOffset),n.data=new Uint8Array(s,i,e.byteLength),n}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e.perspective,e.orthographic,e}}const Bt=1735152710,pt=1313821514,mt=5130562,yt=!0;function gt(e,t,r=0,n={}){const s=new DataView(t),i=function(e,t=0){return"".concat(String.fromCharCode(e.getUint8(t+0))).concat(String.fromCharCode(e.getUint8(t+1))).concat(String.fromCharCode(e.getUint8(t+2))).concat(String.fromCharCode(e.getUint8(t+3)))}(s,r+0),o=s.getUint32(r+4,yt),a=s.getUint32(r+8,yt);switch(Object.assign(e,{header:{byteOffset:r,byteLength:a,hasBinChunk:!1},type:i,version:o,json:{},binChunks:[]}),r+=12,e.version){case 1:return function(e,t,r){(0,k.h)(e.header.byteLength>20);const n=t.getUint32(r+0,yt),s=t.getUint32(r+4,yt);return r+=8,(0,k.h)(0===s),Ct(e,t,r,n),r+=n,r+=bt(e,t,r,e.header.byteLength)}(e,s,r);case 2:return function(e,t,r,n){return(0,k.h)(e.header.byteLength>20),function(e,t,r,n){for(;r+8<=e.header.byteLength;){const s=t.getUint32(r+0,yt),i=t.getUint32(r+4,yt);switch(r+=8,i){case pt:Ct(e,t,r,s);break;case mt:bt(e,t,r,s);break;case 0:n.strict||Ct(e,t,r,s);break;case 1:n.strict||bt(e,t,r,s)}r+=Y(s,4)}}(e,t,r,n),r+e.header.byteLength}(e,s,r,{});default:throw new Error("Invalid GLB version ".concat(e.version,". Only supports v1 and v2."))}}function Ct(e,t,r,n){const s=new Uint8Array(t.buffer,r,n),i=new TextDecoder("utf8").decode(s);return e.json=JSON.parse(i),Y(n,4)}function bt(e,t,r,n){return e.header.hasBinChunk=!0,e.binChunks.push({byteOffset:r,byteLength:n,arrayBuffer:t.buffer}),Y(n,4)}async function Tt(e,t,r=0,n,s){var i,o,a,c;!function(e,t,r,n){n.uri&&(e.baseUri=n.uri);if(t instanceof ArrayBuffer&&!function(e,t=0,r={}){const n=new DataView(e),{magic:s=Bt}=r,i=n.getUint32(t,!1);return i===s||i===Bt}(t,r,n)){t=(new TextDecoder).decode(t)}if("string"==typeof t)e.json=L(t);else if(t instanceof ArrayBuffer){const s={};r=gt(s,t,r,n.glb),Z("glTF"===s.type,"Invalid GLB magic string ".concat(s.type)),e._glb=s,e.json=s.json}else Z(!1,"GLTF: must be ArrayBuffer or string");const s=e.json.buffers||[];if(e.buffers=new Array(s.length).fill(null),e._glb&&e._glb.header.hasBinChunk){const{binChunks:t}=e._glb;e.buffers[0]={arrayBuffer:t[0].arrayBuffer,byteOffset:t[0].byteOffset,byteLength:t[0].byteLength}}const i=e.json.images||[];e.images=new Array(i.length).fill({})}(e,t,r,n),function(e,t={}){(new st).normalize(e,t)}(e,{normalize:null==n||null===(i=n.gltf)||void 0===i?void 0:i.normalize}),function(e,t={},r){const n=$e.filter((e=>et(e.name,t)));for(const i of n){var s;null===(s=i.preprocess)||void 0===s||s.call(i,e,t,r)}}(e,n,s);const u=[];if(null!=n&&null!==(o=n.gltf)&&void 0!==o&&o.loadBuffers&&e.json.buffers&&await async function(e,t,r){const n=e.json.buffers||[];for(let o=0;o<n.length;++o){const a=n[o];if(a.uri){var s,i;const{fetch:n}=r;Z(n);const c=j(a.uri,t),u=await(null==r||null===(s=r.fetch)||void 0===s?void 0:s.call(r,c)),l=await(null==u||null===(i=u.arrayBuffer)||void 0===i?void 0:i.call(u));e.buffers[o]={arrayBuffer:l,byteOffset:0,byteLength:l.byteLength},delete a.uri}else null===e.buffers[o]&&(e.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}(e,n,s),null!=n&&null!==(a=n.gltf)&&void 0!==a&&a.loadImages){const t=async function(e,t,r){const n=function(e){const t=new Set,r=e.json.textures||[];for(const e of r)void 0!==e.source&&t.add(e.source);return Array.from(t).sort()}(e),s=e.json.images||[],i=[];for(const o of n)i.push(It(e,s[o],o,t,r));return await Promise.all(i)}(e,n,s);u.push(t)}const l=async function(e,t={},r){const n=$e.filter((e=>et(e.name,t)));for(const i of n){var s;await(null===(s=i.decode)||void 0===s?void 0:s.call(i,e,t,r))}}(e,n,s);return u.push(l),await Promise.all(u),null!=n&&null!==(c=n.gltf)&&void 0!==c&&c.postProcess?function(e,t){return(new At).postProcess(e,t)}(e,n):e}async function It(e,t,r,n,s){const{fetch:i,parse:o}=s;let a;if(t.uri){const e=j(t.uri,n),r=await i(e);a=await r.arrayBuffer()}if(Number.isFinite(t.bufferView)){const r=V(e.json,e.buffers,t.bufferView);a=(0,N.qv)(r.buffer,r.byteOffset,r.byteLength)}Z(a,"glTF image has no data");let c=await o(a,[H.S,P],{mimeType:t.mimeType,basis:n.basis||{format:S()}},s);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),e.images=e.images||[],e.images[r]=c}const Et={name:"glTF",id:"gltf",module:"gltf",version:"3.2.4",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:async function(e,t={},r){(t={...Et.options,...t}).gltf={...Et.options.gltf,...t.gltf};const{byteOffset:n=0}=t;return await Tt({},e,n,t,r)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}}},6487:(e,t,r)=>{r.d(t,{S:()=>T});var n=r(6269),s=r(4959);const{_parseImageNode:i}=globalThis,o="undefined"!=typeof Image,a="undefined"!=typeof ImageBitmap,c=Boolean(i),u=!!s.jU||c;function l(e){const t=d(e);if(!t)throw new Error("Not an image");return t}function h(e){switch(l(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function d(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"==typeof e&&e.data&&e.width&&e.height?"data":null}const f=/^data:image\/svg\+xml/,A=/\.svg((\?|#).*)?$/;function B(e){return e&&(f.test(e)||A.test(e))}function p(e,t){if(B(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function m(e,t,r){const n=function(e,t){if(B(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(e){throw new Error(e.message)}return"data:image/svg+xml;base64,".concat(btoa(t))}return p(e,t)}(e,r),s=self.URL||self.webkitURL,i="string"!=typeof n&&s.createObjectURL(n);try{return await async function(e,t){const r=new Image;if(r.src=e,t.image&&t.image.decode&&r.decode)return await r.decode(),r;return await new Promise(((t,n)=>{try{r.onload=()=>t(r),r.onerror=t=>n(new Error("Could not load image ".concat(e,": ").concat(t)))}catch(e){n(e)}}))}(i||n,t)}finally{i&&s.revokeObjectURL(i)}}const y={};let g=!0;async function C(e,t,r){let n;if(B(r)){n=await m(e,t,r)}else n=p(e,r);const s=t&&t.imagebitmap;return await async function(e,t=null){!function(e){for(const t in e||y)return!1;return!0}(t)&&g||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(e){console.warn(e),g=!1}return await createImageBitmap(e)}(n,s)}var b=r(9105);const T={id:"image",module:"images",name:"Images",version:"3.2.4",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:async function(e,t,r){const s=((t=t||{}).image||{}).type||"auto",{url:i}=r||{};let c;switch(function(e){switch(e){case"auto":case"data":return function(){if(a)return"imagebitmap";if(o)return"image";if(u)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return a||o||u;case"imagebitmap":return a;case"image":return o;case"data":return u;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}(e),e}}(s)){case"imagebitmap":c=await C(e,t,i);break;case"image":c=await m(e,t,i);break;case"data":c=await async function(e,t){const{mimeType:r}=(0,b.I)(e)||{},s=globalThis._parseImageNode;return(0,n.h)(s),await s(e,r)}(e);break;default:(0,n.h)(!1)}return"data"===s&&(c=h(c)),c},tests:[e=>Boolean((0,b.I)(new DataView(e)))],options:{image:{type:"auto",decode:!0}}}},9105:(e,t,r)=>{r.d(t,{I:()=>i});const n=!1,s=!0;function i(e){const t=o(e);return function(e){const t=o(e);if(!(t.byteLength>=24&&2303741511===t.getUint32(0,n)))return null;return{mimeType:"image/png",width:t.getUint32(16,n),height:t.getUint32(20,n)}}(t)||function(e){const t=o(e);if(!(t.byteLength>=3&&65496===t.getUint16(0,n)&&255===t.getUint8(2)))return null;const{tableMarkers:r,sofMarkers:s}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)e.add(t);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let i=2;for(;i+9<t.byteLength;){const e=t.getUint16(i,n);if(s.has(e))return{mimeType:"image/jpeg",height:t.getUint16(i+5,n),width:t.getUint16(i+7,n)};if(!r.has(e))return null;i+=2,i+=t.getUint16(i,n)}return null}(t)||function(e){const t=o(e);if(!(t.byteLength>=10&&1195984440===t.getUint32(0,n)))return null;return{mimeType:"image/gif",width:t.getUint16(6,s),height:t.getUint16(8,s)}}(t)||function(e){const t=o(e);if(!(t.byteLength>=14&&16973===t.getUint16(0,n)&&t.getUint32(2,s)===t.byteLength))return null;return{mimeType:"image/bmp",width:t.getUint32(18,s),height:t.getUint32(22,s)}}(t)}function o(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}},5680:(e,t,r)=>{r.d(t,{Xq:()=>i,JY:()=>o,qv:()=>a,rJ:()=>s});r(479);function n(e){return e&&"object"==typeof e&&e.isBuffer}function s(e){if(n(e))return function(e){if(n(e))return new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer;return e}(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function i(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),s=new Uint8Array(t);for(let e=0;e<n.length;++e)if(n[e]!==s[e])return!1;return!0}function o(...e){const t=e.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),r=t.reduce(((e,t)=>e+t.byteLength),0),n=new Uint8Array(r);let s=0;for(const e of t)n.set(e,s),s+=e.byteLength;return n.buffer}function a(e,t,r){const n=void 0!==r?new Uint8Array(e).subarray(t,t+r):new Uint8Array(e).subarray(t);return new Uint8Array(n).buffer}},6269:(e,t,r)=>{function n(e,t){if(!e)throw new Error(t||"loader assertion failed.")}r.d(t,{h:()=>n})},4959:(e,t,r)=>{r.d(t,{jU:()=>n});"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==r.g&&r.g,"undefined"!=typeof document&&document;const n=Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),s="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);s&&parseFloat(s[1])},962:(e,t,r)=>{function n(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}function s(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(0,t):""}r.d(t,{XX:()=>s,vB:()=>n})},8634:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(4942),s=r(8295);const i={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class o{constructor(e={}){(0,n.Z)(this,"props",void 0),(0,n.Z)(this,"stats",void 0),(0,n.Z)(this,"activeRequestCount",0),(0,n.Z)(this,"requestQueue",[]),(0,n.Z)(this,"requestMap",new Map),(0,n.Z)(this,"deferredUpdate",null),this.props={...i,...e},this.stats=new s.Z({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}scheduleRequest(e,t=(()=>0)){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const r={handle:e,priority:0,getPriority:t},n=new Promise((e=>(r.resolve=e,r)));return this.requestQueue.push(r),this.requestMap.set(e,n),this._issueNewRequests(),n}_issueRequest(e){const{handle:t,resolve:r}=e;let n=!1;const s=()=>{n||(n=!0,this.requestMap.delete(t),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,r?r({done:s}):Promise.resolve({done:s})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout((()=>this._issueNewRequestsAsync()),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(let t=0;t<e;++t){const e=this.requestQueue.shift();e&&this._issueRequest(e)}}}_updateAllRequests(){const e=this.requestQueue;for(let t=0;t<e.length;++t){const r=e[t];this._updateRequest(r)||(e.splice(t,1),this.requestMap.delete(r.handle),t--)}e.sort(((e,t)=>e.priority-t.priority))}_updateRequest(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}},1567:(e,t,r)=>{r.d(t,{D:()=>Q});var n=r(5215);function s(e,t,r){const n=i(e),s=Object.keys(n).filter((e=>n[e]!==Array));return function(e,t,r){const{pointPositionsCount:n,pointFeaturesCount:s,linePositionsCount:i,linePathsCount:u,lineFeaturesCount:h,polygonPositionsCount:f,polygonObjectsCount:A,polygonRingsCount:B,polygonFeaturesCount:p,propArrayTypes:m,coordLength:y}=t,{numericPropKeys:g=[],PositionDataType:C=Float32Array}=r,b=e[0]&&"id"in e[0],T=e.length>65535?Uint32Array:Uint16Array,I={type:"Point",positions:new C(n*y),globalFeatureIds:new T(n),featureIds:s>65535?new Uint32Array(n):new Uint16Array(n),numericProps:{},properties:[],fields:[]},E={type:"LineString",pathIndices:i>65535?new Uint32Array(u+1):new Uint16Array(u+1),positions:new C(i*y),globalFeatureIds:new T(i),featureIds:h>65535?new Uint32Array(i):new Uint16Array(i),numericProps:{},properties:[],fields:[]},F={type:"Polygon",polygonIndices:f>65535?new Uint32Array(A+1):new Uint16Array(A+1),primitivePolygonIndices:f>65535?new Uint32Array(B+1):new Uint16Array(B+1),positions:new C(f*y),triangles:[],globalFeatureIds:new T(f),featureIds:p>65535?new Uint32Array(f):new Uint16Array(f),numericProps:{},properties:[],fields:[]};for(const e of[I,E,F])for(const t of g){const r=m[t];e.numericProps[t]=new r(e.positions.length/y)}E.pathIndices[u]=i,F.polygonIndices[A]=f,F.primitivePolygonIndices[B]=f;const w={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0};for(const t of e){const e=t.geometry,r=t.properties||{};switch(e.type){case"Point":o(e,I,w,y,r),I.properties.push(d(r,g)),b&&I.fields.push({id:t.id}),w.pointFeature++;break;case"LineString":a(e,E,w,y,r),E.properties.push(d(r,g)),b&&E.fields.push({id:t.id}),w.lineFeature++;break;case"Polygon":c(e,F,w,y,r),F.properties.push(d(r,g)),b&&F.fields.push({id:t.id}),w.polygonFeature++;break;default:throw new Error("Invalid geometry type")}w.feature++}return function(e,t,r,n){return{points:{...e,positions:{value:e.positions,size:n},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:l(e.numericProps,1)},lines:{...t,positions:{value:t.positions,size:n},pathIndices:{value:t.pathIndices,size:1},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:l(t.numericProps,1)},polygons:{...r,positions:{value:r.positions,size:n},polygonIndices:{value:r.polygonIndices,size:1},primitivePolygonIndices:{value:r.primitivePolygonIndices,size:1},triangles:{value:new Uint32Array(r.triangles),size:1},globalFeatureIds:{value:r.globalFeatureIds,size:1},featureIds:{value:r.featureIds,size:1},numericProps:l(r.numericProps,1)}}}(I,E,F,y)}(e,{propArrayTypes:n,...t},{numericPropKeys:r&&r.numericPropKeys||s,PositionDataType:r?r.PositionDataType:Float32Array})}function i(e){const t={};for(const r of e)if(r.properties)for(const e in r.properties){const n=r.properties[e];t[e]=f(n,t[e])}return t}function o(e,t,r,n,s){t.positions.set(e.data,r.pointPosition*n);const i=e.data.length/n;h(t,s,r.pointPosition,i),t.globalFeatureIds.fill(r.feature,r.pointPosition,r.pointPosition+i),t.featureIds.fill(r.pointFeature,r.pointPosition,r.pointPosition+i),r.pointPosition+=i}function a(e,t,r,n,s){t.positions.set(e.data,r.linePosition*n);const i=e.data.length/n;h(t,s,r.linePosition,i),t.globalFeatureIds.fill(r.feature,r.linePosition,r.linePosition+i),t.featureIds.fill(r.lineFeature,r.linePosition,r.linePosition+i);for(let s=0,i=e.indices.length;s<i;++s){const o=e.indices[s],a=s===i-1?e.data.length:e.indices[s+1];t.pathIndices[r.linePath++]=r.linePosition,r.linePosition+=(a-o)/n}}function c(e,t,r,n,s){t.positions.set(e.data,r.polygonPosition*n);const i=e.data.length/n;h(t,s,r.polygonPosition,i),t.globalFeatureIds.fill(r.feature,r.polygonPosition,r.polygonPosition+i),t.featureIds.fill(r.polygonFeature,r.polygonPosition,r.polygonPosition+i);for(let s=0,i=e.indices.length;s<i;++s){const i=r.polygonPosition;t.polygonIndices[r.polygonObject++]=i;const o=e.areas[s],a=e.indices[s],c=e.indices[s+1];for(let s=0,i=a.length;s<i;++s){const o=a[s],u=s===i-1?void 0===c?e.data.length:c[0]:a[s+1];t.primitivePolygonIndices[r.polygonRing++]=r.polygonPosition,r.polygonPosition+=(u-o)/n}u(t,o,a,{startPosition:i,endPosition:r.polygonPosition,coordLength:n})}}function u(e,t,r,{startPosition:s,endPosition:i,coordLength:o}){const a=s*o,c=i*o,u=e.positions.subarray(a,c),l=r[0],h=r.slice(1).map((e=>(e-l)/o)),d=(0,n.OT)(u,h,o,t);for(let t=0,r=d.length;t<r;++t)e.triangles.push(s+d[t])}function l(e,t){const r={};for(const n in e)r[n]={value:e[n],size:t};return r}function h(e,t,r,n){for(const s in e.numericProps)if(s in t){const i=t[s];e.numericProps[s].fill(i,r,r+n)}}function d(e,t){const r={};for(const n in e)t.includes(n)||(r[n]=e[n]);return r}function f(e,t){return t!==Array&&Number.isFinite(e)?t===Float64Array||Math.fround(e)!==e?Float64Array:Float32Array:Array}var A=r(3614),B=r.n(A),p=r(4942);function m(e){let t=0;for(let r,n,s=0,i=e.length-1;s<e.length;i=s++)r=e[s],n=e[i],t+=(n[0]-r[0])*(r[1]+n[1]);return t}function y(e,t,r){t&&r&&(1===e?t.id=r.readVarint():2===e?function(e,t){const r=e.readVarint()+e.pos;for(;e.pos<r;){const r=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[r]=n}}(r,t):3===e?t.type=r.readVarint():4===e&&(t._geometry=r.pos))}class g{static get types(){return["Unknown","Point","LineString","Polygon"]}constructor(e,t,r,n,s){(0,p.Z)(this,"properties",void 0),(0,p.Z)(this,"extent",void 0),(0,p.Z)(this,"type",void 0),(0,p.Z)(this,"id",void 0),(0,p.Z)(this,"_pbf",void 0),(0,p.Z)(this,"_geometry",void 0),(0,p.Z)(this,"_keys",void 0),(0,p.Z)(this,"_values",void 0),this.properties={},this.extent=r,this.type=0,this.id=null,this._pbf=e,this._geometry=-1,this._keys=n,this._values=s,e.readFields(y,this,t)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const t=e.readVarint()+e.pos;let r=1,n=0,s=0,i=0;const o=[];let a;for(;e.pos<t;){if(n<=0){const t=e.readVarint();r=7&t,n=t>>3}if(n--,1===r||2===r)s+=e.readSVarint(),i+=e.readSVarint(),1===r&&(a&&o.push(a),a=[]),a&&a.push([s,i]);else{if(7!==r)throw new Error("unknown command ".concat(r));a&&a.push(a[0].slice())}}return a&&o.push(a),o}bbox(){const e=this._pbf;e.pos=this._geometry;const t=e.readVarint()+e.pos;let r=1,n=0,s=0,i=0,o=1/0,a=-1/0,c=1/0,u=-1/0;for(;e.pos<t;){if(n<=0){const t=e.readVarint();r=7&t,n=t>>3}if(n--,1===r||2===r)s+=e.readSVarint(),i+=e.readSVarint(),s<o&&(o=s),s>a&&(a=s),i<c&&(c=i),i>u&&(u=i);else if(7!==r)throw new Error("unknown command ".concat(r))}return[o,c,a,u]}_toGeoJSON(e){let t,r,n=this.loadGeometry(),s=g.types[this.type];switch(this.type){case 1:const s=[];for(t=0;t<n.length;t++)s[t]=n[t][0];n=s,e(n,this);break;case 2:for(t=0;t<n.length;t++)e(n[t],this);break;case 3:for(n=function(e){const t=e.length;if(t<=1)return[e];const r=[];let n,s;for(let i=0;i<t;i++){const t=m(e[i]);0!==t&&(void 0===s&&(s=t<0),s===t<0?(n&&r.push(n),n=[e[i]]):n&&n.push(e[i]))}return n&&r.push(n),r}(n),t=0;t<n.length;t++)for(r=0;r<n[t].length;r++)e(n[t][r],this)}1===n.length?n=n[0]:s="Multi".concat(s);const i={type:"Feature",geometry:{type:s,coordinates:n},properties:this.properties};return null!==this.id&&(i.id=this.id),i}toGeoJSON(e){if("function"==typeof e)return this._toGeoJSON(e);const{x:t,y:r,z:n}=e,s=this.extent*Math.pow(2,n),i=this.extent*t,o=this.extent*r;return this._toGeoJSON((function(e){for(let t=0;t<e.length;t++){const r=e[t];r[0]=360*(r[0]+i)/s-180;const n=180-360*(r[1]+o)/s;r[1]=360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90}}))}}class C{constructor(e,t){(0,p.Z)(this,"version",void 0),(0,p.Z)(this,"name",void 0),(0,p.Z)(this,"extent",void 0),(0,p.Z)(this,"length",void 0),(0,p.Z)(this,"_pbf",void 0),(0,p.Z)(this,"_keys",void 0),(0,p.Z)(this,"_values",void 0),(0,p.Z)(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(b,this,t),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const t=this._pbf.readVarint()+this._pbf.pos;return new g(this._pbf,t,this.extent,this._keys,this._values)}}function b(e,t,r){t&&r&&(15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){let t=null;const r=e.readVarint()+e.pos;for(;e.pos<r;){const r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(r)))}class T{constructor(e,t){(0,p.Z)(this,"layers",void 0),this.layers=e.readFields(I,{},t)}}function I(e,t,r){if(3===e&&r){const e=new C(r,r.readVarint()+r.pos);e.length&&t&&(t[e.name]=e)}}function E(e){const t=e.indices.length,r="Polygon";if(t<=1)return{type:r,data:e.data,areas:[[(0,n.ap)(e.data)]],indices:[e.indices]};const s=[],i=[];let o,a=[],c=[],u=0;for(let r,l,h=0;h<t;h++){l=e.indices[h]-u,r=e.indices[h+1]-u||e.data.length;const t=e.data.slice(l,r),d=(0,n.ap)(t);if(0!==d)void 0===o&&(o=d<0),o===d<0?(c.length&&(s.push(a),i.push(c)),c=[l],a=[d]):(a.push(d),c.push(l));else{const t=e.data.slice(0,l),n=e.data.slice(r);e.data=t.concat(n),u+=r-l}}return a&&s.push(a),c.length&&i.push(c),{type:r,areas:s,indices:i,data:e.data}}function F(e,t,r){t&&r&&(1===e?t.id=r.readVarint():2===e?function(e,t){const r=e.readVarint()+e.pos;for(;e.pos<r;){const r=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[r]=n}}(r,t):3===e?t.type=r.readVarint():4===e&&(t._geometry=r.pos))}let w,_,v,D,M,G,U;class R{constructor(e,t,r,n,s,i){(0,p.Z)(this,"properties",void 0),(0,p.Z)(this,"extent",void 0),(0,p.Z)(this,"type",void 0),(0,p.Z)(this,"id",void 0),(0,p.Z)(this,"_pbf",void 0),(0,p.Z)(this,"_geometry",void 0),(0,p.Z)(this,"_keys",void 0),(0,p.Z)(this,"_values",void 0),(0,p.Z)(this,"_geometryInfo",void 0),this.properties={},this.extent=r,this.type=0,this.id=null,this._pbf=e,this._geometry=-1,this._keys=n,this._values=s,this._geometryInfo=i,e.readFields(F,this,t)}loadGeometry(){const e=this._pbf;e.pos=this._geometry,w=e.readVarint()+e.pos,_=1,D=0,M=0,G=0,U=0;const t=[],r=[];for(;e.pos<w;)if(D<=0&&(v=e.readVarint(),_=7&v,D=v>>3),D--,1===_||2===_)M+=e.readSVarint(),G+=e.readSVarint(),1===_&&t.push(U),r.push(M,G),U+=2;else{if(7!==_)throw new Error("unknown command ".concat(_));if(U>0){const e=t[t.length-1];r.push(r[e],r[e+1]),U+=2}}return{data:r,indices:t}}_toBinaryCoordinates(e){const t=this.loadGeometry();let r;e(t.data,this);switch(this.type){case 1:this._geometryInfo.pointFeaturesCount++,this._geometryInfo.pointPositionsCount+=t.indices.length,r={type:"Point",...t};break;case 2:this._geometryInfo.lineFeaturesCount++,this._geometryInfo.linePathsCount+=t.indices.length,this._geometryInfo.linePositionsCount+=t.data.length/2,r={type:"LineString",...t};break;case 3:r=E(t),this._geometryInfo.polygonFeaturesCount++,this._geometryInfo.polygonObjectsCount+=r.indices.length;for(const e of r.indices)this._geometryInfo.polygonRingsCount+=e.length;this._geometryInfo.polygonPositionsCount+=r.data.length/2;break;default:throw new Error("Invalid geometry type: ".concat(this.type))}const n={type:"Feature",geometry:r,properties:this.properties};return null!==this.id&&(n.id=this.id),n}toBinaryCoordinates(e){if("function"==typeof e)return this._toBinaryCoordinates(e);const{x:t,y:r,z:n}=e,s=this.extent*Math.pow(2,n),i=this.extent*t,o=this.extent*r;return this._toBinaryCoordinates((e=>function(e,t,r,n){for(let s=0,i=e.length;s<i;s+=2){e[s]=360*(e[s]+t)/n-180;const i=180-360*(e[s+1]+r)/n;e[s+1]=360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90}}(e,i,o,s)))}}class O{constructor(e,t){(0,p.Z)(this,"version",void 0),(0,p.Z)(this,"name",void 0),(0,p.Z)(this,"extent",void 0),(0,p.Z)(this,"length",void 0),(0,p.Z)(this,"_pbf",void 0),(0,p.Z)(this,"_keys",void 0),(0,p.Z)(this,"_values",void 0),(0,p.Z)(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(S,this,t),this.length=this._features.length}feature(e,t){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const r=this._pbf.readVarint()+this._pbf.pos;return new R(this._pbf,r,this.extent,this._keys,this._values,t)}}function S(e,t,r){t&&r&&(15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){let t=null;const r=e.readVarint()+e.pos;for(;e.pos<r;){const r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(r)))}class J{constructor(e,t){(0,p.Z)(this,"layers",void 0),this.layers=e.readFields(P,{},t)}}function P(e,t,r){if(3===e&&r){const e=new O(r,r.readVarint()+r.pos);e.length&&t&&(t[e.name]=e)}}function H(e,t){var r,n;const s=function(e){var t;if(null==e||!e.mvt)throw new Error("mvt options required");const r="wgs84"===(null===(t=e.mvt)||void 0===t?void 0:t.coordinates),{tileIndex:n}=e.mvt,s=n&&Number.isFinite(n.x)&&Number.isFinite(n.y)&&Number.isFinite(n.z);if(r&&!s)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property");return e.mvt}(t),i=(null==t||null===(r=t.gis)||void 0===r?void 0:r.format)||(null==t||null===(n=t.mvt)||void 0===n?void 0:n.shape);switch(i){case"columnar-table":return{shape:"columnar-table",data:x(e,s)};case"geojson-row-table":return{shape:"geojson-row-table",data:L(e,s)};case"geojson":return L(e,s);case"binary-geometry":case"binary":return x(e,s);default:throw new Error(i)}}function x(e,t){const[r,n]=function(e,t){const r=[],n={coordLength:2,pointPositionsCount:0,pointFeaturesCount:0,linePositionsCount:0,linePathsCount:0,lineFeaturesCount:0,polygonPositionsCount:0,polygonObjectsCount:0,polygonRingsCount:0,polygonFeaturesCount:0};if(e.byteLength<=0)return[r,n];const s=new J(new(B())(e));return(t&&Array.isArray(t.layers)?t.layers:Object.keys(s.layers)).forEach((e=>{const i=s.layers[e];if(i)for(let s=0;s<i.length;s++){const o=Z(i.feature(s,n),t,e);r.push(o)}})),[r,n]}(e,t),i=s(r,n);return i.byteLength=e.byteLength,i}function L(e,t){if(e.byteLength<=0)return[];const r=[],n=new T(new(B())(e));return(Array.isArray(t.layers)?t.layers:Object.keys(n.layers)).forEach((e=>{const s=n.layers[e];if(s)for(let n=0;n<s.length;n++){const i=N(s.feature(n),t,e);r.push(i)}})),r}function N(e,t,r){const n=e.toGeoJSON("wgs84"===t.coordinates?t.tileIndex:j);return t.layerProperty&&(n.properties[t.layerProperty]=r),n}function Z(e,t,r){const n=e.toBinaryCoordinates("wgs84"===t.coordinates?t.tileIndex:V);return t.layerProperty&&n.properties&&(n.properties[t.layerProperty]=r),n}function j(e,t){const{extent:r}=t;for(let t=0;t<e.length;t++){const n=e[t];n[0]/=r,n[1]/=r}}function V(e,t){const{extent:r}=t;for(let t=0,n=e.length;t<n;++t)e[t]/=r}const Q={name:"Mapbox Vector Tile",id:"mvt",module:"mvt",version:"3.2.4",extensions:["mvt","pbf"],mimeTypes:["application/vnd.mapbox-vector-tile","application/x-protobuf"],worker:!0,category:"geometry",options:{mvt:{shape:"geojson",coordinates:"local",layerProperty:"layerName",layers:void 0,tileIndex:null}}}},5890:(e,t,r)=>{r.d(t,{x:()=>n});const n={name:"Terrain",id:"terrain",module:"terrain",version:"3.2.4",worker:!0,extensions:["png","pngraw","jpg","jpeg","gif","webp","bmp"],mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp"],options:{terrain:{tesselator:"auto",bounds:null,meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0},skirtHeight:null}}}},3983:(e,t,r)=>{r.d(t,{F$:()=>s,Qb:()=>n,R7:()=>i,ci:()=>a,fB:()=>c,i3:()=>o});const n={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},s={ADD:1,REPLACE:2},i={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},o={I3S:"I3S",TILES3D:"TILES3D"},a={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},c={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0}},107:(e,t,r)=>{r.d(t,{Z:()=>fe});var n=r(4942),s=r(5451),i=r(3855),o=r(596),a=r(8295),c=r(6269),u=r(962),l=r(8634);class h{constructor(e,t,r){(0,n.Z)(this,"item",void 0),(0,n.Z)(this,"previous",void 0),(0,n.Z)(this,"next",void 0),this.item=e,this.previous=t,this.next=r}}class d{constructor(){(0,n.Z)(this,"head",null),(0,n.Z)(this,"tail",null),(0,n.Z)(this,"_length",0)}get length(){return this._length}add(e){const t=new h(e,this.tail,null);return this.tail?(this.tail.next=t,this.tail=t):(this.head=t,this.tail=t),++this._length,t}remove(e){e&&(e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(e.previous.next=null,this.tail=e.previous):e.next?(e.next.previous=null,this.head=e.next):(this.head=null,this.tail=null),e.next=null,e.previous=null,--this._length)}splice(e,t){e!==t&&(this.remove(t),this._insert(e,t))}_insert(e,t){const r=e.next;e.next=t,this.tail===e?this.tail=t:r.previous=t,t.next=r,t.previous=e,++this._length}}function f(e){return null!=e}class A{constructor(){(0,n.Z)(this,"_list",void 0),(0,n.Z)(this,"_sentinel",void 0),(0,n.Z)(this,"_trimTiles",void 0),this._list=new d,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}reset(){this._list.splice(this._list.tail,this._sentinel)}touch(e){const t=e._cacheNode;f(t)&&this._list.splice(this._sentinel,t)}add(e,t,r){f(t._cacheNode)||(t._cacheNode=this._list.add(t),r&&r(e,t))}unloadTile(e,t,r){const n=t._cacheNode;f(n)&&(this._list.remove(n),t._cacheNode=void 0,r&&r(e,t))}unloadTiles(e,t){const r=this._trimTiles;this._trimTiles=!1;const n=this._list,s=1024*e.maximumMemoryUsage*1024,i=this._sentinel;let o=n.head;for(;o!==i&&(e.gpuMemoryUsageInBytes>s||r);){const r=o.item;o=o.next,this.unloadTile(e,r,t)}}trim(){this._trimTiles=!0}}var B=r(2872);const p=new i.Z,m=new i.Z,y=new B.Mh([new B.JO,new B.JO,new B.JO,new B.JO,new B.JO,new B.JO]);function g(e,t){const{cameraDirection:r,cameraUp:n,height:s}=e,{metersPerUnit:a}=e.distanceScales,c=e.unprojectPosition(e.center),u=o.H.WGS84.cartographicToCartesian(c,new i.Z),l=o.H.WGS84.eastNorthUpToFixedFrame(u),h=e.unprojectPosition(e.cameraPosition),d=o.H.WGS84.cartographicToCartesian(h,new i.Z),f=new i.Z(l.transformAsVector(new i.Z(r).scale(a))).normalize(),A=new i.Z(l.transformAsVector(new i.Z(n).scale(a))).normalize();!function(e,t){const r=e.getFrustumPlanes();let n=0;for(const s in r){const a=r[s],c=a.normal.dot(e.center);m.copy(a.normal).scale(a.distance-c).add(e.center);const u=e.unprojectPosition(m),l=o.H.WGS84.cartographicToCartesian(u,new i.Z);y.planes[n++].fromPointNormal(l,p.copy(t).subtract(l))}}(e,u);const B=e.constructor,{longitude:g,latitude:C,width:b,bearing:T,zoom:I}=e;return{camera:{position:d,direction:f,up:A},viewport:e,topDownViewport:new B({longitude:g,latitude:C,height:s,width:b,bearing:T,zoom:I,pitch:0}),height:s,cullingVolume:y,frameNumber:t,sseDenominator:1.15}}const C=6356752.314245179,b=new i.Z;function T(e,t){if(e instanceof B.F7){const{halfAxes:r}=e,n=function(e){e.getColumn(0,b);const t=e.getColumn(1),r=e.getColumn(2),n=b.add(t).add(r);return n.len()}(r);return Math.log2(C/(n+t[2]))}if(e instanceof B.KM){const{radius:r}=e;return Math.log2(C/(r+t[2]))}if(e.width&&e.height){const{width:t,height:r}=e;return(Math.log2(6378137/t)+Math.log2(6378137/r))/2}return 1}function I(e,t,r){const n=o.H.WGS84.cartographicToCartesian([e.xmax,e.ymax,e.zmax],new i.Z),s=Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2)+Math.pow(n[2]-r[2],2));return Math.log2(C/(s+t[2]))}var E=r(8162),F=r(3983),w=r(4034),_=r(3037),v=r(540);function D(e){return null!=e}const M=new i.Z,G=new i.Z,U=new i.Z;function R(e,t,r){if((0,c.h)(e,"3D Tile: boundingVolume must be defined"),e.box)return function(e,t,r){const n=new i.Z(e[0],e[1],e[2]);t.transform(n,n);let s=[];if(10===e.length){const t=e.slice(3,6),r=new _.Z;r.fromArray(e,6);const n=new i.Z([1,0,0]),o=new i.Z([0,1,0]),a=new i.Z([0,0,1]);n.transformByQuaternion(r),n.scale(t[0]),o.transformByQuaternion(r),o.scale(t[1]),a.transformByQuaternion(r),a.scale(t[2]),s=[...n.toArray(),...o.toArray(),...a.toArray()]}else s=[...e.slice(3,6),...e.slice(6,9),...e.slice(9,12)];const o=t.transformAsVector(s.slice(0,3)),a=t.transformAsVector(s.slice(3,6)),c=t.transformAsVector(s.slice(6,9)),u=new v.Z([o[0],o[1],o[2],a[0],a[1],a[2],c[0],c[1],c[2]]);if(D(r))return r.center=n,r.halfAxes=u,r;return new B.F7(n,u)}(e.box,t,r);if(e.region){const[t,r,n,a,c,u]=e.region,l=o.H.WGS84.cartographicToCartesian([(0,w.RW)(t),(0,w.RW)(a),c],G),h=o.H.WGS84.cartographicToCartesian([(0,w.RW)(n),(0,w.RW)(r),u],U),d=(new i.Z).addVectors(l,h).multiplyScalar(.5),f=(new i.Z).subVectors(l,h).len()/2;return O([d[0],d[1],d[2],f],new s.Z)}if(e.sphere)return O(e.sphere,t,r);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function O(e,t,r){const n=new i.Z(e[0],e[1],e[2]);t.transform(n,n);const s=t.getScale(M),o=Math.max(Math.max(s[0],s[1]),s[2]),a=e[3]*o;return D(r)?(r.center=n,r.radius=a,r):new B.KM(n,a)}new i.Z,new i.Z,new s.Z,new i.Z,new i.Z,new i.Z;function S(e,t){if(e.dynamicScreenSpaceError&&e.dynamicScreenSpaceErrorComputedDensity){const r=e.dynamicScreenSpaceErrorComputedDensity,n=e.dynamicScreenSpaceErrorFactor,s=function(e,t){const r=e*t;return 1-Math.exp(-r*r)}(t,r)*n;return s}return 0}const J=new i.Z,P=new i.Z,H=new i.Z,x=new i.Z,L=new i.Z,N=new s.Z,Z=new s.Z;function j(e,t){const{topDownViewport:r}=t,n=e.header.mbs[1],s=e.header.mbs[0],i=e.header.mbs[2],a=e.header.mbs[3],c=[...e.boundingVolume.center],u=r.unprojectPosition(r.cameraPosition);o.H.WGS84.cartographicToCartesian(u,J),P.copy(J).subtract(c).normalize(),o.H.WGS84.eastNorthUpToFixedFrame(c,N),Z.copy(N).invert(),H.copy(J).transform(Z);const l=Math.sqrt(H[0]*H[0]+H[1]*H[1]),h=l*l/H[2];x.copy([H[0],H[1],h]);const d=x.transform(N).subtract(c).normalize(),f=P.cross(d).normalize().scale(a).add(c),A=o.H.WGS84.cartesianToCartographic(f),B=r.project([s,n,i]),p=r.project(A);return L.copy(B).subtract(p).magnitude()}class V{constructor(e=0){(0,n.Z)(this,"_map",new Map),(0,n.Z)(this,"_array",void 0),(0,n.Z)(this,"_length",void 0),this._array=new Array(e),this._length=e}get length(){return this._length}set length(e){this._length=e,e>this._array.length&&(this._array.length=e)}get values(){return this._array}get(e){return(0,c.h)(e<this._array.length),this._array[e]}set(e,t){(0,c.h)(e>=0),e>=this.length&&(this.length=e+1),this._map.has(this._array[e])&&this._map.delete(this._array[e]),this._array[e]=t,this._map.set(t,e)}delete(e){const t=this._map.get(e);t>=0&&(this._array.splice(t,1),this._map.delete(e),this.length--)}peek(){return this._array[this._length-1]}push(e){if(!this._map.has(e)){const t=this.length++;this._array[t]=e,this._map.set(e,t)}}pop(){const e=this._array[--this.length];return this._map.delete(e),e}reserve(e){(0,c.h)(e>=0),e>this._array.length&&(this._array.length=e)}resize(e){(0,c.h)(e>=0),this.length=e}trim(e){null==e&&(e=this.length),this._array.length=e}reset(){this._array=[],this._map=new Map,this._length=0}find(e){return this._map.has(e)}}const Q={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:()=>{},viewportTraversersMap:{},basePath:""};class K{get traversalFinished(){return!0}constructor(e){(0,n.Z)(this,"options",void 0),(0,n.Z)(this,"root",void 0),(0,n.Z)(this,"requestedTiles",void 0),(0,n.Z)(this,"selectedTiles",void 0),(0,n.Z)(this,"emptyTiles",void 0),(0,n.Z)(this,"lastUpdate",(new Date).getTime()),(0,n.Z)(this,"updateDebounceTime",1e3),(0,n.Z)(this,"_traversalStack",void 0),(0,n.Z)(this,"_emptyTraversalStack",void 0),(0,n.Z)(this,"_frameNumber",void 0),this.options={...Q,...e},this._traversalStack=new V,this._emptyTraversalStack=new V,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}traverse(e,t,r){this.root=e,this.options={...this.options,...r},this.reset(),this.updateTile(e,t),this._frameNumber=t.frameNumber,this.executeTraversal(e,t)}reset(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}executeTraversal(e,t){const r=this._traversalStack;for(e._selectionDepth=1,r.push(e);r.length>0;){const e=r.pop();let n=!1;this.canTraverse(e,t)&&(this.updateChildTiles(e,t),n=this.updateAndPushChildren(e,t,r,e.hasRenderContent?e._selectionDepth+1:e._selectionDepth));const s=e.parent,i=Boolean(!s||s._shouldRefine),o=!n;e.hasRenderContent?e.refine===F.F$.ADD?(this.loadTile(e,t),this.selectTile(e,t)):e.refine===F.F$.REPLACE&&(this.loadTile(e,t),o&&this.selectTile(e,t)):(this.emptyTiles[e.id]=e,this.loadTile(e,t),o&&this.selectTile(e,t)),this.touchTile(e,t),e._shouldRefine=n&&i}const n=(new Date).getTime();(this.traversalFinished||n-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=n,this.options.onTraversalEnd(t))}updateChildTiles(e,t){const r=e.children;for(const e of r)this.updateTile(e,t);return!0}updateAndPushChildren(e,t,r,n){const{loadSiblings:s,skipLevelOfDetail:i}=this.options,o=e.children;o.sort(this.compareDistanceToCamera.bind(this));const a=e.refine===F.F$.REPLACE&&e.hasRenderContent&&!i;let c=!1,u=!0;for(const e of o)if(e._selectionDepth=n,e.isVisibleAndInRequestVolume?(r.find(e)&&r.delete(e),r.push(e),c=!0):(a||s)&&(this.loadTile(e,t),this.touchTile(e,t)),a){let r;if(r=!!e._inRequestVolume&&(e.hasRenderContent?e.contentAvailable:this.executeEmptyTraversal(e,t)),u=u&&r,!u)return!1}return c||(u=!1),u}updateTile(e,t){this.updateTileVisibility(e,t)}selectTile(e,t){this.shouldSelectTile(e)&&(e._selectedFrame=t.frameNumber,this.selectedTiles[e.id]=e)}loadTile(e,t){this.shouldLoadTile(e)&&(e._requestedFrame=t.frameNumber,e._priority=e._getPriority(),this.requestedTiles[e.id]=e)}touchTile(e,t){e.tileset._cache.touch(e),e._touchedFrame=t.frameNumber}canTraverse(e,t,r=!1,n=!1){return!!e.hasChildren&&(e.hasTilesetContent?!e.contentExpired:!(!n&&!e.isVisibleAndInRequestVolume)&&this.shouldRefine(e,t,r))}shouldLoadTile(e){return e.hasUnloadedContent||e.contentExpired}shouldSelectTile(e){return e.contentAvailable&&!this.options.skipLevelOfDetail}shouldRefine(e,t,r){let n=e._screenSpaceError;return r&&(n=e.getScreenSpaceError(t,!0)),n>this.options.maximumScreenSpaceError}updateTileVisibility(e,t){const r=[];if(this.options.viewportTraversersMap)for(const e in this.options.viewportTraversersMap){this.options.viewportTraversersMap[e]===t.viewport.id&&r.push(e)}else r.push(t.viewport.id);e.updateVisibility(t,r)}compareDistanceToCamera(e,t){return e._distanceToCamera-t._distanceToCamera}anyChildrenVisible(e,t){let r=!1;for(const n of e.children)n.updateVisibility(t),r=r||n.isVisibleAndInRequestVolume;return r}executeEmptyTraversal(e,t){let r=!0;const n=this._emptyTraversalStack;for(n.push(e);n.length>0&&r;){const e=n.pop();this.updateTile(e,t),e.isVisibleAndInRequestVolume||this.loadTile(e,t),this.touchTile(e,t);if(!e.hasRenderContent&&this.canTraverse(e,t,!1,!0)){const t=e.children;for(const e of t)n.find(e)&&n.delete(e),n.push(e)}else e.contentAvailable||(r=!1)}return r}}const k=new i.Z;class Y{constructor(e,t,r,i=""){(0,n.Z)(this,"tileset",void 0),(0,n.Z)(this,"header",void 0),(0,n.Z)(this,"id",void 0),(0,n.Z)(this,"url",void 0),(0,n.Z)(this,"parent",void 0),(0,n.Z)(this,"refine",void 0),(0,n.Z)(this,"type",void 0),(0,n.Z)(this,"contentUrl",void 0),(0,n.Z)(this,"lodMetricType",void 0),(0,n.Z)(this,"lodMetricValue",void 0),(0,n.Z)(this,"boundingVolume",void 0),(0,n.Z)(this,"content",void 0),(0,n.Z)(this,"contentState",void 0),(0,n.Z)(this,"gpuMemoryUsageInBytes",void 0),(0,n.Z)(this,"children",void 0),(0,n.Z)(this,"depth",void 0),(0,n.Z)(this,"viewportIds",void 0),(0,n.Z)(this,"transform",void 0),(0,n.Z)(this,"extensions",void 0),(0,n.Z)(this,"userData",void 0),(0,n.Z)(this,"computedTransform",void 0),(0,n.Z)(this,"hasEmptyContent",void 0),(0,n.Z)(this,"hasTilesetContent",void 0),(0,n.Z)(this,"traverser",void 0),(0,n.Z)(this,"_cacheNode",void 0),(0,n.Z)(this,"_frameNumber",void 0),(0,n.Z)(this,"_lodJudge",void 0),(0,n.Z)(this,"_expireDate",void 0),(0,n.Z)(this,"_expiredContent",void 0),(0,n.Z)(this,"_shouldRefine",void 0),(0,n.Z)(this,"_distanceToCamera",void 0),(0,n.Z)(this,"_centerZDepth",void 0),(0,n.Z)(this,"_screenSpaceError",void 0),(0,n.Z)(this,"_visibilityPlaneMask",void 0),(0,n.Z)(this,"_visible",void 0),(0,n.Z)(this,"_inRequestVolume",void 0),(0,n.Z)(this,"_stackLength",void 0),(0,n.Z)(this,"_selectionDepth",void 0),(0,n.Z)(this,"_touchedFrame",void 0),(0,n.Z)(this,"_visitedFrame",void 0),(0,n.Z)(this,"_selectedFrame",void 0),(0,n.Z)(this,"_requestedFrame",void 0),(0,n.Z)(this,"_priority",void 0),(0,n.Z)(this,"_contentBoundingVolume",void 0),(0,n.Z)(this,"_viewerRequestVolume",void 0),(0,n.Z)(this,"_initialTransform",void 0),this.header=t,this.tileset=e,this.id=i||t.id,this.url=t.url,this.parent=r,this.refine=this._getRefine(t.refine),this.type=t.type,this.contentUrl=t.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=F.Qb.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this.extensions=null,this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new K({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new s.Z,this.transform=new s.Z,this._initializeLodMetric(t),this._initializeTransforms(t),this._initializeBoundingVolumes(t),this._initializeContent(t),this._initializeRenderingState(t),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,Object.seal(this)}destroy(){this.header=null}isDestroyed(){return null===this.header}get selected(){return this._selectedFrame===this.tileset._frameNumber}get isVisible(){return this._visible}get isVisibleAndInRequestVolume(){return this._visible&&this._inRequestVolume}get hasRenderContent(){return!this.hasEmptyContent&&!this.hasTilesetContent}get hasChildren(){return this.children.length>0||this.header.children&&this.header.children.length>0}get contentReady(){return this.contentState===F.Qb.READY||this.hasEmptyContent}get contentAvailable(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}get hasUnloadedContent(){return this.hasRenderContent&&this.contentUnloaded}get contentUnloaded(){return this.contentState===F.Qb.UNLOADED}get contentExpired(){return this.contentState===F.Qb.EXPIRED}get contentFailed(){return this.contentState===F.Qb.FAILED}getScreenSpaceError(e,t){switch(this.tileset.type){case F.i3.I3S:return j(this,e);case F.i3.TILES3D:return function(e,t,r){const n=e.tileset,s=e.parent&&e.parent.lodMetricValue||e.lodMetricValue,i=r?s:e.lodMetricValue;if(0===i)return 0;const o=Math.max(e._distanceToCamera,1e-7),{height:a,sseDenominator:c}=t,{viewDistanceScale:u}=n.options;let l=i*a*(u||1)/(o*c);return l-=S(n,o),l}(this,e,t);default:throw new Error("Unsupported tileset type")}}unselect(){this._selectedFrame=0}_getPriority(){const e=this.tileset._traverser,{skipLevelOfDetail:t}=e.options,r=this.refine===F.F$.ADD||t;if(r&&!this.isVisible&&void 0!==this._visible)return-1;if(this.tileset._frameNumber-this._touchedFrame>=1)return-1;if(this.contentState===F.Qb.UNLOADED)return-1;const n=this.parent,s=n&&(!r||0===this._screenSpaceError||n.hasTilesetContent)?n._screenSpaceError:this._screenSpaceError,i=e.root?e.root._screenSpaceError:0;return Math.max(i-s,0)}async loadContent(){if(this.hasEmptyContent)return!1;if(this.content)return!0;this.contentExpired&&(this._expireDate=null),this.contentState=F.Qb.LOADING;const e=await this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));if(!e)return this.contentState=F.Qb.UNLOADED,!1;try{const t=this.tileset.getTileUrl(this.contentUrl),r=this.tileset.loader,n={...this.tileset.loadOptions,[r.id]:{...this.tileset.loadOptions[r.id],isTileset:"json"===this.type,...this._getLoaderSpecificOptions(r.id)}};return this.content=await(0,E.z)(t,r,n),this.tileset.options.contentLoader&&await this.tileset.options.contentLoader(this),this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=F.Qb.READY,this._onContentLoaded(),!0}catch(e){throw this.contentState=F.Qb.FAILED,e}finally{e.done()}}unloadContent(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=F.Qb.UNLOADED,!0}updateVisibility(e,t){if(this._frameNumber===e.frameNumber)return;const r=this.parent,n=r?r._visibilityPlaneMask:B.Mh.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){const e=r?r.computedTransform:this.tileset.modelMatrix;this._updateTransform(e)}this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,n),this._visible=this._visibilityPlaneMask!==B.Mh.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._frameNumber=e.frameNumber,this.viewportIds=t}visibility(e,t){const{cullingVolume:r}=e,{boundingVolume:n}=this;return r.computeVisibilityWithPlaneMask(n,t)}contentVisibility(){return!0}distanceToTile(e){const t=this.boundingVolume;return Math.sqrt(Math.max(t.distanceSquaredTo(e.camera.position),0))}cameraSpaceZDepth({camera:e}){const t=this.boundingVolume;return k.subVectors(t.center,e.position),e.direction.dot(k)}insideViewerRequestVolume(e){const t=this._viewerRequestVolume;return!t||t.distanceSquaredTo(e.camera.position)<=0}updateExpiration(){if(null!=this._expireDate&&this.contentReady&&!this.hasEmptyContent){const e=Date.now();Date.lessThan(this._expireDate,e)&&(this.contentState=F.Qb.EXPIRED,this._expiredContent=this.content)}}get extras(){return this.header.extras}_initializeLodMetric(e){"lodMetricType"in e?this.lodMetricType=e.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in e?this.lodMetricValue=e.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}_initializeTransforms(e){this.transform=e.transform?new s.Z(e.transform):new s.Z;const t=this.parent,r=this.tileset,n=t&&t.computedTransform?t.computedTransform.clone():r.modelMatrix.clone();this.computedTransform=new s.Z(n).multiplyRight(this.transform);const i=t&&t._initialTransform?t._initialTransform.clone():new s.Z;this._initialTransform=new s.Z(i).multiplyRight(this.transform)}_initializeBoundingVolumes(e){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(e)}_initializeContent(e){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=F.Qb.UNLOADED,this.hasTilesetContent=!1,e.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}_initializeRenderingState(e){this.depth=e.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=B.Mh.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}_getRefine(e){return e||this.parent&&this.parent.refine||F.F$.REPLACE}_isTileset(){return-1!==this.contentUrl.indexOf(".json")}_onContentLoaded(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)}_updateBoundingVolume(e){this.boundingVolume=R(e.boundingVolume,this.computedTransform,this.boundingVolume);const t=e.content;t&&(t.boundingVolume&&(this._contentBoundingVolume=R(t.boundingVolume,this.computedTransform,this._contentBoundingVolume)),e.viewerRequestVolume&&(this._viewerRequestVolume=R(e.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}_updateTransform(e=new s.Z){const t=e.clone().multiplyRight(this.transform);!t.equals(this.computedTransform)&&(this.computedTransform=t,this._updateBoundingVolume(this.header))}_getLoaderSpecificOptions(e){return"i3s"===e?{...this.tileset.options.i3s,tile:this.header,tileset:this.tileset.tileset,isTileHeader:!1}:{assetGltfUpAxis:(t=this.tileset.tileset).asset&&t.asset.gltfUpAxis||"Y"};var t}}class X extends K{compareDistanceToCamera(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}updateTileVisibility(e,t){if(super.updateTileVisibility(e,t),!e.isVisibleAndInRequestVolume)return;const r=e.children.length>0;if(e.hasTilesetContent&&r){const r=e.children[0];return this.updateTileVisibility(r,t),void(e._visible=r._visible)}if(this.meetsScreenSpaceErrorEarly(e,t))return void(e._visible=!1);const n=e.refine===F.F$.REPLACE,s=e._optimChildrenWithinParent===F.fB.USE_OPTIMIZATION;n&&s&&r&&!this.anyChildrenVisible(e,t)&&(e._visible=!1)}meetsScreenSpaceErrorEarly(e,t){const{parent:r}=e;return!(!r||r.hasTilesetContent||r.refine!==F.F$.ADD)&&!this.shouldRefine(e,t,!0)}}class q{constructor(){(0,n.Z)(this,"frameNumberMap",new Map)}register(e){const t=this.frameNumberMap.get(e)||0;this.frameNumberMap.set(e,t+1)}deregister(e){const t=this.frameNumberMap.get(e)||1;this.frameNumberMap.set(e,t-1)}isZero(e){return 0===(this.frameNumberMap.get(e)||0)}}const W="REQUESTED",z="COMPLETED",$="ERROR";class ee{constructor(){(0,n.Z)(this,"_statusMap",void 0),(0,n.Z)(this,"pendingTilesRegister",new q),this._statusMap={}}add(e,t,r,n){if(!this._statusMap[t]){const{frameNumber:s}=n;this._statusMap[t]={request:e,callback:r,key:t,frameState:n,status:W},this.pendingTilesRegister.register(s),e().then((e=>{this._statusMap[t].status=z;const{frameNumber:r}=this._statusMap[t].frameState;this.pendingTilesRegister.deregister(r),this._statusMap[t].callback(e,n)})).catch((e=>{this._statusMap[t].status=$;const{frameNumber:n}=this._statusMap[t].frameState;this.pendingTilesRegister.deregister(n),r(e)}))}}update(e,t){this._statusMap[e]&&(this.pendingTilesRegister.deregister(this._statusMap[e].frameState.frameNumber),this.pendingTilesRegister.register(t.frameNumber),this._statusMap[e].frameState=t)}find(e){return this._statusMap[e]}hasPendingTiles(e){return!this.pendingTilesRegister.isZero(e)}}class te extends K{get traversalFinished(){return!this._tileManager.hasPendingTiles(this._frameNumber||0)}constructor(e){super(e),(0,n.Z)(this,"_tileManager",void 0),this._tileManager=new ee}shouldRefine(e,t){return e._lodJudge=function(e,t){if(0===e.lodMetricValue||isNaN(e.lodMetricValue))return"DIG";const r=2*j(e,t);return r<2?"OUT":!e.header.children||r<=e.lodMetricValue?"DRAW":e.header.children?"DIG":"OUT"}(e,t),"DIG"===e._lodJudge}updateChildTiles(e,t){const r=e.header.children||[],n=e.children,s=e.tileset;for(const i of r){const r="".concat(i.id,"-").concat(t.viewport.id),o=n&&n.find((e=>e.id===r));if(o)o&&this.updateTile(o,t);else{let n=()=>this._loadTile(i.id,s);this._tileManager.find(r)?this._tileManager.update(r,t):(s.tileset.nodePages&&(n=()=>s.tileset.nodePagesTile.formTileFromNodePages(i.id)),this._tileManager.add(n,r,(t=>this._onTileLoad(t,e,r)),t))}}return!1}async _loadTile(e,t){const{loader:r}=t,n=t.getTileUrl("".concat(t.url,"/nodes/").concat(e)),s={...t.loadOptions,i3s:{...t.loadOptions.i3s,isTileHeader:!0,loadContent:!1}};return await(0,E.z)(n,r,s)}_onTileLoad(e,t,r){const n=new Y(t.tileset,e,t,r);t.children.push(n);const s=this._tileManager.find(n.id).frameState;this.updateTile(n,s),this._frameNumber===s.frameNumber&&(this.traversalFinished||(new Date).getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(n,s)}}const re={description:"",ellipsoid:o.H.WGS84,modelMatrix:new s.Z,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,maximumTilesSelected:0,debounceTime:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{},onTraversalComplete:e=>e,contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},ne="Tiles In Tileset(s)",se="Tiles In Memory",ie="Tiles In View",oe="Tiles To Render",ae="Tiles Loaded",ce="Tiles Loading",ue="Tiles Unloaded",le="Failed Tile Loads",he="Points/Vertices",de="Tile Memory Use";class fe{constructor(e,t){(0,n.Z)(this,"options",void 0),(0,n.Z)(this,"loadOptions",void 0),(0,n.Z)(this,"type",void 0),(0,n.Z)(this,"tileset",void 0),(0,n.Z)(this,"loader",void 0),(0,n.Z)(this,"url",void 0),(0,n.Z)(this,"basePath",void 0),(0,n.Z)(this,"modelMatrix",void 0),(0,n.Z)(this,"ellipsoid",void 0),(0,n.Z)(this,"lodMetricType",void 0),(0,n.Z)(this,"lodMetricValue",void 0),(0,n.Z)(this,"refine",void 0),(0,n.Z)(this,"root",void 0),(0,n.Z)(this,"roots",void 0),(0,n.Z)(this,"asset",void 0),(0,n.Z)(this,"description",void 0),(0,n.Z)(this,"properties",void 0),(0,n.Z)(this,"extras",void 0),(0,n.Z)(this,"attributions",void 0),(0,n.Z)(this,"credits",void 0),(0,n.Z)(this,"stats",void 0),(0,n.Z)(this,"traverseCounter",void 0),(0,n.Z)(this,"geometricError",void 0),(0,n.Z)(this,"selectedTiles",void 0),(0,n.Z)(this,"updatePromise",null),(0,n.Z)(this,"tilesetInitializationPromise",void 0),(0,n.Z)(this,"cartographicCenter",void 0),(0,n.Z)(this,"cartesianCenter",void 0),(0,n.Z)(this,"zoom",void 0),(0,n.Z)(this,"boundingVolume",void 0),(0,n.Z)(this,"gpuMemoryUsageInBytes",void 0),(0,n.Z)(this,"dynamicScreenSpaceErrorComputedDensity",void 0),(0,n.Z)(this,"_traverser",void 0),(0,n.Z)(this,"_cache",void 0),(0,n.Z)(this,"_requestScheduler",void 0),(0,n.Z)(this,"_frameNumber",void 0),(0,n.Z)(this,"_queryParamsString",void 0),(0,n.Z)(this,"_queryParams",void 0),(0,n.Z)(this,"_extensionsUsed",void 0),(0,n.Z)(this,"_tiles",void 0),(0,n.Z)(this,"_pendingCount",void 0),(0,n.Z)(this,"lastUpdatedVieports",void 0),(0,n.Z)(this,"_requestedTiles",void 0),(0,n.Z)(this,"_emptyTiles",void 0),(0,n.Z)(this,"frameStateData",void 0),(0,n.Z)(this,"maximumMemoryUsage",void 0),(0,c.h)(e),this.options={...re,...t},this.tileset=e,this.loader=e.loader,this.type=e.type,this.url=e.url,this.basePath=e.basePath||u.XX(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=e.lodMetricType,this.lodMetricValue=e.lodMetricValue,this.refine=e.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new A,this._requestScheduler=new l.Z({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new a.Z({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this.tilesetInitializationPromise=this._initializeTileSet(e)}destroy(){this._destroy()}isLoaded(){return 0===this._pendingCount&&0!==this._frameNumber&&0===this._requestedTiles.length}get tiles(){return Object.values(this._tiles)}get frameNumber(){return this._frameNumber}get queryParams(){return this._queryParamsString||(this._queryParamsString=function(e){const t=[];for(const r of Object.keys(e))t.push("".concat(r,"=").concat(e[r]));switch(t.length){case 0:return"";case 1:return"?".concat(t[0]);default:return"?".concat(t.join("&"))}}(this._queryParams)),this._queryParamsString}setProps(e){this.options={...this.options,...e}}setOptions(e){this.options={...this.options,...e}}getTileUrl(e){return e.startsWith("data:")?e:"".concat(e).concat(this.queryParams)}hasExtension(e){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(e)>-1)}update(e=null){this.tilesetInitializationPromise.then((()=>{!e&&this.lastUpdatedVieports?e=this.lastUpdatedVieports:this.lastUpdatedVieports=e,this.doUpdate(e)}))}async selectTiles(e=null){return await this.tilesetInitializationPromise,e&&(this.lastUpdatedVieports=e),this.updatePromise||(this.updatePromise=new Promise((e=>{setTimeout((()=>{this.doUpdate(this.lastUpdatedVieports),e(this._frameNumber),this.updatePromise=null}),this.options.debounceTime)}))),this.updatePromise}doUpdate(e=null){if("loadTiles"in this.options&&!this.options.loadTiles)return;if(this.traverseCounter>0)return;e instanceof Array||(e=[e]),this._cache.reset(),this._frameNumber++,this.traverseCounter=e.length;const t=[];for(const r of e){const e=r.id;this._needTraverse(e)?t.push(e):this.traverseCounter--}for(const r of e){const e=r.id;if(this.roots[e]||(this.roots[e]=this._initializeTileHeaders(this.tileset,null)),!t.includes(e))continue;const n=g(r,this._frameNumber);this._traverser.traverse(this.roots[e],n,this.options)}}_needTraverse(e){let t=e;return this.options.viewportTraversersMap&&(t=this.options.viewportTraversersMap[e]),t===e}_onTraversalEnd(e){const t=e.viewport.id;this.frameStateData[t]||(this.frameStateData[t]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});const r=this.frameStateData[t],n=Object.values(this._traverser.selectedTiles),[s,i]=function(e,t,r){if(0===r||e.length<=r)return[e,[]];const n=[],{longitude:s,latitude:i}=t.viewport;for(const[t,r]of e.entries()){const[e,o]=r.header.mbs,a=Math.abs(s-e),c=Math.abs(i-o),u=Math.sqrt(c*c+a*a);n.push([t,u])}const o=n.sort(((e,t)=>e[1]-t[1])),a=[];for(let t=0;t<r;t++)a.push(e[o[t][0]]);const c=[];for(let t=r;t<o.length;t++)c.push(e[o[t][0]]);return[a,c]}(n,e,this.options.maximumTilesSelected);r.selectedTiles=s;for(const e of i)e.unselect();r._requestedTiles=Object.values(this._traverser.requestedTiles),r._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()}_updateTiles(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(const e in this.frameStateData){const t=this.frameStateData[e];this.selectedTiles=this.selectedTiles.concat(t.selectedTiles),this._requestedTiles=this._requestedTiles.concat(t._requestedTiles),this._emptyTiles=this._emptyTiles.concat(t._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);for(const e of this.selectedTiles)this._tiles[e.id]=e;this._loadTiles(),this._unloadTiles(),this._updateStats()}_tilesChanged(e,t){if(e.length!==t.length)return!0;const r=new Set(e.map((e=>e.id))),n=new Set(t.map((e=>e.id)));let s=e.filter((e=>!n.has(e.id))).length>0;return s=s||t.filter((e=>!r.has(e.id))).length>0,s}_loadTiles(){for(const e of this._requestedTiles)e.contentUnloaded&&this._loadTile(e)}_unloadTiles(){this._cache.unloadTiles(this,((e,t)=>e._unloadTile(t)))}_updateStats(){let e=0,t=0;for(const r of this.selectedTiles)r.contentAvailable&&r.content&&(e++,r.content.pointCount?t+=r.content.pointCount:t+=r.content.vertexCount);this.stats.get(ie).count=this.selectedTiles.length,this.stats.get(oe).count=e,this.stats.get(he).count=t}async _initializeTileSet(e){this.type===F.i3.I3S&&(this.calculateViewPropsI3S(),e.root=await e.root),this.root=this._initializeTileHeaders(e,null),this.type===F.i3.TILES3D&&(this._initializeTiles3DTileset(e),this.calculateViewPropsTiles3D()),this.type===F.i3.I3S&&this._initializeI3STileset()}calculateViewPropsI3S(){var e;const t=this.tileset.fullExtent;if(t){const{xmin:e,xmax:r,ymin:n,ymax:s,zmin:a,zmax:c}=t;return this.cartographicCenter=new i.Z(e+(r-e)/2,n+(s-n)/2,a+(c-a)/2),this.cartesianCenter=o.H.WGS84.cartographicToCartesian(this.cartographicCenter,new i.Z),void(this.zoom=I(t,this.cartographicCenter,this.cartesianCenter))}const r=null===(e=this.tileset.store)||void 0===e?void 0:e.extent;if(r){const[e,t,n,s]=r;return this.cartographicCenter=new i.Z(e+(n-e)/2,t+(s-t)/2,0),this.cartesianCenter=o.H.WGS84.cartographicToCartesian(this.cartographicCenter,new i.Z),void(this.zoom=function(e,t,r){const[n,s,i,o]=e;return I({xmin:n,xmax:i,ymin:s,ymax:o,zmin:0,zmax:0},t,r)}(r,this.cartographicCenter,this.cartesianCenter))}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new i.Z,this.zoom=1}calculateViewPropsTiles3D(){const e=this.root;(0,c.h)(e);const{center:t}=e.boundingVolume;if(!t)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new i.Z,void(this.zoom=1);this.cartographicCenter=o.H.WGS84.cartesianToCartographic(t,new i.Z),this.cartesianCenter=t,this.zoom=T(e.boundingVolume,this.cartographicCenter)}_initializeStats(){this.stats.get(ne),this.stats.get(ce),this.stats.get(se),this.stats.get(ie),this.stats.get(oe),this.stats.get(ae),this.stats.get(ue),this.stats.get(le),this.stats.get(he,"memory"),this.stats.get(de,"memory")}_initializeTileHeaders(e,t){const r=new Y(this,e.root,t);if(t&&(t.children.push(r),r.depth=t.depth+1),this.type===F.i3.TILES3D){const e=[];for(e.push(r);e.length>0;){const t=e.pop();this.stats.get(ne).incrementCount();const r=t.header.children||[];for(const n of r){const r=new Y(this,n,t);t.children.push(r),r.depth=t.depth+1,e.push(r)}}}return r}_initializeTraverser(){let e;switch(this.type){case F.i3.TILES3D:e=X;break;case F.i3.I3S:e=te;break;default:e=K}return new e({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}_destroyTileHeaders(e){this._destroySubtree(e)}async _loadTile(e){let t;try{this._onStartTileLoading(),t=await e.loadContent()}catch(t){this._onTileLoadError(e,t)}finally{this._onEndTileLoading(),this._onTileLoad(e,t)}}_onTileLoadError(e,t){this.stats.get(le).incrementCount();const r=t.message||t.toString(),n=e.url;console.error("A 3D tile failed to load: ".concat(e.url," ").concat(r)),this.options.onTileError(e,r,n)}_onTileLoad(e,t){if(t){if(this.type===F.i3.I3S){var r,n;const e=(null===(r=this.tileset)||void 0===r||null===(n=r.nodePagesTile)||void 0===n?void 0:n.nodesInNodePages)||0;this.stats.get(ne).reset(),this.stats.get(ne).addCount(e)}e&&e.content&&function(e,t){(0,c.h)(e),(0,c.h)(t);const{rtcCenter:r,gltfUpAxis:n}=t,{computedTransform:a,boundingVolume:{center:u}}=e;let l=new s.Z(a);switch(r&&l.translate(r),n){case"Z":default:break;case"Y":const e=(new s.Z).rotateX(Math.PI/2);l=l.multiplyRight(e);break;case"X":const t=(new s.Z).rotateY(-Math.PI/2);l=l.multiplyRight(t)}t.isQuantized&&l.translate(t.quantizedVolumeOffset).scale(t.quantizedVolumeScale);const h=new i.Z(u);t.cartesianModelMatrix=l,t.cartesianOrigin=h;const d=o.H.WGS84.cartesianToCartographic(h,new i.Z),f=o.H.WGS84.eastNorthUpToFixedFrame(h).invert();t.cartographicModelMatrix=f.multiplyRight(l),t.cartographicOrigin=d,t.coordinateSystem||(t.modelMatrix=t.cartographicModelMatrix)}(e,e.content),this._addTileToCache(e),this.options.onTileLoad(e)}}_onStartTileLoading(){this._pendingCount++,this.stats.get(ce).incrementCount()}_onEndTileLoading(){this._pendingCount--,this.stats.get(ce).decrementCount()}_addTileToCache(e){this._cache.add(this,e,(t=>t._updateCacheStats(e)))}_updateCacheStats(e){this.stats.get(ae).incrementCount(),this.stats.get(se).incrementCount(),this.gpuMemoryUsageInBytes+=e.content.byteLength||0,this.stats.get(de).count=this.gpuMemoryUsageInBytes}_unloadTile(e){this.gpuMemoryUsageInBytes-=e.content&&e.content.byteLength||0,this.stats.get(se).decrementCount(),this.stats.get(ue).incrementCount(),this.stats.get(de).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(e),e.unloadContent()}_destroy(){const e=[];for(this.root&&e.push(this.root);e.length>0;){const t=e.pop();for(const r of t.children)e.push(r);this._destroyTile(t)}this.root=null}_destroySubtree(e){const t=e,r=[];for(r.push(t);r.length>0;){e=r.pop();for(const t of e.children)r.push(t);e!==t&&this._destroyTile(e)}t.children=[]}_destroyTile(e){this._cache.unloadTile(this,e),this._unloadTile(e),e.destroy()}_initializeTiles3DTileset(e){if(this.asset=e.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=e.properties,this.geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed,this.extras=e.extras}_initializeI3STileset(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}},6040:(e,t,r)=>{function n(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}r.d(t,{h:()=>n})},6013:(e,t,r)=>{r.d(t,{CO:()=>s,hJ:()=>o,jU:()=>i,tq:()=>a});const n={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==r.g&&r.g,document:"undefined"!=typeof document&&document},s=n.global||n.self||n.window||{},i="object"!=typeof process||"[object process]"!==String(process)||process.browser,o="function"==typeof importScripts,a="undefined"!=typeof window&&void 0!==window.orientation,c="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);c&&parseFloat(c[1])},6706:(e,t,r)=>{r.d(t,{Y:()=>c});var n=r(6013),s=r(9125),i=r(6040);const o="3.2.4",a={};async function c(e,t=null,r={}){return t&&(e=function(e,t,r){if(e.startsWith("http"))return e;const s=r.modules||{};if(s[e])return s[e];if(!n.jU)return"modules/".concat(t,"/dist/libs/").concat(e);if(r.CDN)return(0,i.h)(r.CDN.startsWith("http")),"".concat(r.CDN,"/").concat(t,"@").concat(o,"/dist/libs/").concat(e);if(n.hJ)return"../src/libs/".concat(e);return"modules/".concat(t,"/src/libs/").concat(e)}(e,t,r)),a[e]=a[e]||async function(e){if(e.endsWith("wasm")){const t=await fetch(e);return await t.arrayBuffer()}if(!n.jU)try{return s&&s.requireFromFile&&await s.requireFromFile(e)}catch{return null}if(n.hJ)return importScripts(e);const t=await fetch(e);return function(e,t){if(!n.jU)return s.requireFromString&&s.requireFromString(e,t);if(n.hJ)return eval.call(n.CO,e),null;const r=document.createElement("script");r.id=t;try{r.appendChild(document.createTextNode(e))}catch(t){r.text=e}return document.body.appendChild(r),null}(await t.text(),e)}(e),await a[e]}}}]);