"use strict";(self.webpackChunkrdeck=self.webpackChunkrdeck||[]).push([[627],{6357:(t,e,i)=>{i.d(e,{Z:()=>n});var r=i(4034);class n extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=t[i+e];return this.check()}toArray(t=[],e=0){for(let i=0;i<this.ELEMENTS;++i)t[e+i]=this[i];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:(0,r.kJ)(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(r.vc)}formatString(t){let e="";for(let i=0;i<this.ELEMENTS;++i)e+=(i>0?", ":"")+(0,r.Bw)(this[i],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!(0,r.fS)(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,i){if(void 0===i)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const n=t[r];this[r]=n+i*(e[r]-n)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t[i]),e[i]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(r.vc.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t),e);return this.check()}get elements(){return this}}},1e3:(t,e,i)=>{i.d(e,{Z:()=>h});var r=i(6357),n=i(6281),s=i(4034);class h extends r.Z{toString(){let t="[";if(s.vc.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let i=0;i<this.RANK;++i)t+=" ".concat(this[i*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,i){return this[e*this.RANK+t]=(0,n.u5)(i),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const i=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[i+t];return e}setColumn(t,e){const i=t*this.RANK;for(let t=0;t<this.RANK;++t)this[i+t]=e[t];return this}}},9521:(t,e,i)=>{i.d(e,{Z:()=>h});var r=i(6357),n=i(6281),s=i(394);class h extends r.Z{get x(){return this[0]}set x(t){this[0]=(0,n.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,n.u5)(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-t[i];e+=r*r}return(0,n.u5)(e)}dot(t){let e=0;for(let i=0;i<this.ELEMENTS;++i)e+=this[i]*t[i];return(0,n.u5)(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return(0,s.Z)(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,n.u5)(this[t])}setComponent(t,e){return(0,s.Z)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}},540:(t,e,i)=>{i.d(e,{Z:()=>l});var r,n=i(1e3),s=i(6281),h=i(1031),o=i(5600),a=i(1437),c=i(7160);!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(r||(r={}));const u=Object.freeze([1,0,0,0,1,0,0,0,1]);class l extends n.Z{static get IDENTITY(){return function(){d||(d=new l,Object.freeze(d));return d}()}static get ZERO(){return function(){f||(f=new l([0,0,0,0,0,0,0,0,0]),Object.freeze(f));return f}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return r}constructor(t,...e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):e.length>0?this.copy([t,...e]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(u)}fromObject(t){return this.check()}fromQuaternion(t){return o.en(this,t),this.check()}set(t,e,i,r,n,s,h,o,a){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this[4]=n,this[5]=s,this[6]=h,this[7]=o,this[8]=a,this.check()}setRowMajor(t,e,i,r,n,s,h,o,a){return this[0]=t,this[1]=r,this[2]=h,this[3]=e,this[4]=n,this[5]=o,this[6]=i,this[7]=s,this[8]=a,this.check()}determinant(){return o.GH(this)}transpose(){return o.p4(this,this),this.check()}invert(){return o.U_(this,this),this.check()}multiplyLeft(t){return o.Jp(this,t,this),this.check()}multiplyRight(t){return o.Jp(this,this,t),this.check()}rotate(t){return o.U1(this,this,t),this.check()}scale(t){return Array.isArray(t)?o.bA(this,this,t):o.bA(this,this,[t,t]),this.check()}translate(t){return o.Iu(this,this,t),this.check()}transform(t,e){let i;switch(t.length){case 2:i=a.kK(e||[-0,-0],t,this);break;case 3:i=c.kK(e||[-0,-0,-0],t,this);break;case 4:i=(0,h._x)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,s.IL)(i,t.length),i}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let f,d},5451:(t,e,i)=>{i.d(e,{Z:()=>g});var r,n=i(1e3),s=i(6281),h=i(1031),o=i(5975),a=i(1437),c=i(7160),u=i(8333);!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(r||(r={}));const l=45*Math.PI/180,f=1,d=.1,m=500,p=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class g extends n.Z{static get IDENTITY(){return function(){M||(M=new g,Object.freeze(M));return M}()}static get ZERO(){return function(){x||(x=new g([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(x));return x}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return r}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,i,r,n,s,h,o,a,c,u,l,f,d,m,p){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this[4]=n,this[5]=s,this[6]=h,this[7]=o,this[8]=a,this[9]=c,this[10]=u,this[11]=l,this[12]=f,this[13]=d,this[14]=m,this[15]=p,this.check()}setRowMajor(t,e,i,r,n,s,h,o,a,c,u,l,f,d,m,p){return this[0]=t,this[1]=n,this[2]=a,this[3]=f,this[4]=e,this[5]=s,this[6]=c,this[7]=d,this[8]=i,this[9]=h,this[10]=u,this[11]=m,this[12]=r,this[13]=o,this[14]=l,this[15]=p,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(p)}fromObject(t){return this.check()}fromQuaternion(t){return o.en(this,t),this.check()}frustum(t){const{left:e,right:i,bottom:r,top:n,near:s=d,far:h=m}=t;return h===1/0?function(t,e,i,r,n,s){const h=2*s/(i-e),o=2*s/(n-r),a=(i+e)/(i-e),c=(n+r)/(n-r),u=-1,l=-1,f=-2*s;t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=a,t[9]=c,t[10]=u,t[11]=l,t[12]=0,t[13]=0,t[14]=f,t[15]=0}(this,e,i,r,n,s):o.oy(this,e,i,r,n,s,h),this.check()}lookAt(t){const{eye:e,center:i=[0,0,0],up:r=[0,1,0]}=t;return o.zB(this,e,i,r),this.check()}ortho(t){const{left:e,right:i,bottom:r,top:n,near:s=d,far:h=m}=t;return o.M5(this,e,i,r,n,s,h),this.check()}orthographic(t){const{fovy:e=l,aspect:i=f,focalDistance:r=1,near:n=d,far:s=m}=t;y(e);const h=e/2,o=r*Math.tan(h),a=o*i;return this.ortho({left:-a,right:a,bottom:-o,top:o,near:n,far:s})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:i=1,near:r=.1,far:n=500}=t;return y(e),o.G3(this,e,i,r,n),this.check()}determinant(){return o.GH(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const i=this.getScale(e),r=1/i[0],n=1/i[1],s=1/i[2];return t[0]=this[0]*r,t[1]=this[1]*n,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*n,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*n,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const i=this.getScale(e),r=1/i[0],n=1/i[1],s=1/i[2];return t[0]=this[0]*r,t[1]=this[1]*n,t[2]=this[2]*s,t[3]=this[4]*r,t[4]=this[5]*n,t[5]=this[6]*s,t[6]=this[8]*r,t[7]=this[9]*n,t[8]=this[10]*s,t}transpose(){return o.p4(this,this),this.check()}invert(){return o.U_(this,this),this.check()}multiplyLeft(t){return o.Jp(this,t,this),this.check()}multiplyRight(t){return o.Jp(this,this,t),this.check()}rotateX(t){return o.lM(this,this,t),this.check()}rotateY(t){return o.uD(this,this,t),this.check()}rotateZ(t){return o.jI(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return o.U1(this,this,t,e),this.check()}scale(t){return o.bA(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return o.Iu(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=u.fF(e||[-0,-0,-0,-0],t,this),(0,s.IL)(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:i}=t;let r;switch(i){case 2:r=a.fF(e||[-0,-0],t,this);break;case 3:r=c.fF(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,s.IL)(r,t.length),r}transformAsVector(t,e){let i;switch(t.length){case 2:i=(0,h.pb)(e||[-0,-0],t,this);break;case 3:i=(0,h.pL)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,s.IL)(i,t.length),i}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,i){return this.identity().translate([t,e,i])}}let x,M;function y(t){if(t>2*Math.PI)throw Error("expected radians")}},3037:(t,e,i)=>{i.d(e,{Z:()=>c});var r=i(6357),n=i(6281),s=i(1849),h=i(2945),o=i(8333);const a=[0,0,0,1];class c extends r.Z{constructor(t=0,e=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,i,r)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,i,r){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return h.bz(this,t),this.check()}fromAxisRotation(t,e){return h.yY(this,t,e),this.check()}identity(){return h.yR(this),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=(0,n.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,n.u5)(t)}get z(){return this[2]}set z(t){this[2]=(0,n.u5)(t)}get w(){return this[3]}set w(t){this[3]=(0,n.u5)(t)}len(){return h.kE(this)}lengthSquared(){return h.we(this)}dot(t){return h.AK(this,t)}rotationTo(t,e){return h.b0(this,t,e),this.check()}add(t){return h.IH(this,this,t),this.check()}calculateW(){return h.ZY(this,this),this.check()}conjugate(){return h.Kx(this,this),this.check()}invert(){return h.U_(this,this),this.check()}lerp(t,e,i){return void 0===i?this.lerp(this,t,e):(h.t7(this,t,e,i),this.check())}multiplyRight(t){return h.Jp(this,this,t),this.check()}multiplyLeft(t){return h.Jp(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return h.lM(this,this,t),this.check()}rotateY(t){return h.uD(this,this,t),this.check()}rotateZ(t){return h.jI(this,this,t),this.check()}scale(t){return h.bA(this,this,t),this.check()}slerp(t,e,i){let r,n,s;switch(arguments.length){case 1:({start:r=a,target:n,ratio:s}=t);break;case 2:r=this,n=t,s=e;break;default:r=t,n=e,s=i}return h.ZA(this,r,n,s),this.check()}transformVector4(t,e=new s.Z){return o.VC(e,t,this),(0,n.IL)(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}},7858:(t,e,i)=>{i.d(e,{Z:()=>a});var r=i(4572),n=i(3855),s=i(4034),h=i(7160);const o=1e-6;class a{constructor({phi:t=0,theta:e=0,radius:i=1,bearing:n,pitch:s,altitude:h,radiusScale:o=6371e3}={}){(0,r.Z)(this,"phi",void 0),(0,r.Z)(this,"theta",void 0),(0,r.Z)(this,"radius",void 0),(0,r.Z)(this,"radiusScale",void 0),this.phi=t,this.theta=e,this.radius=i||h||1,this.radiusScale=o||1,void 0!==n&&(this.bearing=n),void 0!==s&&(this.pitch=s),this.check()}toString(){return this.formatString(s.vc)}formatString({printTypes:t=!1}){const e=s.Bw;return"".concat(t?"Spherical":"","[rho:").concat(e(this.radius),",theta:").concat(e(this.theta),",phi:").concat(e(this.phi),"]")}equals(t){return(0,s.fS)(this.radius,t.radius)&&(0,s.fS)(this.theta,t.theta)&&(0,s.fS)(this.phi,t.phi)}exactEquals(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}get bearing(){return 180-(0,s.RW)(this.phi)}set bearing(t){this.phi=Math.PI-(0,s.uR)(t)}get pitch(){return(0,s.RW)(this.theta)}set pitch(t){this.theta=(0,s.uR)(t)}get longitude(){return(0,s.RW)(this.phi)}get latitude(){return(0,s.RW)(this.theta)}get lng(){return(0,s.RW)(this.phi)}get lat(){return(0,s.RW)(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this.check()}clone(){return(new a).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}fromLngLatZ([t,e,i]){return this.radius=1+i/this.radiusScale,this.phi=(0,s.uR)(e),this.theta=(0,s.uR)(t),this.check()}fromVector3(t){return this.radius=h.kE(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos((0,s.uZ)(t[2]/this.radius,-1,1))),this.check()}toVector3(){return new n.Z(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(o,Math.min(Math.PI-o,this.phi)),this}check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}},7069:(t,e,i)=>{i.d(e,{Z:()=>a});var r=i(9521),n=i(4034),s=i(6281),h=i(1437),o=i(1031);class a extends r.Z{constructor(t=0,e=0){super(2),(0,n.kJ)(t)&&1===arguments.length?this.copy(t):(n.vc.debug&&((0,s.u5)(t),(0,s.u5)(e)),this[0]=t,this[1]=e)}set(t,e){return this[0]=t,this[1]=e,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return n.vc.debug&&((0,s.u5)(t.x),(0,s.u5)(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return h.fF(this,this,t),this.check()}transformAsVector(t){return(0,o.pb)(this,this,t),this.check()}transformByMatrix3(t){return h.kK(this,this,t),this.check()}transformByMatrix2x3(t){return h.iu(this,this,t),this.check()}transformByMatrix2(t){return h.c(this,this,t),this.check()}}},3855:(t,e,i)=>{i.d(e,{Z:()=>u});var r=i(9521),n=i(4034),s=i(6281),h=i(7160),o=i(1031);const a=[0,0,0];let c;class u extends r.Z{static get ZERO(){return c||(c=new u(0,0,0),Object.freeze(c)),c}constructor(t=0,e=0,i=0){super(-0,-0,-0),1===arguments.length&&(0,n.kJ)(t)?this.copy(t):(n.vc.debug&&((0,s.u5)(t),(0,s.u5)(e),(0,s.u5)(i)),this[0]=t,this[1]=e,this[2]=i)}set(t,e,i){return this[0]=t,this[1]=e,this[2]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return n.vc.debug&&((0,s.u5)(t.x),(0,s.u5)(t.y),(0,s.u5)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=(0,s.u5)(t)}angle(t){return h.EU(this,t)}cross(t){return h.kC(this,this,t),this.check()}rotateX({radians:t,origin:e=a}){return h.lM(this,this,e,t),this.check()}rotateY({radians:t,origin:e=a}){return h.uD(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=a}){return h.jI(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return h.fF(this,this,t),this.check()}transformAsVector(t){return(0,o.pL)(this,this,t),this.check()}transformByMatrix3(t){return h.kK(this,this,t),this.check()}transformByMatrix2(t){return(0,o.eQ)(this,this,t),this.check()}transformByQuaternion(t){return h.VC(this,this,t),this.check()}}},1849:(t,e,i)=>{i.d(e,{Z:()=>c});var r=i(9521),n=i(4034),s=i(6281),h=i(7160),o=i(1031);let a;class c extends r.Z{static get ZERO(){return a||(a=new c(0,0,0,0),Object.freeze(a)),a}constructor(t=0,e=0,i=0,r=0){super(-0,-0,-0,-0),(0,n.kJ)(t)&&1===arguments.length?this.copy(t):(n.vc.debug&&((0,s.u5)(t),(0,s.u5)(e),(0,s.u5)(i),(0,s.u5)(r)),this[0]=t,this[1]=e,this[2]=i,this[3]=r)}set(t,e,i,r){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return n.vc.debug&&((0,s.u5)(t.x),(0,s.u5)(t.y),(0,s.u5)(t.z),(0,s.u5)(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=(0,s.u5)(t)}get w(){return this[3]}set w(t){this[3]=(0,s.u5)(t)}transform(t){return h.fF(this,this,t),this.check()}transformByMatrix3(t){return(0,o._x)(this,this,t),this.check()}transformByMatrix2(t){return(0,o.G7)(this,this,t),this.check()}transformByQuaternion(t){return h.VC(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}},394:(t,e,i)=>{function r(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}i.d(e,{Z:()=>r})},4034:(t,e,i)=>{i.d(e,{BJ:()=>S,Bw:()=>a,I6:()=>O,Kh:()=>y,O$:()=>p,OR:()=>x,RW:()=>m,Ux:()=>f,Yr:()=>l,ZR:()=>M,d9:()=>u,fS:()=>E,jQ:()=>o,kJ:()=>c,mC:()=>g,t7:()=>b,uR:()=>d,uZ:()=>w,vc:()=>h,z4:()=>Z});var r=i(394);const n=1/Math.PI*180,s=1/180*Math.PI,h={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function o(t){for(const e in t)(0,r.Z)(e in h),h[e]=t[e];return h}function a(t,{precision:e=h.precision}={}){return t=function(t){return Math.round(t/h.EPSILON)*h.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function c(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function u(t){return"clone"in t?t.clone():t.slice()}function l(t){return d(t)}function f(t){return m(t)}function d(t,e){return v(t,(t=>t*s),e)}function m(t,e){return v(t,(t=>t*n),e)}function p(t,e){return v(t,(t=>Math.sin(t)),e)}function g(t,e){return v(t,(t=>Math.cos(t)),e)}function x(t,e){return v(t,(t=>Math.tan(t)),e)}function M(t,e){return v(t,(t=>Math.asin(t)),e)}function y(t,e){return v(t,(t=>Math.acos(t)),e)}function Z(t,e){return v(t,(t=>Math.atan(t)),e)}function w(t,e,i){return v(t,(t=>Math.max(e,Math.min(i,t))))}function b(t,e,i){return c(t)?t.map(((t,r)=>b(t,e[r],i))):i*e+(1-i)*t}function E(t,e,i){const r=h.EPSILON;i&&(h.EPSILON=i);try{if(t===e)return!0;if(c(t)&&c(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!E(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=h.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{h.EPSILON=r}}function O(t,e){if(t===e)return!0;if(t&&"object"==typeof t&&e&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;if(t.exactEquals)return t.exactEquals(e)}if(c(t)&&c(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!O(t[i],e[i]))return!1;return!0}return!1}function S(t,e){const i=h.EPSILON;let r;h.EPSILON=t;try{r=e()}finally{h.EPSILON=i}return r}function v(t,e,i){if(c(t)){const r=t;i=i||function(t){return t.clone?t.clone():new Array(t.length)}(r);for(let n=0;n<i.length&&n<r.length;++n)i[n]=e(t[n],n,i);return i}return e(t)}},1031:(t,e,i)=>{function r(t,e,i){const r=e[0],n=e[1],s=i[3]*r+i[7]*n||1;return t[0]=(i[0]*r+i[4]*n)/s,t[1]=(i[1]*r+i[5]*n)/s,t}function n(t,e,i){const r=e[0],n=e[1],s=e[2],h=i[3]*r+i[7]*n+i[11]*s||1;return t[0]=(i[0]*r+i[4]*n+i[8]*s)/h,t[1]=(i[1]*r+i[5]*n+i[9]*s)/h,t[2]=(i[2]*r+i[6]*n+i[10]*s)/h,t}function s(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t[2]=e[2],t}function h(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t[2]=e[2],t[3]=e[3],t}function o(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[3]*n+i[6]*s,t[1]=i[1]*r+i[4]*n+i[7]*s,t[2]=i[2]*r+i[5]*n+i[8]*s,t[3]=e[3],t}i.d(e,{G7:()=>h,_x:()=>o,eQ:()=>s,pL:()=>n,pb:()=>r})},9057:(t,e,i)=>{i.d(e,{Z:()=>r});const r={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},6281:(t,e,i)=>{i.d(e,{IL:()=>s,u5:()=>n});var r=i(4034);function n(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function s(t,e,i=""){if(r.vc.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(i," some fields set to invalid numbers'"));return t}},2872:(t,e,i)=>{i.d(e,{Xx:()=>u,KM:()=>m,Mh:()=>F,F7:()=>P,JO:()=>j,du:()=>ot});const r=-1,n=0,s=1;var h=i(4572),o=i(3855);const a=new o.Z,c=new o.Z;class u{constructor(t=[0,0,0],e=[0,0,0],i){(0,h.Z)(this,"center",void 0),(0,h.Z)(this,"halfDiagonal",void 0),(0,h.Z)(this,"minimum",void 0),(0,h.Z)(this,"maximum",void 0),i=i||a.copy(t).add(e).scale(.5),this.center=new o.Z(i),this.halfDiagonal=new o.Z(e).subtract(this.center),this.minimum=new o.Z(t),this.maximum=new o.Z(e)}clone(){return new u(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:e}=this,i=c.from(t.normal),h=e.x*Math.abs(i.x)+e.y*Math.abs(i.y)+e.z*Math.abs(i.z),o=this.center.dot(i)+t.distance;return o-h>0?s:o+h<0?r:n}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=a.from(t).subtract(this.center),{halfDiagonal:i}=this;let r,n=0;return r=Math.abs(e.x)-i.x,r>0&&(n+=r*r),r=Math.abs(e.y)-i.y,r>0&&(n+=r*r),r=Math.abs(e.z)-i.z,r>0&&(n+=r*r),n}}var l=i(5975);const f=new o.Z,d=new o.Z;class m{constructor(t=[0,0,0],e=0){(0,h.Z)(this,"center",void 0),(0,h.Z)(this,"radius",void 0),this.radius=-0,this.center=new o.Z,this.fromCenterRadius(t,e)}fromCenterRadius(t,e){return this.center.from(t),this.radius=e,this}fromCornerPoints(t,e){return e=f.from(e),this.center=(new o.Z).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new m(this.center,this.radius)}union(t){const e=this.center,i=this.radius,r=t.center,n=t.radius,s=f.copy(r).subtract(e),h=s.magnitude();if(i>=h+n)return this.clone();if(n>=h+i)return t.clone();const o=.5*(i+h+n);return d.copy(s).scale((-i+o)/h).add(e),this.center.copy(d),this.radius=o,this}expand(t){const e=f.from(t).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}transform(t){this.center.transform(t);const e=l.Q$(f,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}distanceSquaredTo(t){const e=this.distanceTo(t);return e*e}distanceTo(t){const e=f.from(t).subtract(this.center);return Math.max(0,e.len()-this.radius)}intersectPlane(t){const e=this.center,i=this.radius,h=t.normal.dot(e)+t.distance;return h<-i?r:h<i?n:s}}var p=i(540),g=i(3037);const x=new o.Z,M=new o.Z,y=new o.Z,Z=new o.Z,w=new o.Z,b=new o.Z,E=new o.Z,O=0,S=1,v=2,k=3,N=4,L=5,R=6,A=7,I=8;class P{constructor(t=[0,0,0],e=[0,0,0,0,0,0,0,0,0]){(0,h.Z)(this,"center",void 0),(0,h.Z)(this,"halfAxes",void 0),this.center=(new o.Z).from(t),this.halfAxes=new p.Z(e)}get halfSize(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new o.Z(t).len(),new o.Z(e).len(),new o.Z(i).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new o.Z(t).normalize(),n=new o.Z(e).normalize(),s=new o.Z(i).normalize();return(new g.Z).fromMatrix3(new p.Z([...r,...n,...s]))}fromCenterHalfSizeQuaternion(t,e,i){const r=new g.Z(i),n=(new p.Z).fromQuaternion(r);return n[0]=n[0]*e[0],n[1]=n[1]*e[0],n[2]=n[2]*e[0],n[3]=n[3]*e[1],n[4]=n[4]*e[1],n[5]=n[5]*e[1],n[6]=n[6]*e[2],n[7]=n[7]*e[2],n[8]=n[8]*e[2],this.center=(new o.Z).from(t),this.halfAxes=n,this}clone(){return new P(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new m){const e=this.halfAxes,i=e.getColumn(0,y),r=e.getColumn(1,Z),n=e.getColumn(2,w),s=x.copy(i).add(r).add(n);return t.center.copy(this.center),t.radius=s.magnitude(),t}intersectPlane(t){const e=this.center,i=t.normal,h=this.halfAxes,o=i.x,a=i.y,c=i.z,u=Math.abs(o*h[O]+a*h[S]+c*h[v])+Math.abs(o*h[k]+a*h[N]+c*h[L])+Math.abs(o*h[R]+a*h[A]+c*h[I]),l=i.dot(e)+t.distance;return l<=-u?r:l>=u?s:n}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=M.from(t).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,y),n=i.getColumn(1,Z),s=i.getColumn(2,w),h=r.magnitude(),o=n.magnitude(),a=s.magnitude();r.normalize(),n.normalize(),s.normalize();let c,u=0;return c=Math.abs(e.dot(r))-h,c>0&&(u+=c*c),c=Math.abs(e.dot(n))-o,c>0&&(u+=c*c),c=Math.abs(e.dot(s))-a,c>0&&(u+=c*c),u}computePlaneDistances(t,e,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;const s=this.center,h=this.halfAxes,o=h.getColumn(0,y),a=h.getColumn(1,Z),c=h.getColumn(2,w),u=b.copy(o).add(a).add(c).add(s),l=E.copy(u).subtract(t);let f=e.dot(l);return r=Math.min(f,r),n=Math.max(f,n),u.copy(s).add(o).add(a).subtract(c),l.copy(u).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),u.copy(s).add(o).subtract(a).add(c),l.copy(u).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),u.copy(s).add(o).subtract(a).subtract(c),l.copy(u).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),s.copy(u).subtract(o).add(a).add(c),l.copy(u).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),s.copy(u).subtract(o).add(a).subtract(c),l.copy(u).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),s.copy(u).subtract(o).subtract(a).add(c),l.copy(u).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),s.copy(u).subtract(o).subtract(a).subtract(c),l.copy(u).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),i[0]=r,i[1]=n,i}transform(t){this.center.transformAsPoint(t);const e=this.halfAxes.getColumn(0,y);e.transformAsPoint(t);const i=this.halfAxes.getColumn(1,Z);i.transformAsPoint(t);const r=this.halfAxes.getColumn(2,w);return r.transformAsPoint(t),this.halfAxes=new p.Z([...e,...i,...r]),this}getTransform(){throw new Error("not implemented")}}var z=i(394),C=i(4034);const T=new o.Z,q=new o.Z;class j{constructor(t=[0,0,1],e=0){(0,h.Z)(this,"normal",void 0),(0,h.Z)(this,"distance",void 0),this.normal=new o.Z,this.distance=-0,this.fromNormalDistance(t,e)}fromNormalDistance(t,e){return(0,z.Z)(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}fromPointNormal(t,e){t=T.from(t),this.normal.from(e).normalize();const i=-this.normal.dot(t);return this.distance=i,this}fromCoefficients(t,e,i,r){return this.normal.set(t,e,i),(0,z.Z)((0,C.fS)(this.normal.len(),1)),this.distance=r,this}clone(){return new j(this.normal,this.distance)}equals(t){return(0,C.fS)(this.distance,t.distance)&&(0,C.fS)(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const e=q.copy(this.normal).transformAsVector(t).normalize(),i=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(i,e)}projectPointOntoPlane(t,e=[0,0,0]){t=T.from(t);const i=this.getPointDistance(t),r=q.copy(this.normal).scale(i);return t.subtract(r).to(e)}}const X=[new o.Z([1,0,0]),new o.Z([0,1,0]),new o.Z([0,0,1])],Y=new o.Z,W=new o.Z;new j(new o.Z(1,0,0),0);class F{constructor(t=[]){(0,h.Z)(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*X.length;const e=t.center,i=t.radius;let r=0;for(const t of X){let n=this.planes[r],s=this.planes[r+1];n||(n=this.planes[r]=new j),s||(s=this.planes[r+1]=new j);const h=Y.copy(t).scale(-i).add(e);t.dot(h);n.fromPointNormal(h,t);const o=Y.copy(t).scale(i).add(e),a=W.copy(t).negate();a.dot(o);s.fromPointNormal(o,a),r+=2}return this}computeVisibility(t){let e=s;for(const i of this.planes){switch(t.intersectPlane(i)){case r:return r;case n:e=n}}return e}computeVisibilityWithPlaneMask(t,e){if((0,z.Z)(Number.isFinite(e),"parentPlaneMask is required."),e===F.MASK_OUTSIDE||e===F.MASK_INSIDE)return e;let i=F.MASK_INSIDE;const s=this.planes;for(let h=0;h<this.planes.length;++h){const o=h<31?1<<h:0;if(h<31&&0==(e&o))continue;const a=s[h],c=t.intersectPlane(a);if(c===r)return F.MASK_OUTSIDE;c===n&&(i|=o)}return i}}(0,h.Z)(F,"MASK_OUTSIDE",4294967295),(0,h.Z)(F,"MASK_INSIDE",0),(0,h.Z)(F,"MASK_INDETERMINATE",2147483647);new o.Z,new o.Z,new o.Z,new o.Z,new o.Z;new o.Z,new o.Z,new o.Z,new o.Z,new o.Z,new o.Z,new o.Z,new o.Z,new o.Z,new o.Z,new o.Z,new o.Z,Math.PI;var _=i(9057);const D=new p.Z,V=new p.Z,B=new p.Z,U=new p.Z,K=new p.Z;function J(t,e={}){const i=_.Z.EPSILON20;let r=0,n=0;const s=V,h=B;s.identity(),h.copy(t);const o=i*function(t){let e=0;for(let i=0;i<9;++i){const r=t[i];e+=r*r}return Math.sqrt(e)}(h);for(;n<10&&H(h)>o;)$(h,U),K.copy(U).transpose(),h.multiplyRight(U),h.multiplyLeft(K),s.multiplyRight(U),++r>2&&(++n,r=0);return e.unitary=s.toTarget(e.unitary),e.diagonal=h.toTarget(e.diagonal),e}const Q=[1,0,0],G=[2,2,1];function H(t){let e=0;for(let i=0;i<3;++i){const r=t[D.getElementIndex(G[i],Q[i])];e+=2*r*r}return Math.sqrt(e)}function $(t,e){const i=_.Z.EPSILON15;let r=0,n=1;for(let e=0;e<3;++e){const i=Math.abs(t[D.getElementIndex(G[e],Q[e])]);i>r&&(n=e,r=i)}const s=Q[n],h=G[n];let o=1,a=0;if(Math.abs(t[D.getElementIndex(h,s)])>i){const e=(t[D.getElementIndex(h,h)]-t[D.getElementIndex(s,s)])/2/t[D.getElementIndex(h,s)];let i;i=e<0?-1/(-e+Math.sqrt(1+e*e)):1/(e+Math.sqrt(1+e*e)),o=1/Math.sqrt(1+i*i),a=i*o}return p.Z.IDENTITY.to(e),e[D.getElementIndex(s,s)]=e[D.getElementIndex(h,h)]=o,e[D.getElementIndex(h,s)]=a,e[D.getElementIndex(s,h)]=-a,e}const tt=new o.Z,et=new o.Z,it=new o.Z,rt=new o.Z,nt=new o.Z,st=new p.Z,ht={diagonal:new p.Z,unitary:new p.Z};function ot(t,e=new P){if(!t||0===t.length)return e.halfAxes=new p.Z([0,0,0,0,0,0,0,0,0]),e.center=new o.Z,e;const i=t.length,r=new o.Z(0,0,0);for(const e of t)r.add(e);const n=1/i;r.multiplyByScalar(n);let s=0,h=0,a=0,c=0,u=0,l=0;for(const e of t){const t=tt.copy(e).subtract(r);s+=t.x*t.x,h+=t.x*t.y,a+=t.x*t.z,c+=t.y*t.y,u+=t.y*t.z,l+=t.z*t.z}s*=n,h*=n,a*=n,c*=n,u*=n,l*=n;const f=st;f[0]=s,f[1]=h,f[2]=a,f[3]=h,f[4]=c,f[5]=u,f[6]=a,f[7]=u,f[8]=l;const{unitary:d}=J(f,ht),m=e.halfAxes.copy(d);let g=m.getColumn(0,it),x=m.getColumn(1,rt),M=m.getColumn(2,nt),y=-Number.MAX_VALUE,Z=-Number.MAX_VALUE,w=-Number.MAX_VALUE,b=Number.MAX_VALUE,E=Number.MAX_VALUE,O=Number.MAX_VALUE;for(const e of t)tt.copy(e),y=Math.max(tt.dot(g),y),Z=Math.max(tt.dot(x),Z),w=Math.max(tt.dot(M),w),b=Math.min(tt.dot(g),b),E=Math.min(tt.dot(x),E),O=Math.min(tt.dot(M),O);g=g.multiplyByScalar(.5*(b+y)),x=x.multiplyByScalar(.5*(E+Z)),M=M.multiplyByScalar(.5*(O+w)),e.center.copy(g).add(x).add(M);const S=et.set(y-b,Z-E,w-O).multiplyByScalar(.5),v=new p.Z([S[0],0,0,0,S[1],0,0,0,S[2]]);return e.halfAxes.multiplyRight(v),e}},596:(t,e,i)=>{i.d(e,{H:()=>P});var r=i(4572),n=i(3855),s=i(9057),h=i(394),o=i(5451),a=i(4034),c=i(7160);const u=6378137,l=6378137,f=6356752.314245179;Math.max(u,l,f);function d(t){return t}new n.Z;function m(t,e=[],i=d){return"longitude"in t?(e[0]=i(t.longitude),e[1]=i(t.latitude),e[2]=t.height):"x"in t?(e[0]=i(t.x),e[1]=i(t.y),e[2]=t.z):(e[0]=i(t[0]),e[1]=i(t[1]),e[2]=t[2]),e}function p(t,e,i=d){return"longitude"in e?(e.longitude=i(t[0]),e.latitude=i(t[1]),e.height=t[2]):"x"in e?(e.x=i(t[0]),e.y=i(t[1]),e.z=t[2]):(e[0]=i(t[0]),e[1]=i(t[1]),e[2]=t[2]),e}const g=new n.Z,x=new n.Z,M=new n.Z;const y=new n.Z,Z={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},w={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},b={east:new n.Z,north:new n.Z,up:new n.Z,west:new n.Z,south:new n.Z,down:new n.Z},E=new n.Z,O=new n.Z,S=new n.Z;function v(t,e,i,r,n,s){const o=Z[e]&&Z[e][i];let c,u,l;(0,h.Z)(o&&(!r||r===o));const f=y.copy(n);if((0,a.fS)(f.x,0,1e-14)&&(0,a.fS)(f.y,0,1e-14)){const t=Math.sign(f.z);c=E.fromArray(w[e]),"east"!==e&&"west"!==e&&c.scale(t),u=O.fromArray(w[i]),"east"!==i&&"west"!==i&&u.scale(t),l=S.fromArray(w[r]),"east"!==r&&"west"!==r&&l.scale(t)}else{const{up:n,east:s,north:h}=b;s.set(-f.y,f.x,0).normalize(),t.geodeticSurfaceNormal(f,n),h.copy(n).cross(s);const{down:o,west:a,south:d}=b;o.copy(n).scale(-1),a.copy(s).scale(-1),d.copy(h).scale(-1),c=b[e],u=b[i],l=b[r]}return s[0]=c.x,s[1]=c.y,s[2]=c.z,s[3]=0,s[4]=u.x,s[5]=u.y,s[6]=u.z,s[7]=0,s[8]=l.x,s[9]=l.y,s[10]=l.z,s[11]=0,s[12]=f.x,s[13]=f.y,s[14]=f.z,s[15]=1,s}const k=new n.Z,N=new n.Z,L=new n.Z,R=new n.Z,A=new n.Z,I=new n.Z;class P{constructor(t=0,e=0,i=0){(0,r.Z)(this,"radii",void 0),(0,r.Z)(this,"radiiSquared",void 0),(0,r.Z)(this,"radiiToTheFourth",void 0),(0,r.Z)(this,"oneOverRadii",void 0),(0,r.Z)(this,"oneOverRadiiSquared",void 0),(0,r.Z)(this,"minimumRadius",void 0),(0,r.Z)(this,"maximumRadius",void 0),(0,r.Z)(this,"centerToleranceSquared",s.Z.EPSILON1),(0,r.Z)(this,"squaredXOverSquaredZ",void 0),(0,h.Z)(t>=0),(0,h.Z)(e>=0),(0,h.Z)(i>=0),this.radii=new n.Z(t,e,i),this.radiiSquared=new n.Z(t*t,e*e,i*i),this.radiiToTheFourth=new n.Z(t*t*t*t,e*e*e*e,i*i*i*i),this.oneOverRadii=new n.Z(0===t?0:1/t,0===e?0:1/e,0===i?0:1/i),this.oneOverRadiiSquared=new n.Z(0===t?0:1/(t*t),0===e?0:1/(e*e),0===i?0:1/(i*i)),this.minimumRadius=Math.min(t,e,i),this.maximumRadius=Math.max(t,e,i),0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}equals(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}toString(){return this.radii.toString()}cartographicToCartesian(t,e=[0,0,0]){const i=N,r=L,[,,n]=t;this.geodeticSurfaceNormalCartographic(t,i),r.copy(this.radiiSquared).scale(i);const s=Math.sqrt(i.dot(r));return r.scale(1/s),i.scale(n),r.add(i),r.to(e)}cartesianToCartographic(t,e=[0,0,0]){I.from(t);const i=this.scaleToGeodeticSurface(I,R);if(!i)return;const r=this.geodeticSurfaceNormal(i,N),n=A;n.copy(I).subtract(i);const s=Math.atan2(r.y,r.x),h=Math.asin(r.z),o=Math.sign(c.AK(n,I))*c.kE(n);return p([s,h,o],e,a.vc._cartographicRadians?d:a.Ux)}eastNorthUpToFixedFrame(t,e=new o.Z){return v(this,"east","north","up",t,e)}localFrameToFixedFrame(t,e,i,r,n=new o.Z){return v(this,t,e,i,r,n)}geocentricSurfaceNormal(t,e=[0,0,0]){return k.from(t).normalize().to(e)}geodeticSurfaceNormalCartographic(t,e=[0,0,0]){const i=function(t,e=[]){return m(t,e,a.vc._cartographicRadians?d:a.Yr)}(t),r=i[0],n=i[1],s=Math.cos(n);return k.set(s*Math.cos(r),s*Math.sin(r),Math.sin(n)).normalize(),k.to(e)}geodeticSurfaceNormal(t,e=[0,0,0]){return k.from(t).scale(this.oneOverRadiiSquared).normalize().to(e)}scaleToGeodeticSurface(t,e){return function(t,e,i=[]){const{oneOverRadii:r,oneOverRadiiSquared:n,centerToleranceSquared:h}=e;g.from(t);const o=g.x,a=g.y,c=g.z,u=r.x,l=r.y,f=r.z,d=o*o*u*u,m=a*a*l*l,p=c*c*f*f,y=d+m+p,Z=Math.sqrt(1/y);if(!Number.isFinite(Z))return;const w=x;if(w.copy(t).scale(Z),y<h)return w.to(i);const b=n.x,E=n.y,O=n.z,S=M;S.set(w.x*b*2,w.y*E*2,w.z*O*2);let v,k,N,L,R=(1-Z)*g.len()/(.5*S.len()),A=0;do{R-=A,v=1/(1+R*b),k=1/(1+R*E),N=1/(1+R*O);const t=v*v,e=k*k,i=N*N;L=d*t+m*e+p*i-1,A=L/(-2*(d*(t*v)*b+m*(e*k)*E+p*(i*N)*O))}while(Math.abs(L)>s.Z.EPSILON12);return g.scale([v,k,N]).to(i)}(t,this,e)}scaleToGeocentricSurface(t,e=[0,0,0]){R.from(t);const i=R.x,r=R.y,n=R.z,s=this.oneOverRadiiSquared,h=1/Math.sqrt(i*i*s.x+r*r*s.y+n*n*s.z);return R.multiplyScalar(h).to(e)}transformPositionToScaledSpace(t,e=[0,0,0]){return R.from(t).scale(this.oneOverRadii).to(e)}transformPositionFromScaledSpace(t,e=[0,0,0]){return R.from(t).scale(this.radii).to(e)}getSurfaceNormalIntersectionWithZAxis(t,e=0,i=[0,0,0]){(0,h.Z)((0,a.fS)(this.radii.x,this.radii.y,s.Z.EPSILON15)),(0,h.Z)(this.radii.z>0),R.from(t);const r=R.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(r)>=this.radii.z-e))return R.set(0,0,r).to(i)}}(0,r.Z)(P,"WGS84",new P(u,l,f))},5215:(t,e,i)=>{i.d(e,{wG:()=>r,WZ:()=>j,GU:()=>D,dj:()=>T,ct:()=>_,OT:()=>h,ap:()=>s,Ny:()=>n});const r={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function n(t,e,i={}){const r=function(t,e={}){return Math.sign(s(t,e))}(t,i);return r!==e&&(function(t,e){const{start:i=0,end:r=t.length,size:n=2}=e,s=(r-i)/n,h=Math.floor(s/2);for(let e=0;e<h;++e){const r=i+e*n,h=i+(s-1-e)*n;for(let e=0;e<n;++e){const i=t[r+e];t[r+e]=t[h+e],t[h+e]=i}}}(t,i),!0)}function s(t,e={}){const{start:i=0,end:r=t.length}=e,n=e.size||2;let s=0;for(let e=i,h=r-n;e<r;e+=n)s+=(t[e]-t[h])*(t[e+1]+t[h+1]),h=e;return s/2}function h(t,e,i=2,r){const n=e&&e.length,s=n?e[0]*i:t.length;let h=o(t,0,s,i,!0,r&&r[0]);const u=[];if(!h||h.next===h.prev)return u;let l,f,d,g,x,y,Z;if(n&&(h=function(t,e,i,r,n){const s=[];let h,c,u,l,f;for(h=0,c=e.length;h<c;h++)u=e[h]*r,l=h<c-1?e[h+1]*r:t.length,f=o(t,u,l,r,!1,n&&n[h+1]),f===f.next&&(f.steiner=!0),s.push(M(f));for(s.sort(m),h=0;h<s.length;h++)p(s[h],i),i=a(i,i.next);return i}(t,e,h,i,r)),t.length>80*i){g=f=t[0],x=d=t[1];for(let e=i;e<s;e+=i)y=t[e],Z=t[e+1],y<g&&(g=y),Z<x&&(x=Z),y>f&&(f=y),Z>d&&(d=Z);l=Math.max(f-g,d-x),l=0!==l?1/l:0}return c(h,u,i,g,x,l),u}function o(t,e,i,r,n,h){let o,a;if(void 0===h&&(h=s(t,{start:e,end:i,size:r})),n===h<0)for(o=e;o<i;o+=r)a=N(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=N(o,t[o],t[o+1],a);return a&&b(a,a.next)&&(L(a),a=a.next),a}function a(t,e){if(!t)return t;e||(e=t);let i,r=t;do{if(i=!1,r.steiner||!b(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(L(r),r=e=r.prev,r===r.next)break;i=!0}}while(i||r!==e);return e}function c(t,e,i,r,n,s,h){if(!t)return;!h&&s&&function(t,e,i,r){let n=t;do{null===n.z&&(n.z=x(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){let e,i,r,n,s,h,o,a,c=1;do{for(n=t,t=null,a=null,r=0;n;){for(r++,h=n,s=0,i=0;i<c&&(s++,h=h.nextZ,h);i++);for(o=c;s>0||o>0&&h;)0!==s&&(0===o||!h||n.z<=h.z)?(e=n,n=n.nextZ,s--):(e=h,h=h.nextZ,o--),a?a.nextZ=e:t=e,e.prevZ=a,a=e;n=h}a.nextZ=null,c*=2}while(r>1)}(n)}(t,r,n,s);let o,m,p=t;for(;t.prev!==t.next;)if(o=t.prev,m=t.next,s?l(t,r,n,s):u(t))e.push(o.i/i),e.push(t.i/i),e.push(m.i/i),L(t),t=m.next,p=m.next;else if((t=m)===p){h?1===h?c(t=f(a(t),e,i),e,i,r,n,s,2):2===h&&d(t,e,i,r,n,s):c(a(t),e,i,r,n,s,1);break}}function u(t){const e=t.prev,i=t,r=t.next;if(w(e,i,r)>=0)return!1;let n=t.next.next;for(;n!==t.prev;){if(y(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&w(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function l(t,e,i,r){const n=t.prev,s=t,h=t.next;if(w(n,s,h)>=0)return!1;const o=n.x<s.x?n.x<h.x?n.x:h.x:s.x<h.x?s.x:h.x,a=n.y<s.y?n.y<h.y?n.y:h.y:s.y<h.y?s.y:h.y,c=n.x>s.x?n.x>h.x?n.x:h.x:s.x>h.x?s.x:h.x,u=n.y>s.y?n.y>h.y?n.y:h.y:s.y>h.y?s.y:h.y,l=x(o,a,e,i,r),f=x(c,u,e,i,r);let d=t.prevZ,m=t.nextZ;for(;d&&d.z>=l&&m&&m.z<=f;){if(d!==t.prev&&d!==t.next&&y(n.x,n.y,s.x,s.y,h.x,h.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,m!==t.prev&&m!==t.next&&y(n.x,n.y,s.x,s.y,h.x,h.y,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&y(n.x,n.y,s.x,s.y,h.x,h.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=f;){if(m!==t.prev&&m!==t.next&&y(n.x,n.y,s.x,s.y,h.x,h.y,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function f(t,e,i){let r=t;do{const n=r.prev,s=r.next.next;!b(n,s)&&E(n,r,r.next,s)&&v(n,s)&&v(s,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(s.i/i),L(r),L(r.next),r=t=s),r=r.next}while(r!==t);return a(r)}function d(t,e,i,r,n,s){let h=t;do{let t=h.next.next;for(;t!==h.prev;){if(h.i!==t.i&&Z(h,t)){let o=k(h,t);return h=a(h,h.next),o=a(o,o.next),c(h,e,i,r,n,s),void c(o,e,i,r,n,s)}t=t.next}h=h.next}while(h!==t)}function m(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){let i=e;const r=t.x,n=t.y;let s,h=-1/0;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){const t=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=r&&t>h){if(h=t,t===r){if(n===i.y)return i;if(n===i.next.y)return i.next}s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!s)return null;if(r===h)return s;const o=s,a=s.x,c=s.y;let u,l=1/0;i=s;do{r>=i.x&&i.x>=a&&r!==i.x&&y(n<c?r:h,n,a,c,n<c?h:r,n,i.x,i.y)&&(u=Math.abs(n-i.y)/(r-i.x),v(i,t)&&(u<l||u===l&&(i.x>s.x||i.x===s.x&&g(s,i)))&&(s=i,l=u)),i=i.next}while(i!==o);return s}(t,e),e){const i=k(e,t);a(e,e.next),a(i,i.next)}}function g(t,e){return w(t.prev,t,e.prev)<0&&w(e.next,t,t.next)<0}function x(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function M(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function y(t,e,i,r,n,s,h,o){return(n-h)*(e-o)-(t-h)*(s-o)>=0&&(t-h)*(r-o)-(i-h)*(e-o)>=0&&(i-h)*(s-o)-(n-h)*(r-o)>=0}function Z(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&E(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(v(t,e)&&v(e,t)&&function(t,e){let i=t,r=!1;const n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(w(t.prev,t,e.prev)||w(t,e.prev,e))||b(t,e)&&w(t.prev,t,t.next)>0&&w(e.prev,e,e.next)>0)}function w(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function E(t,e,i,r){const n=S(w(t,e,i)),s=S(w(t,e,r)),h=S(w(i,r,t)),o=S(w(i,r,e));return n!==s&&h!==o||(!(0!==n||!O(t,i,e))||(!(0!==s||!O(t,r,e))||(!(0!==h||!O(i,t,r))||!(0!==o||!O(i,e,r)))))}function O(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function S(t){return t>0?1:t<0?-1:0}function v(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function k(t,e){const i=new R(t.i,t.x,t.y),r=new R(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function N(t,e,i,r){const n=new R(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function L(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,i,r,n=[]){let s,h;if(8&i)s=(r[3]-t[1])/(e[1]-t[1]),h=3;else if(4&i)s=(r[1]-t[1])/(e[1]-t[1]),h=1;else if(2&i)s=(r[2]-t[0])/(e[0]-t[0]),h=2;else{if(!(1&i))return null;s=(r[0]-t[0])/(e[0]-t[0]),h=0}for(let i=0;i<t.length;i++)n[i]=(1&h)===i?r[h]:s*(e[i]-t[i])+t[i];return n}function I(t,e){let i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}function P(t,e){const i=e.length,r=t.length;if(r>0){let n=!0;for(let s=0;s<i;s++)if(t[r-i+s]!==e[s]){n=!1;break}if(n)return!1}for(let n=0;n<i;n++)t[r+n]=e[n];return!0}function z(t,e){const i=e.length;for(let r=0;r<i;r++)t[r]=e[r]}function C(t,e,i,r,n=[]){const s=r+e*i;for(let e=0;e<i;e++)n[e]=t[s+e];return n}function T(t,e){const{size:i=2,broken:r=!1,gridResolution:n=10,gridOffset:s=[0,0],startIndex:h=0,endIndex:o=t.length}=e||{},a=(o-h)/i;let c=[];const u=[c],l=C(t,0,i,h);let f,d;const m=Y(l,n,s,[]),p=[];P(c,l);for(let e=1;e<a;e++){for(f=C(t,e,i,h,f),d=I(f,m);d;){A(l,f,d,m,p);const t=I(p,m);t&&(A(l,p,t,m,p),d=t),P(c,p),z(l,p),W(m,n,d),r&&c.length>i&&(c=[],u.push(c),P(c,l)),d=I(f,m)}P(c,f),z(l,f)}return r?u:u[0]}function q(t,e){for(let i=0;i<e.length;i++)t.push(e[i]);return t}function j(t,e=null,i){if(!t.length)return[];const{size:r=2,gridResolution:n=10,gridOffset:s=[0,0],edgeTypes:h=!1}=i||{},o=[],a=[{pos:t,types:h?new Array(t.length/r).fill(1):null,holes:e||[]}],c=[[],[]];let u=[];for(;a.length;){const{pos:t,types:e,holes:i}=a.shift();F(t,r,i[0]||t.length,c),u=Y(c[0],n,s,u);const l=I(c[1],u);if(l){let n=X(t,e,r,0,i[0]||t.length,u,l);const s={pos:n[0].pos,types:n[0].types,holes:[]},o={pos:n[1].pos,types:n[1].types,holes:[]};a.push(s,o);for(let a=0;a<i.length;a++)n=X(t,e,r,i[a],i[a+1]||t.length,u,l),n[0]&&(s.holes.push(s.pos.length),s.pos=q(s.pos,n[0].pos),h&&(s.types=q(s.types,n[0].types))),n[1]&&(o.holes.push(o.pos.length),o.pos=q(o.pos,n[1].pos),h&&(o.types=q(o.types,n[1].types)))}else{const r={positions:t};h&&(r.edgeTypes=e),i.length&&(r.holeIndices=i),o.push(r)}}return o}function X(t,e,i,r,n,s,h){const o=(n-r)/i,a=[],c=[],u=[],l=[],f=[];let d,m,p;const g=C(t,o-1,i,r);let x=Math.sign(8&h?g[1]-s[3]:g[0]-s[2]),M=e&&e[o-1],y=0,Z=0;for(let n=0;n<o;n++)d=C(t,n,i,r,d),m=Math.sign(8&h?d[1]-s[3]:d[0]-s[2]),p=e&&e[r/i+n],m&&x&&x!==m&&(A(g,d,h,s,f),P(a,f)&&u.push(M),P(c,f)&&l.push(M)),m<=0?(P(a,d)&&u.push(p),y-=m):u.length&&(u[u.length-1]=0),m>=0?(P(c,d)&&l.push(p),Z+=m):l.length&&(l[l.length-1]=0),z(g,d),x=m,M=p;return[y?{pos:a,types:e&&u}:null,Z?{pos:c,types:e&&l}:null]}function Y(t,e,i,r){const n=Math.floor((t[0]-i[0])/e)*e+i[0],s=Math.floor((t[1]-i[1])/e)*e+i[1];return r[0]=n,r[1]=s,r[2]=n+e,r[3]=s+e,r}function W(t,e,i){8&i?(t[1]+=e,t[3]+=e):4&i?(t[1]-=e,t[3]-=e):2&i?(t[0]+=e,t[2]+=e):1&i&&(t[0]-=e,t[2]-=e)}function F(t,e,i,r){let n=1/0,s=-1/0,h=1/0,o=-1/0;for(let r=0;r<i;r+=e){const e=t[r],i=t[r+1];n=e<n?e:n,s=e>s?e:s,h=i<h?i:h,o=i>o?i:o}return r[0][0]=n,r[0][1]=h,r[1][0]=s,r[1][1]=o,r}function _(t,e){const{size:i=2,startIndex:r=0,endIndex:n=t.length,normalize:s=!0}=e||{},h=t.slice(r,n);U(h,i,0,n-r);const o=T(h,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const t of o)K(t,i);return o}function D(t,e=null,i){const{size:r=2,normalize:n=!0,edgeTypes:s=!1}=i||{};e=e||[];const h=[],o=[];let a=0,c=0;for(let n=0;n<=e.length;n++){const s=e[n]||t.length,u=c,l=V(t,r,a,s);for(let e=l;e<s;e++)h[c++]=t[e];for(let e=a;e<l;e++)h[c++]=t[e];U(h,r,u,c),B(h,r,u,c,null==i?void 0:i.maxLatitude),a=s,o[n]=c}o.pop();const u=j(h,o,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(n)for(const t of u)K(t.positions,r);return u}function V(t,e,i,r){let n=-1,s=-1;for(let h=i+1;h<r;h+=e){const e=Math.abs(t[h]);e>n&&(n=e,s=h-1)}return s}function B(t,e,i,r,n=85.051129){const s=t[i],h=t[r-e];if(Math.abs(s-h)>180){const r=C(t,0,e,i);r[0]+=360*Math.round((h-s)/360),P(t,r),r[1]=Math.sign(r[1])*n,P(t,r),r[0]=s,P(t,r)}}function U(t,e,i,r){let n,s=t[0];for(let h=i;h<r;h+=e){n=t[h];const e=n-s;(e>180||e<-180)&&(n-=360*Math.round(e/360)),t[h]=s=n}}function K(t,e){let i;const r=t.length/e;for(let n=0;n<r&&(i=t[n*e],(i+180)%360==0);n++);const n=360*-Math.round(i/360);if(0!==n)for(let i=0;i<r;i++)t[i*e]+=n}},7179:(t,e,i)=>{i.d(e,{o:()=>d});const r=Math.PI/180,n=864e5,s=2440588,h=2451545,o=23.4397*r,a=357.5291,c=.98560028,u=280.147,l=360.9856235;function f(t,e,i){const o=r*-i,f=r*e,d=function(t){return function(t){const e="number"==typeof t?t:t.getTime();return e/n-.5+s}(t)-h}(t),M=function(t){const e=function(t){const e=t,i=r*(1.9148*Math.sin(e)+.02*Math.sin(2*e)+3e-4*Math.sin(3*e));return e+i+102.9372*r+Math.PI}((i=t,r*(a+c*i)));var i;return{declination:p(e,0),rightAscension:m(e,0)}}(d),y=function(t,e){return r*(u+l*t)-e}(d,o)-M.rightAscension;return{azimuth:g(y,f,M.declination),altitude:x(y,f,M.declination)}}function d(t,e,i){const{azimuth:r,altitude:n}=f(t,e,i);return[Math.sin(r)*Math.cos(n),Math.cos(r)*Math.cos(n),-Math.sin(n)]}function m(t,e){const i=t;return Math.atan2(Math.sin(i)*Math.cos(o)-Math.tan(e)*Math.sin(o),Math.cos(i))}function p(t,e){const i=t;return Math.asin(Math.sin(e)*Math.cos(o)+Math.cos(e)*Math.sin(o)*Math.sin(i))}function g(t,e,i){const r=t,n=e,s=i;return Math.atan2(Math.sin(r),Math.cos(r)*Math.sin(n)-Math.tan(s)*Math.cos(n))}function x(t,e,i){const r=t,n=e,s=i;return Math.asin(Math.sin(n)*Math.sin(s)+Math.cos(n)*Math.cos(s)*Math.cos(r))}},7013:(t,e,i)=>{i.d(e,{LO:()=>y,DW:()=>Y,eG:()=>N,Lu:()=>I,Xg:()=>T,if:()=>D,sj:()=>P,zX:()=>j,ro:()=>k,up:()=>V,Bf:()=>S,c7:()=>A,wl:()=>R,lf:()=>L,w5:()=>E,QA:()=>W,CT:()=>C,sO:()=>b,NC:()=>v,es:()=>O,aW:()=>z,EO:()=>w});var r=i(4572),n=i(8333);function s(t,e){const i=(0,n.fF)([],e,t);return(0,n.bA)(i,i,1/i[3]),i}function h(t,e){const i=t%e;return i<0?e+i:i}function o(t,e,i){return t<e?e:t>i?i:t}const a=Math.log2||function(t){return Math.log(t)*Math.LOG2E};var c=i(5975),u=i(1437),l=i(7160);function f(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const d=Math.PI,m=d/4,p=d/180,g=180/d,x=512,M=4003e4,y=85.051129,Z=1.5;function w(t){return Math.pow(2,t)}function b(t){return a(t)}function E(t){const[e,i]=t;f(Number.isFinite(e)),f(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude");const r=i*p;return[x*(e*p+d)/(2*d),x*(d+Math.log(Math.tan(m+.5*r)))/(2*d)]}function O(t){const[e,i]=t,r=e/x*(2*d)-d,n=2*(Math.atan(Math.exp(i/x*(2*d)-d))-m);return[r*g,n*g]}function S(t){const{latitude:e}=t;f(Number.isFinite(e));const i=Math.cos(e*p);return b(M*i)-9}function v(t){return 12790407194604047e-21/Math.cos(t*p)}function k(t){const{latitude:e,longitude:i,highPrecision:r=!1}=t;f(Number.isFinite(e)&&Number.isFinite(i));const n=Math.cos(e*p),s=512/360,h=s/n,o=12790407194604047e-21/n,a={unitsPerMeter:[o,o,o],metersPerUnit:[1/o,1/o,1/o],unitsPerDegree:[s,h,o],degreesPerUnit:[.703125,1/h,1/o]};if(r){const t=p*Math.tan(e*p)/n,i=s*t/2,r=12790407194604047e-21*t,c=r/h*o;a.unitsPerDegree2=[0,i,r],a.unitsPerMeter2=[c,0,c]}return a}function N(t,e){const[i,r,n]=t,[s,h,o]=e,{unitsPerMeter:a,unitsPerMeter2:c}=k({longitude:i,latitude:r,highPrecision:!0}),u=E(t);u[0]+=s*(a[0]+c[0]*h),u[1]+=h*(a[1]+c[1]*h);const l=O(u),f=(n||0)+(o||0);return Number.isFinite(n)||Number.isFinite(o)?[l[0],l[1],f]:l}function L(t){const{height:e,pitch:i,bearing:r,altitude:n,scale:s,center:h}=t,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];c.Iu(o,o,[0,0,-n]),c.lM(o,o,-i*p),c.jI(o,o,r*p);const a=s/e;return c.bA(o,o,[a,a,a]),h&&c.Iu(o,o,l.tk([],h)),o}function R(t){const{width:e,height:i,altitude:r,pitch:n=0,offset:s,center:h,scale:a,nearZMultiplier:c=1,farZMultiplier:u=1}=t;let{fovy:l=I(Z)}=t;void 0!==r&&(l=I(r));const f=l*p,d=n*p,m=P(l);let g=m;h&&(g+=h[2]*a/Math.cos(d)/i);const x=f*(.5+(s?s[1]:0)/i),M=Math.sin(x)*g/Math.sin(o(Math.PI/2-d-x,.01,Math.PI-.01)),y=Math.sin(d)*M+g,w=10*g;return{fov:f,aspect:e/i,focalDistance:m,near:c,far:Math.min(y*u,w)}}function A(t){const{fov:e,aspect:i,near:r,far:n}=R(t);return c.G3([],e,i,r,n)}function I(t){return 2*Math.atan(.5/t)*g}function P(t){return.5/Math.tan(.5*t*p)}function z(t,e){const[i,r,n=0]=t;return f(Number.isFinite(i)&&Number.isFinite(r)&&Number.isFinite(n)),s(e,[i,r,n,1])}function C(t,e,i=0){const[r,n,h]=t;if(f(Number.isFinite(r)&&Number.isFinite(n),"invalid pixel coordinate"),Number.isFinite(h)){return s(e,[r,n,h,1])}const o=s(e,[r,n,0,1]),a=s(e,[r,n,1,1]),c=o[2],l=a[2],d=c===l?0:((i||0)-c)/(l-c);return u.t7([],o,a,d)}function T(t){const{width:e,height:i,bounds:r,minExtent:n=0,maxZoom:s=24,offset:h=[0,0]}=t,[[c,u],[l,d]]=r,m=function(t=0){if("number"==typeof t)return{top:t,bottom:t,left:t,right:t};return f(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),p=E([c,o(d,-y,y)]),g=E([l,o(u,-y,y)]),x=[Math.max(Math.abs(g[0]-p[0]),n),Math.max(Math.abs(g[1]-p[1]),n)],M=[e-m.left-m.right-2*Math.abs(h[0]),i-m.top-m.bottom-2*Math.abs(h[1])];f(M[0]>0&&M[1]>0);const Z=M[0]/x[0],w=M[1]/x[1],b=(m.right-m.left)/2/Z,S=(m.top-m.bottom)/2/w,v=O([(g[0]+p[0])/2+b,(g[1]+p[1])/2+S]),k=Math.min(s,a(Math.abs(Math.min(Z,w))));return f(Number.isFinite(k)),{longitude:v[0],latitude:v[1],zoom:k}}const q=Math.PI/180;function j(t,e=0){const{width:i,height:r,unproject:n}=t,s={targetZ:e},h=n([0,r],s),o=n([i,r],s);let a,c;return(t.fovy?.5*t.fovy*q:Math.atan(.5/t.altitude))>(90-t.pitch)*q-.01?(a=X(t,0,e),c=X(t,i,e)):(a=n([0,0],s),c=n([i,0],s)),[h,o,c,a]}function X(t,e,i){const{pixelUnprojectionMatrix:r}=t,n=s(r,[e,0,1,1]),h=s(r,[e,t.height,1,1]),o=(i*t.distanceScales.unitsPerMeter[2]-n[2])/(h[2]-n[2]),a=O(u.t7([],n,h,o));return a.push(i),a}class Y{constructor(t={width:1,height:1}){(0,r.Z)(this,"latitude",void 0),(0,r.Z)(this,"longitude",void 0),(0,r.Z)(this,"zoom",void 0),(0,r.Z)(this,"pitch",void 0),(0,r.Z)(this,"bearing",void 0),(0,r.Z)(this,"altitude",void 0),(0,r.Z)(this,"fovy",void 0),(0,r.Z)(this,"meterOffset",void 0),(0,r.Z)(this,"center",void 0),(0,r.Z)(this,"width",void 0),(0,r.Z)(this,"height",void 0),(0,r.Z)(this,"scale",void 0),(0,r.Z)(this,"distanceScales",void 0),(0,r.Z)(this,"viewMatrix",void 0),(0,r.Z)(this,"projectionMatrix",void 0),(0,r.Z)(this,"viewProjectionMatrix",void 0),(0,r.Z)(this,"pixelProjectionMatrix",void 0),(0,r.Z)(this,"pixelUnprojectionMatrix",void 0),(0,r.Z)(this,"equals",(t=>t instanceof Y&&(t.width===this.width&&t.height===this.height&&c.fS(t.projectionMatrix,this.projectionMatrix)&&c.fS(t.viewMatrix,this.viewMatrix)))),(0,r.Z)(this,"project",((t,e={})=>{const{topLeft:i=!0}=e,r=z(this.projectPosition(t),this.pixelProjectionMatrix),[n,s]=r,h=i?s:this.height-s;return 2===t.length?[n,h]:[n,h,r[2]]})),(0,r.Z)(this,"unproject",((t,e={})=>{const{topLeft:i=!0,targetZ:r}=e,[n,s,h]=t,o=i?s:this.height-s,a=r&&r*this.distanceScales.unitsPerMeter[2],c=C([n,o,h],this.pixelUnprojectionMatrix,a),[u,l,f]=this.unprojectPosition(c);return Number.isFinite(h)?[u,l,f]:Number.isFinite(r)?[u,l,r]:[u,l]})),(0,r.Z)(this,"projectPosition",(t=>{const[e,i]=E(t);return[e,i,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]})),(0,r.Z)(this,"unprojectPosition",(t=>{const[e,i]=O(t);return[e,i,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}));let{width:e,height:i,altitude:n=null,fovy:s=null}=t;const{latitude:h=0,longitude:o=0,zoom:a=0,pitch:u=0,bearing:f=0,position:d=null,nearZMultiplier:m=.02,farZMultiplier:p=1.01}=t;e=e||1,i=i||1,null===s&&null===n?(n=Z,s=I(n)):null===s?s=I(n):null===n&&(n=P(s));const g=w(a);n=Math.max(.75,n);const x=k({longitude:o,latitude:h}),M=E([o,h]);M.push(0),d&&l.IH(M,M,l.dC([],d,x.unitsPerMeter)),this.projectionMatrix=A({width:e,height:i,scale:g,center:M,pitch:u,fovy:s,nearZMultiplier:m,farZMultiplier:p}),this.viewMatrix=L({height:i,scale:g,center:M,pitch:u,bearing:f,altitude:n}),this.width=e,this.height=i,this.scale=g,this.latitude=h,this.longitude=o,this.zoom=a,this.pitch=u,this.bearing=f,this.altitude=n,this.fovy=s,this.center=M,this.meterOffset=d||[0,0,0],this.distanceScales=x,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:t,height:e,projectionMatrix:i,viewMatrix:r}=this,n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];c.Jp(n,n,i),c.Jp(n,n,r),this.viewProjectionMatrix=n;const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];c.bA(s,s,[t/2,-e/2,1]),c.Iu(s,s,[1,-1,0]),c.Jp(s,s,n);const h=c.U_([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s);if(!h)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=s,this.pixelUnprojectionMatrix=h}projectFlat(t){return E(t)}unprojectFlat(t){return O(t)}getMapCenterByLngLatPosition({lngLat:t,pos:e}){const i=C(e,this.pixelUnprojectionMatrix),r=E(t),n=u.IH([],r,u.tk([],i));return O(u.IH([],this.center,n))}fitBounds(t,e={}){const{width:i,height:r}=this,{longitude:n,latitude:s,zoom:h}=T(Object.assign({width:i,height:r,bounds:t},e));return new Y({width:i,height:r,longitude:n,latitude:s,zoom:h})}getBounds(t){const e=this.getBoundingRegion(t),i=Math.min(...e.map((t=>t[0]))),r=Math.max(...e.map((t=>t[0])));return[[i,Math.min(...e.map((t=>t[1])))],[r,Math.max(...e.map((t=>t[1])))]]}getBoundingRegion(t={}){return j(this,t.z||0)}getLocationAtPoint({lngLat:t,pos:e}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:e})}}function W(t){const{width:e,height:i,pitch:r=0}=t;let{longitude:n,latitude:s,zoom:o,bearing:c=0}=t;(n<-180||n>180)&&(n=h(n+180,360)-180),(c<-180||c>180)&&(c=h(c+180,360)-180);const u=a(i/512);if(o<=u)o=u,s=0;else{const t=i/2/Math.pow(2,o),e=O([0,t])[1];if(s<e)s=e;else{const e=O([0,512-t])[1];s>e&&(s=e)}}return{width:e,height:i,longitude:n,latitude:s,zoom:o,pitch:r,bearing:c}}const F=["longitude","latitude","zoom"],_={curve:1.414,speed:1.2};function D(t,e,i,r){const{startZoom:n,startCenterXY:s,uDelta:h,w0:o,u1:a,S:c,rho:l,rho2:f,r0:d}=B(t,e,r);if(a<.01){const r={};for(const n of F){const s=t[n],h=e[n];r[n]=(m=i)*h+(1-m)*s}return r}var m;const p=i*c,g=Math.cosh(d)/Math.cosh(d+l*p),x=o*((Math.cosh(d)*Math.tanh(d+l*p)-Math.sinh(d))/f)/a,M=n+b(1/g),y=u.bA([],h,x);u.IH(y,y,s);const Z=O(y);return{longitude:Z[0],latitude:Z[1],zoom:M}}function V(t,e,i){const r={..._,...i},{screenSpeed:n,speed:s,maxDuration:h}=r,{S:o,rho:a}=B(t,e,r),c=1e3*o;let u;return u=Number.isFinite(n)?c/(n/a):c/s,Number.isFinite(h)&&u>h?0:u}function B(t,e,i){const r=(i=Object.assign({},_,i)).curve,n=t.zoom,s=[t.longitude,t.latitude],h=w(n),o=e.zoom,a=[e.longitude,e.latitude],c=w(o-n),l=E(s),f=E(a),d=u.lu([],f,l),m=Math.max(t.width,t.height),p=m/c,g=u.kE(d)*h,x=Math.max(g,.01),M=r*r,y=(p*p-m*m+M*M*x*x)/(2*m*M*x),Z=(p*p-m*m-M*M*x*x)/(2*p*M*x),b=Math.log(Math.sqrt(y*y+1)-y),O=Math.log(Math.sqrt(Z*Z+1)-Z);return{startZoom:n,startCenterXY:l,uDelta:d,w0:m,u1:g,S:(O-b)/r,rho:r,rho2:M,r0:b,r1:O}}},964:(t,e,i)=>{i.r(e),i.d(e,{Euler:()=>x,Matrix3:()=>h.Z,Matrix4:()=>o.Z,Pose:()=>M,Quaternion:()=>a.Z,SphericalCoordinates:()=>c.Z,Vector2:()=>r.Z,Vector3:()=>n.Z,Vector4:()=>s.Z,_Euler:()=>x,_MathUtils:()=>y.Z,_Pose:()=>M,_SphericalCoordinates:()=>c.Z,acos:()=>f.Kh,asin:()=>f.ZR,assert:()=>Z.Z,atan:()=>f.z4,clamp:()=>f.uZ,clone:()=>f.d9,config:()=>f.vc,configure:()=>f.jQ,cos:()=>f.mC,degrees:()=>f.RW,equals:()=>f.fS,exactEquals:()=>f.I6,formatValue:()=>f.Bw,isArray:()=>f.kJ,lerp:()=>f.t7,radians:()=>f.uR,sin:()=>f.O$,tan:()=>f.OR,toDegrees:()=>f.Ux,toRadians:()=>f.Yr,withEpsilon:()=>f.BJ});var r=i(7069),n=i(3855),s=i(1849),h=i(540),o=i(5451),a=i(3037),c=i(7858),u=i(4572),l=i(6357),f=i(4034),d=i(6281);const m="Unknown Euler angle order",p=.99999;var g;!function(t){t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ"}(g||(g={}));class x extends l.Z{static get ZYX(){return g.ZYX}static get YXZ(){return g.YXZ}static get XZY(){return g.XZY}static get ZXY(){return g.ZXY}static get YZX(){return g.YZX}static get XYZ(){return g.XYZ}static get RollPitchYaw(){return g.ZYX}static get DefaultOrder(){return g.ZYX}static get RotationOrders(){return g}static rotationOrder(t){return g[t]}get ELEMENTS(){return 4}constructor(t=0,e=0,i=0,r=x.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(t,e,i,r)}fromQuaternion(t){const[e,i,r,n]=t,s=i*i,h=-2*(s+r*r)+1,o=2*(e*i+n*r);let a=-2*(e*r-n*i);const c=2*(i*r+n*e),u=-2*(e*e+s)+1;a=a>1?1:a,a=a<-1?-1:a;const l=Math.atan2(c,u),f=Math.asin(a),d=Math.atan2(o,h);return this.set(l,f,d,x.RollPitchYaw)}fromObject(t){throw new Error("not implemented")}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}set(t=0,e=0,i=0,r){return this[0]=t,this[1]=e,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return(t=this[3])>=0&&t<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var t}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}toArray4(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}toVector3(t=[-0,-0,-0]){return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}get x(){return this[0]}set x(t){this[0]=(0,d.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,d.u5)(t)}get z(){return this[2]}set z(t){this[2]=(0,d.u5)(t)}get alpha(){return this[0]}set alpha(t){this[0]=(0,d.u5)(t)}get beta(){return this[1]}set beta(t){this[1]=(0,d.u5)(t)}get gamma(){return this[2]}set gamma(t){this[2]=(0,d.u5)(t)}get phi(){return this[0]}set phi(t){this[0]=(0,d.u5)(t)}get theta(){return this[1]}set theta(t){this[1]=(0,d.u5)(t)}get psi(){return this[2]}set psi(t){this[2]=(0,d.u5)(t)}get roll(){return this[0]}set roll(t){this[0]=(0,d.u5)(t)}get pitch(){return this[1]}set pitch(t){this[1]=(0,d.u5)(t)}get yaw(){return this[2]}set yaw(t){this[2]=(0,d.u5)(t)}get order(){return this[3]}set order(t){this[3]=function(t){if(t<0&&t>=6)throw new Error(m);return t}(t)}fromVector3(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}fromArray(t,e=0){return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}fromRollPitchYaw(t,e,i){return this.set(t,e,i,g.ZYX)}fromRotationMatrix(t,e=x.DefaultOrder){return this._fromRotationMatrix(t,e),this.check()}getRotationMatrix(t){return this._getRotationMatrix(t)}getQuaternion(){const t=new a.Z;switch(this[4]){case g.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case g.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case g.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case g.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case g.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case g.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(m)}}_fromRotationMatrix(t,e=x.DefaultOrder){const i=t[0],r=t[4],n=t[8],s=t[1],h=t[5],o=t[9],a=t[2],c=t[6],u=t[10];switch(e=e||this[3]){case x.XYZ:this[1]=Math.asin((0,f.uZ)(n,-1,1)),Math.abs(n)<p?(this[0]=Math.atan2(-o,u),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(c,h),this[2]=0);break;case x.YXZ:this[0]=Math.asin(-(0,f.uZ)(o,-1,1)),Math.abs(o)<p?(this[1]=Math.atan2(n,u),this[2]=Math.atan2(s,h)):(this[1]=Math.atan2(-a,i),this[2]=0);break;case x.ZXY:this[0]=Math.asin((0,f.uZ)(c,-1,1)),Math.abs(c)<p?(this[1]=Math.atan2(-a,u),this[2]=Math.atan2(-r,h)):(this[1]=0,this[2]=Math.atan2(s,i));break;case x.ZYX:this[1]=Math.asin(-(0,f.uZ)(a,-1,1)),Math.abs(a)<p?(this[0]=Math.atan2(c,u),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,h));break;case x.YZX:this[2]=Math.asin((0,f.uZ)(s,-1,1)),Math.abs(s)<p?(this[0]=Math.atan2(-o,h),this[1]=Math.atan2(-a,i)):(this[0]=0,this[1]=Math.atan2(n,u));break;case x.XZY:this[2]=Math.asin(-(0,f.uZ)(r,-1,1)),Math.abs(r)<p?(this[0]=Math.atan2(c,h),this[1]=Math.atan2(n,i)):(this[0]=Math.atan2(-o,u),this[1]=0);break;default:throw new Error(m)}return this[3]=e,this}_getRotationMatrix(t){const e=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,n=this.z,s=Math.cos(i),h=Math.cos(r),o=Math.cos(n),a=Math.sin(i),c=Math.sin(r),u=Math.sin(n);switch(this[3]){case x.XYZ:{const t=s*o,i=s*u,r=a*o,n=a*u;e[0]=h*o,e[4]=-h*u,e[8]=c,e[1]=i+r*c,e[5]=t-n*c,e[9]=-a*h,e[2]=n-t*c,e[6]=r+i*c,e[10]=s*h;break}case x.YXZ:{const t=h*o,i=h*u,r=c*o,n=c*u;e[0]=t+n*a,e[4]=r*a-i,e[8]=s*c,e[1]=s*u,e[5]=s*o,e[9]=-a,e[2]=i*a-r,e[6]=n+t*a,e[10]=s*h;break}case x.ZXY:{const t=h*o,i=h*u,r=c*o,n=c*u;e[0]=t-n*a,e[4]=-s*u,e[8]=r+i*a,e[1]=i+r*a,e[5]=s*o,e[9]=n-t*a,e[2]=-s*c,e[6]=a,e[10]=s*h;break}case x.ZYX:{const t=s*o,i=s*u,r=a*o,n=a*u;e[0]=h*o,e[4]=r*c-i,e[8]=t*c+n,e[1]=h*u,e[5]=n*c+t,e[9]=i*c-r,e[2]=-c,e[6]=a*h,e[10]=s*h;break}case x.YZX:{const t=s*h,i=s*c,r=a*h,n=a*c;e[0]=h*o,e[4]=n-t*u,e[8]=r*u+i,e[1]=u,e[5]=s*o,e[9]=-a*o,e[2]=-c*o,e[6]=i*u+r,e[10]=t-n*u;break}case x.XZY:{const t=s*h,i=s*c,r=a*h,n=a*c;e[0]=h*o,e[4]=-u,e[8]=c*o,e[1]=t*u+n,e[5]=s*o,e[9]=i*u-r,e[2]=r*u-i,e[6]=a*o,e[10]=n*u+t;break}default:throw new Error(m)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}toQuaternion(){const t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),n=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch),h=t*i*n+e*r*s,o=t*r*n-e*i*s,c=t*i*s+e*r*n,u=e*i*n-t*r*s;return new a.Z(o,c,u,h)}}class M{constructor({x:t=0,y:e=0,z:i=0,roll:r=0,pitch:s=0,yaw:h=0,position:o,orientation:a}={}){(0,u.Z)(this,"position",void 0),(0,u.Z)(this,"orientation",void 0),Array.isArray(o)&&3===o.length?this.position=new n.Z(o):this.position=new n.Z(t,e,i),Array.isArray(a)&&4===a.length?this.orientation=new x(a,a[3]):this.orientation=new x(r,s,h,x.RollPitchYaw)}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get z(){return this.position.z}set z(t){this.position.z=t}get roll(){return this.orientation.roll}set roll(t){this.orientation.roll=t}get pitch(){return this.orientation.pitch}set pitch(t){this.orientation.pitch=t}get yaw(){return this.orientation.yaw}set yaw(t){this.orientation.yaw=t}getPosition(){return this.position}getOrientation(){return this.orientation}equals(t){return!!t&&(this.position.equals(t.position)&&this.orientation.equals(t.orientation))}exactEquals(t){return!!t&&(this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation))}getTransformationMatrix(){const t=Math.sin(this.roll),e=Math.sin(this.pitch),i=Math.sin(this.yaw),r=Math.cos(this.roll),n=Math.cos(this.pitch),s=Math.cos(this.yaw);return(new o.Z).setRowMajor(s*n,-i*r+s*e*t,i*t+s*e*r,this.x,i*n,s*r+i*e*t,-s*t+i*e*r,this.y,-e,n*t,n*r,this.z,0,0,0,1)}getTransformationMatrixFromPose(t){return(new o.Z).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}getTransformationMatrixToPose(t){return(new o.Z).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}var y=i(9057),Z=i(394)}}]);