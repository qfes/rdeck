"use strict";(self.webpackChunkrdeck=self.webpackChunkrdeck||[]).push([[627],{6357:(t,e,i)=>{i.d(e,{Z:()=>n});var r=i(4034);class n extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=t[i+e];return this.check()}toArray(t=[],e=0){for(let i=0;i<this.ELEMENTS;++i)t[e+i]=this[i];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:(0,r.kJ)(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(r.vc)}formatString(t){let e="";for(let i=0;i<this.ELEMENTS;++i)e+=(i>0?", ":"")+(0,r.Bw)(this[i],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!(0,r.fS)(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,i){if(void 0===i)return this.lerp(this,t,e);for(let r=0;r<this.ELEMENTS;++r){const n=t[r];this[r]=n+i*(e[r]-n)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t[i]),e[i]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(r.vc.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],t),e);return this.check()}get elements(){return this}}},1e3:(t,e,i)=>{i.d(e,{Z:()=>h});var r=i(6357),n=i(6281),s=i(4034);class h extends r.Z{toString(){let t="[";if(s.vc.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let i=0;i<this.RANK;++i)t+=" ".concat(this[i*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,i){return this[e*this.RANK+t]=(0,n.u5)(i),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const i=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[i+t];return e}setColumn(t,e){const i=t*this.RANK;for(let t=0;t<this.RANK;++t)this[i+t]=e[t];return this}}},9521:(t,e,i)=>{i.d(e,{Z:()=>h});var r=i(6357),n=i(6281),s=i(394);class h extends r.Z{get x(){return this[0]}set x(t){this[0]=(0,n.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,n.u5)(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-t[i];e+=r*r}return(0,n.u5)(e)}dot(t){let e=0;for(let i=0;i<this.ELEMENTS;++i)e+=this[i]*t[i];return(0,n.u5)(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return(0,s.Z)(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,n.u5)(this[t])}setComponent(t,e){return(0,s.Z)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}},540:(t,e,i)=>{i.d(e,{Z:()=>l});var r,n=i(1e3),s=i(6281),h=i(1031),o=i(5600),a=i(1437),u=i(7160);!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"}(r||(r={}));const c=Object.freeze([1,0,0,0,1,0,0,0,1]);class l extends n.Z{static get IDENTITY(){return function(){d||(d=new l,Object.freeze(d));return d}()}static get ZERO(){return function(){f||(f=new l([0,0,0,0,0,0,0,0,0]),Object.freeze(f));return f}()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return r}constructor(t,...e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):e.length>0?this.copy([t,...e]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(c)}fromObject(t){return this.check()}fromQuaternion(t){return o.en(this,t),this.check()}set(t,e,i,r,n,s,h,o,a){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this[4]=n,this[5]=s,this[6]=h,this[7]=o,this[8]=a,this.check()}setRowMajor(t,e,i,r,n,s,h,o,a){return this[0]=t,this[1]=r,this[2]=h,this[3]=e,this[4]=n,this[5]=o,this[6]=i,this[7]=s,this[8]=a,this.check()}determinant(){return o.GH(this)}transpose(){return o.p4(this,this),this.check()}invert(){return o.U_(this,this),this.check()}multiplyLeft(t){return o.Jp(this,t,this),this.check()}multiplyRight(t){return o.Jp(this,this,t),this.check()}rotate(t){return o.U1(this,this,t),this.check()}scale(t){return Array.isArray(t)?o.bA(this,this,t):o.bA(this,this,[t,t]),this.check()}translate(t){return o.Iu(this,this,t),this.check()}transform(t,e){let i;switch(t.length){case 2:i=a.kK(e||[-0,-0],t,this);break;case 3:i=u.kK(e||[-0,-0,-0],t,this);break;case 4:i=(0,h._x)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,s.IL)(i,t.length),i}transformVector(t,e){return this.transform(t,e)}transformVector2(t,e){return this.transform(t,e)}transformVector3(t,e){return this.transform(t,e)}}let f,d},5451:(t,e,i)=>{i.d(e,{Z:()=>x});var r,n=i(1e3),s=i(6281),h=i(1031),o=i(5975),a=i(1437),u=i(7160),c=i(8333);!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(r||(r={}));const l=45*Math.PI/180,f=1,d=.1,m=500,p=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class x extends n.Z{static get IDENTITY(){return function(){y||(y=new x,Object.freeze(y));return y}()}static get ZERO(){return function(){g||(g=new x([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(g));return g}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return r}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,i,r,n,s,h,o,a,u,c,l,f,d,m,p){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this[4]=n,this[5]=s,this[6]=h,this[7]=o,this[8]=a,this[9]=u,this[10]=c,this[11]=l,this[12]=f,this[13]=d,this[14]=m,this[15]=p,this.check()}setRowMajor(t,e,i,r,n,s,h,o,a,u,c,l,f,d,m,p){return this[0]=t,this[1]=n,this[2]=a,this[3]=f,this[4]=e,this[5]=s,this[6]=u,this[7]=d,this[8]=i,this[9]=h,this[10]=c,this[11]=m,this[12]=r,this[13]=o,this[14]=l,this[15]=p,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(p)}fromObject(t){return this.check()}fromQuaternion(t){return o.en(this,t),this.check()}frustum(t){const{left:e,right:i,bottom:r,top:n,near:s=d,far:h=m}=t;return h===1/0?function(t,e,i,r,n,s){const h=2*s/(i-e),o=2*s/(n-r),a=(i+e)/(i-e),u=(n+r)/(n-r),c=-1,l=-1,f=-2*s;t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=a,t[9]=u,t[10]=c,t[11]=l,t[12]=0,t[13]=0,t[14]=f,t[15]=0}(this,e,i,r,n,s):o.oy(this,e,i,r,n,s,h),this.check()}lookAt(t){const{eye:e,center:i=[0,0,0],up:r=[0,1,0]}=t;return o.zB(this,e,i,r),this.check()}ortho(t){const{left:e,right:i,bottom:r,top:n,near:s=d,far:h=m}=t;return o.M5(this,e,i,r,n,s,h),this.check()}orthographic(t){const{fovy:e=l,aspect:i=f,focalDistance:r=1,near:n=d,far:s=m}=t;M(e);const h=e/2,o=r*Math.tan(h),a=o*i;return this.ortho({left:-a,right:a,bottom:-o,top:o,near:n,far:s})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:i=1,near:r=.1,far:n=500}=t;return M(e),o.G3(this,e,i,r,n),this.check()}determinant(){return o.GH(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const i=this.getScale(e),r=1/i[0],n=1/i[1],s=1/i[2];return t[0]=this[0]*r,t[1]=this[1]*n,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*n,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*n,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const i=this.getScale(e),r=1/i[0],n=1/i[1],s=1/i[2];return t[0]=this[0]*r,t[1]=this[1]*n,t[2]=this[2]*s,t[3]=this[4]*r,t[4]=this[5]*n,t[5]=this[6]*s,t[6]=this[8]*r,t[7]=this[9]*n,t[8]=this[10]*s,t}transpose(){return o.p4(this,this),this.check()}invert(){return o.U_(this,this),this.check()}multiplyLeft(t){return o.Jp(this,t,this),this.check()}multiplyRight(t){return o.Jp(this,this,t),this.check()}rotateX(t){return o.lM(this,this,t),this.check()}rotateY(t){return o.uD(this,this,t),this.check()}rotateZ(t){return o.jI(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return o.U1(this,this,t,e),this.check()}scale(t){return o.bA(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return o.Iu(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=c.fF(e||[-0,-0,-0,-0],t,this),(0,s.IL)(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:i}=t;let r;switch(i){case 2:r=a.fF(e||[-0,-0],t,this);break;case 3:r=u.fF(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,s.IL)(r,t.length),r}transformAsVector(t,e){let i;switch(t.length){case 2:i=(0,h.pb)(e||[-0,-0],t,this);break;case 3:i=(0,h.pL)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,s.IL)(i,t.length),i}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,i){return this.identity().translate([t,e,i])}}let g,y;function M(t){if(t>2*Math.PI)throw Error("expected radians")}},3037:(t,e,i)=>{i.d(e,{Z:()=>u});var r=i(6357),n=i(6281),s=i(1849),h=i(2945),o=i(8333);const a=[0,0,0,1];class u extends r.Z{constructor(t=0,e=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,i,r)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,i,r){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return h.bz(this,t),this.check()}fromAxisRotation(t,e){return h.yY(this,t,e),this.check()}identity(){return h.yR(this),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=(0,n.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,n.u5)(t)}get z(){return this[2]}set z(t){this[2]=(0,n.u5)(t)}get w(){return this[3]}set w(t){this[3]=(0,n.u5)(t)}len(){return h.kE(this)}lengthSquared(){return h.we(this)}dot(t){return h.AK(this,t)}rotationTo(t,e){return h.b0(this,t,e),this.check()}add(t){return h.IH(this,this,t),this.check()}calculateW(){return h.ZY(this,this),this.check()}conjugate(){return h.Kx(this,this),this.check()}invert(){return h.U_(this,this),this.check()}lerp(t,e,i){return void 0===i?this.lerp(this,t,e):(h.t7(this,t,e,i),this.check())}multiplyRight(t){return h.Jp(this,this,t),this.check()}multiplyLeft(t){return h.Jp(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return h.lM(this,this,t),this.check()}rotateY(t){return h.uD(this,this,t),this.check()}rotateZ(t){return h.jI(this,this,t),this.check()}scale(t){return h.bA(this,this,t),this.check()}slerp(t,e,i){let r,n,s;switch(arguments.length){case 1:({start:r=a,target:n,ratio:s}=t);break;case 2:r=this,n=t,s=e;break;default:r=t,n=e,s=i}return h.ZA(this,r,n,s),this.check()}transformVector4(t,e=new s.Z){return o.VC(e,t,this),(0,n.IL)(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}},7858:(t,e,i)=>{i.d(e,{Z:()=>a});var r=i(4942),n=i(3855),s=i(4034),h=i(7160);const o=1e-6;class a{constructor({phi:t=0,theta:e=0,radius:i=1,bearing:n,pitch:s,altitude:h,radiusScale:o=6371e3}={}){(0,r.Z)(this,"phi",void 0),(0,r.Z)(this,"theta",void 0),(0,r.Z)(this,"radius",void 0),(0,r.Z)(this,"radiusScale",void 0),this.phi=t,this.theta=e,this.radius=i||h||1,this.radiusScale=o||1,void 0!==n&&(this.bearing=n),void 0!==s&&(this.pitch=s),this.check()}toString(){return this.formatString(s.vc)}formatString({printTypes:t=!1}){const e=s.Bw;return"".concat(t?"Spherical":"","[rho:").concat(e(this.radius),",theta:").concat(e(this.theta),",phi:").concat(e(this.phi),"]")}equals(t){return(0,s.fS)(this.radius,t.radius)&&(0,s.fS)(this.theta,t.theta)&&(0,s.fS)(this.phi,t.phi)}exactEquals(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}get bearing(){return 180-(0,s.RW)(this.phi)}set bearing(t){this.phi=Math.PI-(0,s.uR)(t)}get pitch(){return(0,s.RW)(this.theta)}set pitch(t){this.theta=(0,s.uR)(t)}get longitude(){return(0,s.RW)(this.phi)}get latitude(){return(0,s.RW)(this.theta)}get lng(){return(0,s.RW)(this.phi)}get lat(){return(0,s.RW)(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this.check()}clone(){return(new a).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}fromLngLatZ([t,e,i]){return this.radius=1+i/this.radiusScale,this.phi=(0,s.uR)(e),this.theta=(0,s.uR)(t),this.check()}fromVector3(t){return this.radius=h.kE(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos((0,s.uZ)(t[2]/this.radius,-1,1))),this.check()}toVector3(){return new n.Z(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(o,Math.min(Math.PI-o,this.phi)),this}check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}},7069:(t,e,i)=>{i.d(e,{Z:()=>a});var r=i(9521),n=i(4034),s=i(6281),h=i(1437),o=i(1031);class a extends r.Z{constructor(t=0,e=0){super(2),(0,n.kJ)(t)&&1===arguments.length?this.copy(t):(n.vc.debug&&((0,s.u5)(t),(0,s.u5)(e)),this[0]=t,this[1]=e)}set(t,e){return this[0]=t,this[1]=e,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return n.vc.debug&&((0,s.u5)(t.x),(0,s.u5)(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return h.fF(this,this,t),this.check()}transformAsVector(t){return(0,o.pb)(this,this,t),this.check()}transformByMatrix3(t){return h.kK(this,this,t),this.check()}transformByMatrix2x3(t){return h.iu(this,this,t),this.check()}transformByMatrix2(t){return h.c(this,this,t),this.check()}}},3855:(t,e,i)=>{i.d(e,{Z:()=>c});var r=i(9521),n=i(4034),s=i(6281),h=i(7160),o=i(1031);const a=[0,0,0];let u;class c extends r.Z{static get ZERO(){return u||(u=new c(0,0,0),Object.freeze(u)),u}constructor(t=0,e=0,i=0){super(-0,-0,-0),1===arguments.length&&(0,n.kJ)(t)?this.copy(t):(n.vc.debug&&((0,s.u5)(t),(0,s.u5)(e),(0,s.u5)(i)),this[0]=t,this[1]=e,this[2]=i)}set(t,e,i){return this[0]=t,this[1]=e,this[2]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return n.vc.debug&&((0,s.u5)(t.x),(0,s.u5)(t.y),(0,s.u5)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=(0,s.u5)(t)}angle(t){return h.EU(this,t)}cross(t){return h.kC(this,this,t),this.check()}rotateX({radians:t,origin:e=a}){return h.lM(this,this,e,t),this.check()}rotateY({radians:t,origin:e=a}){return h.uD(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=a}){return h.jI(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return h.fF(this,this,t),this.check()}transformAsVector(t){return(0,o.pL)(this,this,t),this.check()}transformByMatrix3(t){return h.kK(this,this,t),this.check()}transformByMatrix2(t){return(0,o.eQ)(this,this,t),this.check()}transformByQuaternion(t){return h.VC(this,this,t),this.check()}}},1849:(t,e,i)=>{i.d(e,{Z:()=>u});var r=i(9521),n=i(4034),s=i(6281),h=i(7160),o=i(1031);let a;class u extends r.Z{static get ZERO(){return a||(a=new u(0,0,0,0),Object.freeze(a)),a}constructor(t=0,e=0,i=0,r=0){super(-0,-0,-0,-0),(0,n.kJ)(t)&&1===arguments.length?this.copy(t):(n.vc.debug&&((0,s.u5)(t),(0,s.u5)(e),(0,s.u5)(i),(0,s.u5)(r)),this[0]=t,this[1]=e,this[2]=i,this[3]=r)}set(t,e,i,r){return this[0]=t,this[1]=e,this[2]=i,this[3]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return n.vc.debug&&((0,s.u5)(t.x),(0,s.u5)(t.y),(0,s.u5)(t.z),(0,s.u5)(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=(0,s.u5)(t)}get w(){return this[3]}set w(t){this[3]=(0,s.u5)(t)}transform(t){return h.fF(this,this,t),this.check()}transformByMatrix3(t){return(0,o._x)(this,this,t),this.check()}transformByMatrix2(t){return(0,o.G7)(this,this,t),this.check()}transformByQuaternion(t){return h.VC(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}},394:(t,e,i)=>{function r(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}i.d(e,{Z:()=>r})},4034:(t,e,i)=>{i.d(e,{BJ:()=>b,Bw:()=>a,I6:()=>S,Kh:()=>M,O$:()=>p,OR:()=>g,RW:()=>m,Ux:()=>f,Yr:()=>l,ZR:()=>y,d9:()=>c,fS:()=>O,jQ:()=>o,kJ:()=>u,mC:()=>x,t7:()=>E,uR:()=>d,uZ:()=>w,vc:()=>h,z4:()=>Z});var r=i(394);const n=1/Math.PI*180,s=1/180*Math.PI,h={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function o(t){for(const e in t)(0,r.Z)(e in h),h[e]=t[e];return h}function a(t,{precision:e=h.precision}={}){return t=function(t){return Math.round(t/h.EPSILON)*h.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function u(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function c(t){return"clone"in t?t.clone():t.slice()}function l(t){return d(t)}function f(t){return m(t)}function d(t,e){return v(t,(t=>t*s),e)}function m(t,e){return v(t,(t=>t*n),e)}function p(t,e){return v(t,(t=>Math.sin(t)),e)}function x(t,e){return v(t,(t=>Math.cos(t)),e)}function g(t,e){return v(t,(t=>Math.tan(t)),e)}function y(t,e){return v(t,(t=>Math.asin(t)),e)}function M(t,e){return v(t,(t=>Math.acos(t)),e)}function Z(t,e){return v(t,(t=>Math.atan(t)),e)}function w(t,e,i){return v(t,(t=>Math.max(e,Math.min(i,t))))}function E(t,e,i){return u(t)?t.map(((t,r)=>E(t,e[r],i))):i*e+(1-i)*t}function O(t,e,i){const r=h.EPSILON;i&&(h.EPSILON=i);try{if(t===e)return!0;if(u(t)&&u(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!O(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=h.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{h.EPSILON=r}}function S(t,e){if(t===e)return!0;if(t&&"object"==typeof t&&e&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;if(t.exactEquals)return t.exactEquals(e)}if(u(t)&&u(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!S(t[i],e[i]))return!1;return!0}return!1}function b(t,e){const i=h.EPSILON;let r;h.EPSILON=t;try{r=e()}finally{h.EPSILON=i}return r}function v(t,e,i){if(u(t)){const r=t;i=i||function(t){return t.clone?t.clone():new Array(t.length)}(r);for(let n=0;n<i.length&&n<r.length;++n)i[n]=e(t[n],n,i);return i}return e(t)}},1031:(t,e,i)=>{function r(t,e,i){const r=e[0],n=e[1],s=i[3]*r+i[7]*n||1;return t[0]=(i[0]*r+i[4]*n)/s,t[1]=(i[1]*r+i[5]*n)/s,t}function n(t,e,i){const r=e[0],n=e[1],s=e[2],h=i[3]*r+i[7]*n+i[11]*s||1;return t[0]=(i[0]*r+i[4]*n+i[8]*s)/h,t[1]=(i[1]*r+i[5]*n+i[9]*s)/h,t[2]=(i[2]*r+i[6]*n+i[10]*s)/h,t}function s(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t[2]=e[2],t}function h(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t[2]=e[2],t[3]=e[3],t}function o(t,e,i){const r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[3]*n+i[6]*s,t[1]=i[1]*r+i[4]*n+i[7]*s,t[2]=i[2]*r+i[5]*n+i[8]*s,t[3]=e[3],t}i.d(e,{G7:()=>h,_x:()=>o,eQ:()=>s,pL:()=>n,pb:()=>r})},9057:(t,e,i)=>{i.d(e,{Z:()=>r});const r={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},6281:(t,e,i)=>{i.d(e,{IL:()=>s,u5:()=>n});var r=i(4034);function n(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function s(t,e,i=""){if(r.vc.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(i," some fields set to invalid numbers'"));return t}},2872:(t,e,i)=>{let r;i.d(e,{Xx:()=>a,KM:()=>f,Mh:()=>Y,F7:()=>R,JO:()=>z,du:()=>st}),function(t){t[t.OUTSIDE=-1]="OUTSIDE",t[t.INTERSECTING=0]="INTERSECTING",t[t.INSIDE=1]="INSIDE"}(r||(r={}));var n=i(4942),s=i(3855);const h=new s.Z,o=new s.Z;class a{constructor(t=[0,0,0],e=[0,0,0],i){(0,n.Z)(this,"center",void 0),(0,n.Z)(this,"halfDiagonal",void 0),(0,n.Z)(this,"minimum",void 0),(0,n.Z)(this,"maximum",void 0),i=i||h.copy(t).add(e).scale(.5),this.center=new s.Z(i),this.halfDiagonal=new s.Z(e).subtract(this.center),this.minimum=new s.Z(t),this.maximum=new s.Z(e)}clone(){return new a(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:e}=this,i=o.from(t.normal),n=e.x*Math.abs(i.x)+e.y*Math.abs(i.y)+e.z*Math.abs(i.z),s=this.center.dot(i)+t.distance;return s-n>0?r.INSIDE:s+n<0?r.OUTSIDE:r.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=h.from(t).subtract(this.center),{halfDiagonal:i}=this;let r,n=0;return r=Math.abs(e.x)-i.x,r>0&&(n+=r*r),r=Math.abs(e.y)-i.y,r>0&&(n+=r*r),r=Math.abs(e.z)-i.z,r>0&&(n+=r*r),n}}var u=i(5975);const c=new s.Z,l=new s.Z;class f{constructor(t=[0,0,0],e=0){(0,n.Z)(this,"center",void 0),(0,n.Z)(this,"radius",void 0),this.radius=-0,this.center=new s.Z,this.fromCenterRadius(t,e)}fromCenterRadius(t,e){return this.center.from(t),this.radius=e,this}fromCornerPoints(t,e){return e=c.from(e),this.center=(new s.Z).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new f(this.center,this.radius)}union(t){const e=this.center,i=this.radius,r=t.center,n=t.radius,s=c.copy(r).subtract(e),h=s.magnitude();if(i>=h+n)return this.clone();if(n>=h+i)return t.clone();const o=.5*(i+h+n);return l.copy(s).scale((-i+o)/h).add(e),this.center.copy(l),this.radius=o,this}expand(t){const e=c.from(t).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}transform(t){this.center.transform(t);const e=u.Q$(c,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}distanceSquaredTo(t){const e=this.distanceTo(t);return e*e}distanceTo(t){const e=c.from(t).subtract(this.center);return Math.max(0,e.len()-this.radius)}intersectPlane(t){const e=this.center,i=this.radius,n=t.normal.dot(e)+t.distance;return n<-i?r.OUTSIDE:n<i?r.INTERSECTING:r.INSIDE}}var d=i(540),m=i(3037);const p=new s.Z,x=new s.Z,g=new s.Z,y=new s.Z,M=new s.Z,Z=new s.Z,w=new s.Z,E=0,O=1,S=2,b=3,v=4,N=5,I=6,k=7,L=8;class R{constructor(t=[0,0,0],e=[0,0,0,0,0,0,0,0,0]){(0,n.Z)(this,"center",void 0),(0,n.Z)(this,"halfAxes",void 0),this.center=(new s.Z).from(t),this.halfAxes=new d.Z(e)}get halfSize(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new s.Z(t).len(),new s.Z(e).len(),new s.Z(i).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new s.Z(t).normalize(),n=new s.Z(e).normalize(),h=new s.Z(i).normalize();return(new m.Z).fromMatrix3(new d.Z([...r,...n,...h]))}fromCenterHalfSizeQuaternion(t,e,i){const r=new m.Z(i),n=(new d.Z).fromQuaternion(r);return n[0]=n[0]*e[0],n[1]=n[1]*e[0],n[2]=n[2]*e[0],n[3]=n[3]*e[1],n[4]=n[4]*e[1],n[5]=n[5]*e[1],n[6]=n[6]*e[2],n[7]=n[7]*e[2],n[8]=n[8]*e[2],this.center=(new s.Z).from(t),this.halfAxes=n,this}clone(){return new R(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new f){const e=this.halfAxes,i=e.getColumn(0,g),r=e.getColumn(1,y),n=e.getColumn(2,M),s=p.copy(i).add(r).add(n);return t.center.copy(this.center),t.radius=s.magnitude(),t}intersectPlane(t){const e=this.center,i=t.normal,n=this.halfAxes,s=i.x,h=i.y,o=i.z,a=Math.abs(s*n[E]+h*n[O]+o*n[S])+Math.abs(s*n[b]+h*n[v]+o*n[N])+Math.abs(s*n[I]+h*n[k]+o*n[L]),u=i.dot(e)+t.distance;return u<=-a?r.OUTSIDE:u>=a?r.INSIDE:r.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const e=x.from(t).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,g),n=i.getColumn(1,y),s=i.getColumn(2,M),h=r.magnitude(),o=n.magnitude(),a=s.magnitude();r.normalize(),n.normalize(),s.normalize();let u,c=0;return u=Math.abs(e.dot(r))-h,u>0&&(c+=u*u),u=Math.abs(e.dot(n))-o,u>0&&(c+=u*u),u=Math.abs(e.dot(s))-a,u>0&&(c+=u*u),c}computePlaneDistances(t,e,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;const s=this.center,h=this.halfAxes,o=h.getColumn(0,g),a=h.getColumn(1,y),u=h.getColumn(2,M),c=Z.copy(o).add(a).add(u).add(s),l=w.copy(c).subtract(t);let f=e.dot(l);return r=Math.min(f,r),n=Math.max(f,n),c.copy(s).add(o).add(a).subtract(u),l.copy(c).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),c.copy(s).add(o).subtract(a).add(u),l.copy(c).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),c.copy(s).add(o).subtract(a).subtract(u),l.copy(c).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),s.copy(c).subtract(o).add(a).add(u),l.copy(c).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),s.copy(c).subtract(o).add(a).subtract(u),l.copy(c).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),s.copy(c).subtract(o).subtract(a).add(u),l.copy(c).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),s.copy(c).subtract(o).subtract(a).subtract(u),l.copy(c).subtract(t),f=e.dot(l),r=Math.min(f,r),n=Math.max(f,n),i[0]=r,i[1]=n,i}transform(t){this.center.transformAsPoint(t);const e=this.halfAxes.getColumn(0,g);e.transformAsPoint(t);const i=this.halfAxes.getColumn(1,y);i.transformAsPoint(t);const r=this.halfAxes.getColumn(2,M);return r.transformAsPoint(t),this.halfAxes=new d.Z([...e,...i,...r]),this}getTransform(){throw new Error("not implemented")}}var A=i(394),P=i(4034);const T=new s.Z,C=new s.Z;class z{constructor(t=[0,0,1],e=0){(0,n.Z)(this,"normal",void 0),(0,n.Z)(this,"distance",void 0),this.normal=new s.Z,this.distance=-0,this.fromNormalDistance(t,e)}fromNormalDistance(t,e){return(0,A.Z)(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}fromPointNormal(t,e){t=T.from(t),this.normal.from(e).normalize();const i=-this.normal.dot(t);return this.distance=i,this}fromCoefficients(t,e,i,r){return this.normal.set(t,e,i),(0,A.Z)((0,P.fS)(this.normal.len(),1)),this.distance=r,this}clone(){return new z(this.normal,this.distance)}equals(t){return(0,P.fS)(this.distance,t.distance)&&(0,P.fS)(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const e=C.copy(this.normal).transformAsVector(t).normalize(),i=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(i,e)}projectPointOntoPlane(t,e=[0,0,0]){t=T.from(t);const i=this.getPointDistance(t),r=C.copy(this.normal).scale(i);return t.subtract(r).to(e)}}const q=[new s.Z([1,0,0]),new s.Z([0,1,0]),new s.Z([0,0,1])],j=new s.Z,X=new s.Z;new z(new s.Z(1,0,0),0);class Y{constructor(t=[]){(0,n.Z)(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*q.length;const e=t.center,i=t.radius;let r=0;for(const t of q){let n=this.planes[r],s=this.planes[r+1];n||(n=this.planes[r]=new z),s||(s=this.planes[r+1]=new z);const h=j.copy(t).scale(-i).add(e);t.dot(h);n.fromPointNormal(h,t);const o=j.copy(t).scale(i).add(e),a=X.copy(t).negate();a.dot(o);s.fromPointNormal(o,a),r+=2}return this}computeVisibility(t){let e=r.INSIDE;for(const i of this.planes){switch(t.intersectPlane(i)){case r.OUTSIDE:return r.OUTSIDE;case r.INTERSECTING:e=r.INTERSECTING}}return e}computeVisibilityWithPlaneMask(t,e){if((0,A.Z)(Number.isFinite(e),"parentPlaneMask is required."),e===Y.MASK_OUTSIDE||e===Y.MASK_INSIDE)return e;let i=Y.MASK_INSIDE;const n=this.planes;for(let s=0;s<this.planes.length;++s){const h=s<31?1<<s:0;if(s<31&&0==(e&h))continue;const o=n[s],a=t.intersectPlane(o);if(a===r.OUTSIDE)return Y.MASK_OUTSIDE;a===r.INTERSECTING&&(i|=h)}return i}}(0,n.Z)(Y,"MASK_OUTSIDE",4294967295),(0,n.Z)(Y,"MASK_INSIDE",0),(0,n.Z)(Y,"MASK_INDETERMINATE",2147483647);new s.Z,new s.Z,new s.Z,new s.Z,new s.Z;new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,new s.Z,Math.PI;var W=i(9057);const F=new d.Z,D=new d.Z,_=new d.Z,U=new d.Z,V=new d.Z;function B(t,e={}){const i=W.Z.EPSILON20;let r=0,n=0;const s=D,h=_;s.identity(),h.copy(t);const o=i*function(t){let e=0;for(let i=0;i<9;++i){const r=t[i];e+=r*r}return Math.sqrt(e)}(h);for(;n<10&&J(h)>o;)Q(h,U),V.copy(U).transpose(),h.multiplyRight(U),h.multiplyLeft(V),s.multiplyRight(U),++r>2&&(++n,r=0);return e.unitary=s.toTarget(e.unitary),e.diagonal=h.toTarget(e.diagonal),e}const K=[1,0,0],G=[2,2,1];function J(t){let e=0;for(let i=0;i<3;++i){const r=t[F.getElementIndex(G[i],K[i])];e+=2*r*r}return Math.sqrt(e)}function Q(t,e){const i=W.Z.EPSILON15;let r=0,n=1;for(let e=0;e<3;++e){const i=Math.abs(t[F.getElementIndex(G[e],K[e])]);i>r&&(n=e,r=i)}const s=K[n],h=G[n];let o=1,a=0;if(Math.abs(t[F.getElementIndex(h,s)])>i){const e=(t[F.getElementIndex(h,h)]-t[F.getElementIndex(s,s)])/2/t[F.getElementIndex(h,s)];let i;i=e<0?-1/(-e+Math.sqrt(1+e*e)):1/(e+Math.sqrt(1+e*e)),o=1/Math.sqrt(1+i*i),a=i*o}return d.Z.IDENTITY.to(e),e[F.getElementIndex(s,s)]=e[F.getElementIndex(h,h)]=o,e[F.getElementIndex(h,s)]=a,e[F.getElementIndex(s,h)]=-a,e}const H=new s.Z,$=new s.Z,tt=new s.Z,et=new s.Z,it=new s.Z,rt=new d.Z,nt={diagonal:new d.Z,unitary:new d.Z};function st(t,e=new R){if(!t||0===t.length)return e.halfAxes=new d.Z([0,0,0,0,0,0,0,0,0]),e.center=new s.Z,e;const i=t.length,r=new s.Z(0,0,0);for(const e of t)r.add(e);const n=1/i;r.multiplyByScalar(n);let h=0,o=0,a=0,u=0,c=0,l=0;for(const e of t){const t=H.copy(e).subtract(r);h+=t.x*t.x,o+=t.x*t.y,a+=t.x*t.z,u+=t.y*t.y,c+=t.y*t.z,l+=t.z*t.z}h*=n,o*=n,a*=n,u*=n,c*=n,l*=n;const f=rt;f[0]=h,f[1]=o,f[2]=a,f[3]=o,f[4]=u,f[5]=c,f[6]=a,f[7]=c,f[8]=l;const{unitary:m}=B(f,nt),p=e.halfAxes.copy(m);let x=p.getColumn(0,tt),g=p.getColumn(1,et),y=p.getColumn(2,it),M=-Number.MAX_VALUE,Z=-Number.MAX_VALUE,w=-Number.MAX_VALUE,E=Number.MAX_VALUE,O=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const e of t)H.copy(e),M=Math.max(H.dot(x),M),Z=Math.max(H.dot(g),Z),w=Math.max(H.dot(y),w),E=Math.min(H.dot(x),E),O=Math.min(H.dot(g),O),S=Math.min(H.dot(y),S);x=x.multiplyByScalar(.5*(E+M)),g=g.multiplyByScalar(.5*(O+Z)),y=y.multiplyByScalar(.5*(S+w)),e.center.copy(x).add(g).add(y);const b=$.set(M-E,Z-O,w-S).multiplyByScalar(.5),v=new d.Z([b[0],0,0,0,b[1],0,0,0,b[2]]);return e.halfAxes.multiplyRight(v),e}},596:(t,e,i)=>{i.d(e,{H:()=>P});var r=i(4942),n=i(3855),s=i(9057),h=i(394),o=i(5451),a=i(4034),u=i(7160);const c=6378137,l=6378137,f=6356752.314245179;Math.max(c,l,f);function d(t){return t}new n.Z;function m(t,e=[],i=d){return"longitude"in t?(e[0]=i(t.longitude),e[1]=i(t.latitude),e[2]=t.height):"x"in t?(e[0]=i(t.x),e[1]=i(t.y),e[2]=t.z):(e[0]=i(t[0]),e[1]=i(t[1]),e[2]=t[2]),e}function p(t,e,i=d){return"longitude"in e?(e.longitude=i(t[0]),e.latitude=i(t[1]),e.height=t[2]):"x"in e?(e.x=i(t[0]),e.y=i(t[1]),e.z=t[2]):(e[0]=i(t[0]),e[1]=i(t[1]),e[2]=t[2]),e}const x=new n.Z,g=new n.Z,y=new n.Z;const M=new n.Z,Z={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},w={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},E={east:new n.Z,north:new n.Z,up:new n.Z,west:new n.Z,south:new n.Z,down:new n.Z},O=new n.Z,S=new n.Z,b=new n.Z;function v(t,e,i,r,n,s){const o=Z[e]&&Z[e][i];let u,c,l;(0,h.Z)(o&&(!r||r===o));const f=M.copy(n);if((0,a.fS)(f.x,0,1e-14)&&(0,a.fS)(f.y,0,1e-14)){const t=Math.sign(f.z);u=O.fromArray(w[e]),"east"!==e&&"west"!==e&&u.scale(t),c=S.fromArray(w[i]),"east"!==i&&"west"!==i&&c.scale(t),l=b.fromArray(w[r]),"east"!==r&&"west"!==r&&l.scale(t)}else{const{up:n,east:s,north:h}=E;s.set(-f.y,f.x,0).normalize(),t.geodeticSurfaceNormal(f,n),h.copy(n).cross(s);const{down:o,west:a,south:d}=E;o.copy(n).scale(-1),a.copy(s).scale(-1),d.copy(h).scale(-1),u=E[e],c=E[i],l=E[r]}return s[0]=u.x,s[1]=u.y,s[2]=u.z,s[3]=0,s[4]=c.x,s[5]=c.y,s[6]=c.z,s[7]=0,s[8]=l.x,s[9]=l.y,s[10]=l.z,s[11]=0,s[12]=f.x,s[13]=f.y,s[14]=f.z,s[15]=1,s}const N=new n.Z,I=new n.Z,k=new n.Z,L=new n.Z,R=new n.Z,A=new n.Z;class P{constructor(t=0,e=0,i=0){(0,r.Z)(this,"radii",void 0),(0,r.Z)(this,"radiiSquared",void 0),(0,r.Z)(this,"radiiToTheFourth",void 0),(0,r.Z)(this,"oneOverRadii",void 0),(0,r.Z)(this,"oneOverRadiiSquared",void 0),(0,r.Z)(this,"minimumRadius",void 0),(0,r.Z)(this,"maximumRadius",void 0),(0,r.Z)(this,"centerToleranceSquared",s.Z.EPSILON1),(0,r.Z)(this,"squaredXOverSquaredZ",void 0),(0,h.Z)(t>=0),(0,h.Z)(e>=0),(0,h.Z)(i>=0),this.radii=new n.Z(t,e,i),this.radiiSquared=new n.Z(t*t,e*e,i*i),this.radiiToTheFourth=new n.Z(t*t*t*t,e*e*e*e,i*i*i*i),this.oneOverRadii=new n.Z(0===t?0:1/t,0===e?0:1/e,0===i?0:1/i),this.oneOverRadiiSquared=new n.Z(0===t?0:1/(t*t),0===e?0:1/(e*e),0===i?0:1/(i*i)),this.minimumRadius=Math.min(t,e,i),this.maximumRadius=Math.max(t,e,i),0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}equals(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}toString(){return this.radii.toString()}cartographicToCartesian(t,e=[0,0,0]){const i=I,r=k,[,,n]=t;this.geodeticSurfaceNormalCartographic(t,i),r.copy(this.radiiSquared).scale(i);const s=Math.sqrt(i.dot(r));return r.scale(1/s),i.scale(n),r.add(i),r.to(e)}cartesianToCartographic(t,e=[0,0,0]){A.from(t);const i=this.scaleToGeodeticSurface(A,L);if(!i)return;const r=this.geodeticSurfaceNormal(i,I),n=R;n.copy(A).subtract(i);const s=Math.atan2(r.y,r.x),h=Math.asin(r.z),o=Math.sign(u.AK(n,A))*u.kE(n);return p([s,h,o],e,a.vc._cartographicRadians?d:a.Ux)}eastNorthUpToFixedFrame(t,e=new o.Z){return v(this,"east","north","up",t,e)}localFrameToFixedFrame(t,e,i,r,n=new o.Z){return v(this,t,e,i,r,n)}geocentricSurfaceNormal(t,e=[0,0,0]){return N.from(t).normalize().to(e)}geodeticSurfaceNormalCartographic(t,e=[0,0,0]){const i=function(t,e=[]){return m(t,e,a.vc._cartographicRadians?d:a.Yr)}(t),r=i[0],n=i[1],s=Math.cos(n);return N.set(s*Math.cos(r),s*Math.sin(r),Math.sin(n)).normalize(),N.to(e)}geodeticSurfaceNormal(t,e=[0,0,0]){return N.from(t).scale(this.oneOverRadiiSquared).normalize().to(e)}scaleToGeodeticSurface(t,e){return function(t,e,i=[]){const{oneOverRadii:r,oneOverRadiiSquared:n,centerToleranceSquared:h}=e;x.from(t);const o=x.x,a=x.y,u=x.z,c=r.x,l=r.y,f=r.z,d=o*o*c*c,m=a*a*l*l,p=u*u*f*f,M=d+m+p,Z=Math.sqrt(1/M);if(!Number.isFinite(Z))return;const w=g;if(w.copy(t).scale(Z),M<h)return w.to(i);const E=n.x,O=n.y,S=n.z,b=y;b.set(w.x*E*2,w.y*O*2,w.z*S*2);let v,N,I,k,L=(1-Z)*x.len()/(.5*b.len()),R=0;do{L-=R,v=1/(1+L*E),N=1/(1+L*O),I=1/(1+L*S);const t=v*v,e=N*N,i=I*I;k=d*t+m*e+p*i-1,R=k/(-2*(d*(t*v)*E+m*(e*N)*O+p*(i*I)*S))}while(Math.abs(k)>s.Z.EPSILON12);return x.scale([v,N,I]).to(i)}(t,this,e)}scaleToGeocentricSurface(t,e=[0,0,0]){L.from(t);const i=L.x,r=L.y,n=L.z,s=this.oneOverRadiiSquared,h=1/Math.sqrt(i*i*s.x+r*r*s.y+n*n*s.z);return L.multiplyScalar(h).to(e)}transformPositionToScaledSpace(t,e=[0,0,0]){return L.from(t).scale(this.oneOverRadii).to(e)}transformPositionFromScaledSpace(t,e=[0,0,0]){return L.from(t).scale(this.radii).to(e)}getSurfaceNormalIntersectionWithZAxis(t,e=0,i=[0,0,0]){(0,h.Z)((0,a.fS)(this.radii.x,this.radii.y,s.Z.EPSILON15)),(0,h.Z)(this.radii.z>0),L.from(t);const r=L.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(r)>=this.radii.z-e))return L.set(0,0,r).to(i)}}(0,r.Z)(P,"WGS84",new P(c,l,f))},5215:(t,e,i)=>{let r;function n(t,e,i={}){const r=function(t,e={}){return Math.sign(s(t,e))}(t,i);return r!==e&&(function(t,e){const{start:i=0,end:r=t.length,size:n=2}=e,s=(r-i)/n,h=Math.floor(s/2);for(let e=0;e<h;++e){const r=i+e*n,h=i+(s-1-e)*n;for(let e=0;e<n;++e){const i=t[r+e];t[r+e]=t[h+e],t[h+e]=i}}}(t,i),!0)}function s(t,e={}){const{start:i=0,end:r=t.length}=e,n=e.size||2;let s=0;for(let e=i,h=r-n;e<r;e+=n)s+=(t[e]-t[h])*(t[e+1]+t[h+1]),h=e;return s/2}i.d(e,{wG:()=>r,WZ:()=>j,GU:()=>_,dj:()=>z,ct:()=>D,OT:()=>h,ap:()=>s,Ny:()=>n}),function(t){t[t.CLOCKWISE=1]="CLOCKWISE",t[t.COUNTER_CLOCKWISE=-1]="COUNTER_CLOCKWISE"}(r||(r={}));function h(t,e,i=2,r){const n=e&&e.length,s=n?e[0]*i:t.length;let h=o(t,0,s,i,!0,r&&r[0]);const c=[];if(!h||h.next===h.prev)return c;let l,f,d,x,g,M,Z;if(n&&(h=function(t,e,i,r,n){const s=[];let h,u,c,l,f;for(h=0,u=e.length;h<u;h++)c=e[h]*r,l=h<u-1?e[h+1]*r:t.length,f=o(t,c,l,r,!1,n&&n[h+1]),f===f.next&&(f.steiner=!0),s.push(y(f));for(s.sort(m),h=0;h<s.length;h++)p(s[h],i),i=a(i,i.next);return i}(t,e,h,i,r)),t.length>80*i){x=f=t[0],g=d=t[1];for(let e=i;e<s;e+=i)M=t[e],Z=t[e+1],M<x&&(x=M),Z<g&&(g=Z),M>f&&(f=M),Z>d&&(d=Z);l=Math.max(f-x,d-g),l=0!==l?1/l:0}return u(h,c,i,x,g,l),c}function o(t,e,i,r,n,h){let o,a;if(void 0===h&&(h=s(t,{start:e,end:i,size:r})),n===h<0)for(o=e;o<i;o+=r)a=I(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=I(o,t[o],t[o+1],a);return a&&E(a,a.next)&&(k(a),a=a.next),a}function a(t,e){if(!t)return t;e||(e=t);let i,r=t;do{if(i=!1,r.steiner||!E(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(k(r),r=e=r.prev,r===r.next)break;i=!0}}while(i||r!==e);return e}function u(t,e,i,r,n,s,h){if(!t)return;!h&&s&&function(t,e,i,r){let n=t;do{null===n.z&&(n.z=g(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){let e,i,r,n,s,h,o,a,u=1;do{for(n=t,t=null,a=null,r=0;n;){for(r++,h=n,s=0,i=0;i<u&&(s++,h=h.nextZ,h);i++);for(o=u;s>0||o>0&&h;)0!==s&&(0===o||!h||n.z<=h.z)?(e=n,n=n.nextZ,s--):(e=h,h=h.nextZ,o--),a?a.nextZ=e:t=e,e.prevZ=a,a=e;n=h}a.nextZ=null,u*=2}while(r>1)}(n)}(t,r,n,s);let o,m,p=t;for(;t.prev!==t.next;)if(o=t.prev,m=t.next,s?l(t,r,n,s):c(t))e.push(o.i/i),e.push(t.i/i),e.push(m.i/i),k(t),t=m.next,p=m.next;else if((t=m)===p){h?1===h?u(t=f(a(t),e,i),e,i,r,n,s,2):2===h&&d(t,e,i,r,n,s):u(a(t),e,i,r,n,s,1);break}}function c(t){const e=t.prev,i=t,r=t.next;if(w(e,i,r)>=0)return!1;let n=t.next.next;for(;n!==t.prev;){if(M(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&w(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function l(t,e,i,r){const n=t.prev,s=t,h=t.next;if(w(n,s,h)>=0)return!1;const o=n.x<s.x?n.x<h.x?n.x:h.x:s.x<h.x?s.x:h.x,a=n.y<s.y?n.y<h.y?n.y:h.y:s.y<h.y?s.y:h.y,u=n.x>s.x?n.x>h.x?n.x:h.x:s.x>h.x?s.x:h.x,c=n.y>s.y?n.y>h.y?n.y:h.y:s.y>h.y?s.y:h.y,l=g(o,a,e,i,r),f=g(u,c,e,i,r);let d=t.prevZ,m=t.nextZ;for(;d&&d.z>=l&&m&&m.z<=f;){if(d!==t.prev&&d!==t.next&&M(n.x,n.y,s.x,s.y,h.x,h.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,m!==t.prev&&m!==t.next&&M(n.x,n.y,s.x,s.y,h.x,h.y,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&M(n.x,n.y,s.x,s.y,h.x,h.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=f;){if(m!==t.prev&&m!==t.next&&M(n.x,n.y,s.x,s.y,h.x,h.y,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function f(t,e,i){let r=t;do{const n=r.prev,s=r.next.next;!E(n,s)&&O(n,r,r.next,s)&&v(n,s)&&v(s,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(s.i/i),k(r),k(r.next),r=t=s),r=r.next}while(r!==t);return a(r)}function d(t,e,i,r,n,s){let h=t;do{let t=h.next.next;for(;t!==h.prev;){if(h.i!==t.i&&Z(h,t)){let o=N(h,t);return h=a(h,h.next),o=a(o,o.next),u(h,e,i,r,n,s),void u(o,e,i,r,n,s)}t=t.next}h=h.next}while(h!==t)}function m(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){let i=e;const r=t.x,n=t.y;let s,h=-1/0;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){const t=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=r&&t>h){if(h=t,t===r){if(n===i.y)return i;if(n===i.next.y)return i.next}s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!s)return null;if(r===h)return s;const o=s,a=s.x,u=s.y;let c,l=1/0;i=s;do{r>=i.x&&i.x>=a&&r!==i.x&&M(n<u?r:h,n,a,u,n<u?h:r,n,i.x,i.y)&&(c=Math.abs(n-i.y)/(r-i.x),v(i,t)&&(c<l||c===l&&(i.x>s.x||i.x===s.x&&x(s,i)))&&(s=i,l=c)),i=i.next}while(i!==o);return s}(t,e),e){const i=N(e,t);a(e,e.next),a(i,i.next)}}function x(t,e){return w(t.prev,t,e.prev)<0&&w(e.next,t,t.next)<0}function g(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function y(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function M(t,e,i,r,n,s,h,o){return(n-h)*(e-o)-(t-h)*(s-o)>=0&&(t-h)*(r-o)-(i-h)*(e-o)>=0&&(i-h)*(s-o)-(n-h)*(r-o)>=0}function Z(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&O(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(v(t,e)&&v(e,t)&&function(t,e){let i=t,r=!1;const n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(w(t.prev,t,e.prev)||w(t,e.prev,e))||E(t,e)&&w(t.prev,t,t.next)>0&&w(e.prev,e,e.next)>0)}function w(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function O(t,e,i,r){const n=b(w(t,e,i)),s=b(w(t,e,r)),h=b(w(i,r,t)),o=b(w(i,r,e));return n!==s&&h!==o||(!(0!==n||!S(t,i,e))||(!(0!==s||!S(t,r,e))||(!(0!==h||!S(i,t,r))||!(0!==o||!S(i,e,r)))))}function S(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function b(t){return t>0?1:t<0?-1:0}function v(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function N(t,e){const i=new L(t.i,t.x,t.y),r=new L(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function I(t,e,i,r){const n=new L(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function L(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(t,e,i,r,n=[]){let s,h;if(8&i)s=(r[3]-t[1])/(e[1]-t[1]),h=3;else if(4&i)s=(r[1]-t[1])/(e[1]-t[1]),h=1;else if(2&i)s=(r[2]-t[0])/(e[0]-t[0]),h=2;else{if(!(1&i))return null;s=(r[0]-t[0])/(e[0]-t[0]),h=0}for(let i=0;i<t.length;i++)n[i]=(1&h)===i?r[h]:s*(e[i]-t[i])+t[i];return n}function A(t,e){let i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}function P(t,e){const i=e.length,r=t.length;if(r>0){let n=!0;for(let s=0;s<i;s++)if(t[r-i+s]!==e[s]){n=!1;break}if(n)return!1}for(let n=0;n<i;n++)t[r+n]=e[n];return!0}function T(t,e){const i=e.length;for(let r=0;r<i;r++)t[r]=e[r]}function C(t,e,i,r,n=[]){const s=r+e*i;for(let e=0;e<i;e++)n[e]=t[s+e];return n}function z(t,e){const{size:i=2,broken:r=!1,gridResolution:n=10,gridOffset:s=[0,0],startIndex:h=0,endIndex:o=t.length}=e||{},a=(o-h)/i;let u=[];const c=[u],l=C(t,0,i,h);let f,d;const m=Y(l,n,s,[]),p=[];P(u,l);for(let e=1;e<a;e++){for(f=C(t,e,i,h,f),d=A(f,m);d;){R(l,f,d,m,p);const t=A(p,m);t&&(R(l,p,t,m,p),d=t),P(u,p),T(l,p),W(m,n,d),r&&u.length>i&&(u=[],c.push(u),P(u,l)),d=A(f,m)}P(u,f),T(l,f)}return r?c:c[0]}function q(t,e){for(let i=0;i<e.length;i++)t.push(e[i]);return t}function j(t,e=null,i){if(!t.length)return[];const{size:r=2,gridResolution:n=10,gridOffset:s=[0,0],edgeTypes:h=!1}=i||{},o=[],a=[{pos:t,types:h?new Array(t.length/r).fill(1):null,holes:e||[]}],u=[[],[]];let c=[];for(;a.length;){const{pos:t,types:e,holes:i}=a.shift();F(t,r,i[0]||t.length,u),c=Y(u[0],n,s,c);const l=A(u[1],c);if(l){let n=X(t,e,r,0,i[0]||t.length,c,l);const s={pos:n[0].pos,types:n[0].types,holes:[]},o={pos:n[1].pos,types:n[1].types,holes:[]};a.push(s,o);for(let a=0;a<i.length;a++)n=X(t,e,r,i[a],i[a+1]||t.length,c,l),n[0]&&(s.holes.push(s.pos.length),s.pos=q(s.pos,n[0].pos),h&&(s.types=q(s.types,n[0].types))),n[1]&&(o.holes.push(o.pos.length),o.pos=q(o.pos,n[1].pos),h&&(o.types=q(o.types,n[1].types)))}else{const r={positions:t};h&&(r.edgeTypes=e),i.length&&(r.holeIndices=i),o.push(r)}}return o}function X(t,e,i,r,n,s,h){const o=(n-r)/i,a=[],u=[],c=[],l=[],f=[];let d,m,p;const x=C(t,o-1,i,r);let g=Math.sign(8&h?x[1]-s[3]:x[0]-s[2]),y=e&&e[o-1],M=0,Z=0;for(let n=0;n<o;n++)d=C(t,n,i,r,d),m=Math.sign(8&h?d[1]-s[3]:d[0]-s[2]),p=e&&e[r/i+n],m&&g&&g!==m&&(R(x,d,h,s,f),P(a,f)&&c.push(y),P(u,f)&&l.push(y)),m<=0?(P(a,d)&&c.push(p),M-=m):c.length&&(c[c.length-1]=0),m>=0?(P(u,d)&&l.push(p),Z+=m):l.length&&(l[l.length-1]=0),T(x,d),g=m,y=p;return[M?{pos:a,types:e&&c}:null,Z?{pos:u,types:e&&l}:null]}function Y(t,e,i,r){const n=Math.floor((t[0]-i[0])/e)*e+i[0],s=Math.floor((t[1]-i[1])/e)*e+i[1];return r[0]=n,r[1]=s,r[2]=n+e,r[3]=s+e,r}function W(t,e,i){8&i?(t[1]+=e,t[3]+=e):4&i?(t[1]-=e,t[3]-=e):2&i?(t[0]+=e,t[2]+=e):1&i&&(t[0]-=e,t[2]-=e)}function F(t,e,i,r){let n=1/0,s=-1/0,h=1/0,o=-1/0;for(let r=0;r<i;r+=e){const e=t[r],i=t[r+1];n=e<n?e:n,s=e>s?e:s,h=i<h?i:h,o=i>o?i:o}return r[0][0]=n,r[0][1]=h,r[1][0]=s,r[1][1]=o,r}function D(t,e){const{size:i=2,startIndex:r=0,endIndex:n=t.length,normalize:s=!0}=e||{},h=t.slice(r,n);B(h,i,0,n-r);const o=z(h,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const t of o)K(t,i);return o}function _(t,e=null,i){const{size:r=2,normalize:n=!0,edgeTypes:s=!1}=i||{};e=e||[];const h=[],o=[];let a=0,u=0;for(let n=0;n<=e.length;n++){const s=e[n]||t.length,c=u,l=U(t,r,a,s);for(let e=l;e<s;e++)h[u++]=t[e];for(let e=a;e<l;e++)h[u++]=t[e];B(h,r,c,u),V(h,r,c,u,null==i?void 0:i.maxLatitude),a=s,o[n]=u}o.pop();const c=j(h,o,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(n)for(const t of c)K(t.positions,r);return c}function U(t,e,i,r){let n=-1,s=-1;for(let h=i+1;h<r;h+=e){const e=Math.abs(t[h]);e>n&&(n=e,s=h-1)}return s}function V(t,e,i,r,n=85.051129){const s=t[i],h=t[r-e];if(Math.abs(s-h)>180){const r=C(t,0,e,i);r[0]+=360*Math.round((h-s)/360),P(t,r),r[1]=Math.sign(r[1])*n,P(t,r),r[0]=s,P(t,r)}}function B(t,e,i,r){let n,s=t[0];for(let h=i;h<r;h+=e){n=t[h];const e=n-s;(e>180||e<-180)&&(n-=360*Math.round(e/360)),t[h]=s=n}}function K(t,e){let i;const r=t.length/e;for(let n=0;n<r&&(i=t[n*e],(i+180)%360==0);n++);const n=360*-Math.round(i/360);if(0!==n)for(let i=0;i<r;i++)t[i*e]+=n}},7013:(t,e,i)=>{i.d(e,{LO:()=>M,DW:()=>X,eG:()=>N,Lu:()=>R,Xg:()=>C,if:()=>D,sj:()=>A,zX:()=>q,ro:()=>v,up:()=>_,Bf:()=>b,c7:()=>L,wl:()=>k,lf:()=>I,w5:()=>O,QA:()=>Y,CT:()=>T,sO:()=>E,es:()=>S,aW:()=>P,EO:()=>w});var r=i(4942),n=i(8333);function s(t,e){const i=(0,n.fF)([],e,t);return(0,n.bA)(i,i,1/i[3]),i}function h(t,e){const i=t%e;return i<0?e+i:i}function o(t,e,i){return t<e?e:t>i?i:t}const a=Math.log2||function(t){return Math.log(t)*Math.LOG2E};var u=i(5975),c=i(1437),l=i(7160);function f(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const d=Math.PI,m=d/4,p=d/180,x=180/d,g=512,y=4003e4,M=85.051129,Z=1.5;function w(t){return Math.pow(2,t)}function E(t){return a(t)}function O(t){const[e,i]=t;f(Number.isFinite(e)),f(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude");const r=i*p;return[g*(e*p+d)/(2*d),g*(d+Math.log(Math.tan(m+.5*r)))/(2*d)]}function S(t){const[e,i]=t,r=e/g*(2*d)-d,n=2*(Math.atan(Math.exp(i/g*(2*d)-d))-m);return[r*x,n*x]}function b(t){const{latitude:e}=t;f(Number.isFinite(e));const i=Math.cos(e*p);return E(y*i)-9}function v(t){const{latitude:e,longitude:i,highPrecision:r=!1}=t;f(Number.isFinite(e)&&Number.isFinite(i));const n=Math.cos(e*p),s=512/360,h=s/n,o=12790407194604047e-21/n,a={unitsPerMeter:[o,o,o],metersPerUnit:[1/o,1/o,1/o],unitsPerDegree:[s,h,o],degreesPerUnit:[.703125,1/h,1/o]};if(r){const t=p*Math.tan(e*p)/n,i=s*t/2,r=12790407194604047e-21*t,u=r/h*o;a.unitsPerDegree2=[0,i,r],a.unitsPerMeter2=[u,0,u]}return a}function N(t,e){const[i,r,n]=t,[s,h,o]=e,{unitsPerMeter:a,unitsPerMeter2:u}=v({longitude:i,latitude:r,highPrecision:!0}),c=O(t);c[0]+=s*(a[0]+u[0]*h),c[1]+=h*(a[1]+u[1]*h);const l=S(c),f=(n||0)+(o||0);return Number.isFinite(n)||Number.isFinite(o)?[l[0],l[1],f]:l}function I(t){const{height:e,pitch:i,bearing:r,altitude:n,scale:s,center:h}=t,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.Iu(o,o,[0,0,-n]),u.lM(o,o,-i*p),u.jI(o,o,r*p);const a=s/e;return u.bA(o,o,[a,a,a]),h&&u.Iu(o,o,l.tk([],h)),o}function k(t){const{width:e,height:i,altitude:r,pitch:n=0,nearZMultiplier:s=1,farZMultiplier:h=1}=t;let{fovy:o=R(Z)}=t;void 0!==r&&(o=R(r));const a=.5*o*p,u=A(o),c=n*p,l=Math.sin(a)*u/Math.sin(Math.min(Math.max(Math.PI/2-c-a,.01),Math.PI-.01));return{fov:2*a,aspect:e/i,focalDistance:u,near:s,far:(Math.sin(c)*l+u)*h}}function L(t){const{fov:e,aspect:i,near:r,far:n}=k(t);return u.G3([],e,i,r,n)}function R(t){return 2*Math.atan(.5/t)*x}function A(t){return.5/Math.tan(.5*t*p)}function P(t,e){const[i,r,n=0]=t;return f(Number.isFinite(i)&&Number.isFinite(r)&&Number.isFinite(n)),s(e,[i,r,n,1])}function T(t,e,i=0){const[r,n,h]=t;if(f(Number.isFinite(r)&&Number.isFinite(n),"invalid pixel coordinate"),Number.isFinite(h)){return s(e,[r,n,h,1])}const o=s(e,[r,n,0,1]),a=s(e,[r,n,1,1]),u=o[2],l=a[2],d=u===l?0:((i||0)-u)/(l-u);return c.t7([],o,a,d)}function C(t){const{width:e,height:i,bounds:r,minExtent:n=0,maxZoom:s=24,offset:h=[0,0]}=t,[[u,c],[l,d]]=r,m=function(t=0){if("number"==typeof t)return{top:t,bottom:t,left:t,right:t};return f(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),p=O([u,o(d,-M,M)]),x=O([l,o(c,-M,M)]),g=[Math.max(Math.abs(x[0]-p[0]),n),Math.max(Math.abs(x[1]-p[1]),n)],y=[e-m.left-m.right-2*Math.abs(h[0]),i-m.top-m.bottom-2*Math.abs(h[1])];f(y[0]>0&&y[1]>0);const Z=y[0]/g[0],w=y[1]/g[1],E=(m.right-m.left)/2/Z,b=(m.bottom-m.top)/2/w,v=S([(x[0]+p[0])/2+E,(x[1]+p[1])/2+b]),N=Math.min(s,a(Math.abs(Math.min(Z,w))));return f(Number.isFinite(N)),{longitude:v[0],latitude:v[1],zoom:N}}const z=Math.PI/180;function q(t,e=0){const{width:i,height:r,unproject:n}=t,s={targetZ:e},h=n([0,r],s),o=n([i,r],s);let a,u;return(t.fovy?.5*t.fovy*z:Math.atan(.5/t.altitude))>(90-t.pitch)*z-.01?(a=j(t,0,e),u=j(t,i,e)):(a=n([0,0],s),u=n([i,0],s)),[h,o,u,a]}function j(t,e,i){const{pixelUnprojectionMatrix:r}=t,n=s(r,[e,0,1,1]),h=s(r,[e,t.height,1,1]),o=(i*t.distanceScales.unitsPerMeter[2]-n[2])/(h[2]-n[2]),a=S(c.t7([],n,h,o));return a.push(i),a}class X{constructor(t={width:1,height:1}){(0,r.Z)(this,"latitude",void 0),(0,r.Z)(this,"longitude",void 0),(0,r.Z)(this,"zoom",void 0),(0,r.Z)(this,"pitch",void 0),(0,r.Z)(this,"bearing",void 0),(0,r.Z)(this,"altitude",void 0),(0,r.Z)(this,"fovy",void 0),(0,r.Z)(this,"meterOffset",void 0),(0,r.Z)(this,"center",void 0),(0,r.Z)(this,"width",void 0),(0,r.Z)(this,"height",void 0),(0,r.Z)(this,"scale",void 0),(0,r.Z)(this,"distanceScales",void 0),(0,r.Z)(this,"viewMatrix",void 0),(0,r.Z)(this,"projectionMatrix",void 0),(0,r.Z)(this,"viewProjectionMatrix",void 0),(0,r.Z)(this,"pixelProjectionMatrix",void 0),(0,r.Z)(this,"pixelUnprojectionMatrix",void 0),(0,r.Z)(this,"equals",(t=>t instanceof X&&(t.width===this.width&&t.height===this.height&&u.fS(t.projectionMatrix,this.projectionMatrix)&&u.fS(t.viewMatrix,this.viewMatrix)))),(0,r.Z)(this,"project",((t,e={})=>{const{topLeft:i=!0}=e,r=P(this.projectPosition(t),this.pixelProjectionMatrix),[n,s]=r,h=i?s:this.height-s;return 2===t.length?[n,h]:[n,h,r[2]]})),(0,r.Z)(this,"unproject",((t,e={})=>{const{topLeft:i=!0,targetZ:r}=e,[n,s,h]=t,o=i?s:this.height-s,a=r&&r*this.distanceScales.unitsPerMeter[2],u=T([n,o,h],this.pixelUnprojectionMatrix,a),[c,l,f]=this.unprojectPosition(u);return Number.isFinite(h)?[c,l,f]:Number.isFinite(r)?[c,l,r]:[c,l]})),(0,r.Z)(this,"projectPosition",(t=>{const[e,i]=O(t);return[e,i,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]})),(0,r.Z)(this,"unprojectPosition",(t=>{const[e,i]=S(t);return[e,i,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}));let{width:e,height:i,altitude:n=null,fovy:s=null}=t;const{latitude:h=0,longitude:o=0,zoom:a=0,pitch:c=0,bearing:f=0,position:d=null,nearZMultiplier:m=.02,farZMultiplier:p=1.01}=t;e=e||1,i=i||1,null===s&&null===n?(n=Z,s=R(n)):null===s?s=R(n):null===n&&(n=A(s));const x=w(a);n=Math.max(.75,n);const g=v({longitude:o,latitude:h}),y=O([o,h]);y.push(0),d&&l.IH(y,y,l.dC([],d,g.unitsPerMeter)),this.projectionMatrix=L({width:e,height:i,pitch:c,fovy:s,nearZMultiplier:m,farZMultiplier:p}),this.viewMatrix=I({height:i,scale:x,center:y,pitch:c,bearing:f,altitude:n}),this.width=e,this.height=i,this.scale=x,this.latitude=h,this.longitude=o,this.zoom=a,this.pitch=c,this.bearing=f,this.altitude=n,this.fovy=s,this.center=y,this.meterOffset=d||[0,0,0],this.distanceScales=g,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:t,height:e,projectionMatrix:i,viewMatrix:r}=this,n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.Jp(n,n,i),u.Jp(n,n,r),this.viewProjectionMatrix=n;const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];u.bA(s,s,[t/2,-e/2,1]),u.Iu(s,s,[1,-1,0]),u.Jp(s,s,n);const h=u.U_([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s);if(!h)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=s,this.pixelUnprojectionMatrix=h}projectFlat(t){return O(t)}unprojectFlat(t){return S(t)}getMapCenterByLngLatPosition({lngLat:t,pos:e}){const i=T(e,this.pixelUnprojectionMatrix),r=O(t),n=c.IH([],r,c.tk([],i));return S(c.IH([],this.center,n))}fitBounds(t,e={}){const{width:i,height:r}=this,{longitude:n,latitude:s,zoom:h}=C(Object.assign({width:i,height:r,bounds:t},e));return new X({width:i,height:r,longitude:n,latitude:s,zoom:h})}getBounds(t){const e=this.getBoundingRegion(t),i=Math.min(...e.map((t=>t[0]))),r=Math.max(...e.map((t=>t[0])));return[[i,Math.min(...e.map((t=>t[1])))],[r,Math.max(...e.map((t=>t[1])))]]}getBoundingRegion(t={}){return q(this,t.z||0)}getLocationAtPoint({lngLat:t,pos:e}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:e})}}function Y(t){const{width:e,height:i,pitch:r=0}=t;let{longitude:n,latitude:s,zoom:o,bearing:u=0}=t;(n<-180||n>180)&&(n=h(n+180,360)-180),(u<-180||u>180)&&(u=h(u+180,360)-180);const c=a(i/512);if(o<=c)o=c,s=0;else{const t=i/2/Math.pow(2,o),e=S([0,t])[1];if(s<e)s=e;else{const e=S([0,512-t])[1];s>e&&(s=e)}}return{width:e,height:i,longitude:n,latitude:s,zoom:o,pitch:r,bearing:u}}const W=["longitude","latitude","zoom"],F={curve:1.414,speed:1.2};function D(t,e,i,r){const{startZoom:n,startCenterXY:s,uDelta:h,w0:o,u1:a,S:u,rho:l,rho2:f,r0:d}=U(t,e,r);if(a<.01){const r={};for(const n of W){const s=t[n],h=e[n];r[n]=(m=i)*h+(1-m)*s}return r}var m;const p=i*u,x=Math.cosh(d)/Math.cosh(d+l*p),g=o*((Math.cosh(d)*Math.tanh(d+l*p)-Math.sinh(d))/f)/a,y=n+E(1/x),M=c.bA([],h,g);c.IH(M,M,s);const Z=S(M);return{longitude:Z[0],latitude:Z[1],zoom:y}}function _(t,e,i){const r={...F,...i},{screenSpeed:n,speed:s,maxDuration:h}=r,{S:o,rho:a}=U(t,e,r),u=1e3*o;let c;return c=Number.isFinite(n)?u/(n/a):u/s,Number.isFinite(h)&&c>h?0:c}function U(t,e,i){const r=(i=Object.assign({},F,i)).curve,n=t.zoom,s=[t.longitude,t.latitude],h=w(n),o=e.zoom,a=[e.longitude,e.latitude],u=w(o-n),l=O(s),f=O(a),d=c.lu([],f,l),m=Math.max(t.width,t.height),p=m/u,x=c.kE(d)*h,g=Math.max(x,.01),y=r*r,M=(p*p-m*m+y*y*g*g)/(2*m*y*g),Z=(p*p-m*m-y*y*g*g)/(2*p*y*g),E=Math.log(Math.sqrt(M*M+1)-M),S=Math.log(Math.sqrt(Z*Z+1)-Z);return{startZoom:n,startCenterXY:l,uDelta:d,w0:m,u1:x,S:(S-E)/r,rho:r,rho2:y,r0:E,r1:S}}},964:(t,e,i)=>{i.r(e),i.d(e,{Euler:()=>g,Matrix3:()=>h.Z,Matrix4:()=>o.Z,Pose:()=>y,Quaternion:()=>a.Z,SphericalCoordinates:()=>u.Z,Vector2:()=>r.Z,Vector3:()=>n.Z,Vector4:()=>s.Z,_Euler:()=>g,_MathUtils:()=>M.Z,_Pose:()=>y,_SphericalCoordinates:()=>u.Z,acos:()=>f.Kh,asin:()=>f.ZR,assert:()=>Z.Z,atan:()=>f.z4,clamp:()=>f.uZ,clone:()=>f.d9,config:()=>f.vc,configure:()=>f.jQ,cos:()=>f.mC,degrees:()=>f.RW,equals:()=>f.fS,exactEquals:()=>f.I6,formatValue:()=>f.Bw,isArray:()=>f.kJ,lerp:()=>f.t7,radians:()=>f.uR,sin:()=>f.O$,tan:()=>f.OR,toDegrees:()=>f.Ux,toRadians:()=>f.Yr,withEpsilon:()=>f.BJ});var r=i(7069),n=i(3855),s=i(1849),h=i(540),o=i(5451),a=i(3037),u=i(7858),c=i(4942),l=i(6357),f=i(4034),d=i(6281);const m="Unknown Euler angle order",p=.99999;var x;!function(t){t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ"}(x||(x={}));class g extends l.Z{static get ZYX(){return x.ZYX}static get YXZ(){return x.YXZ}static get XZY(){return x.XZY}static get ZXY(){return x.ZXY}static get YZX(){return x.YZX}static get XYZ(){return x.XYZ}static get RollPitchYaw(){return x.ZYX}static get DefaultOrder(){return x.ZYX}static get RotationOrders(){return x}static rotationOrder(t){return x[t]}get ELEMENTS(){return 4}constructor(t=0,e=0,i=0,r=g.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(t,e,i,r)}fromQuaternion(t){const[e,i,r,n]=t,s=i*i,h=-2*(s+r*r)+1,o=2*(e*i+n*r);let a=-2*(e*r-n*i);const u=2*(i*r+n*e),c=-2*(e*e+s)+1;a=a>1?1:a,a=a<-1?-1:a;const l=Math.atan2(u,c),f=Math.asin(a),d=Math.atan2(o,h);return this.set(l,f,d,g.RollPitchYaw)}fromObject(t){throw new Error("not implemented")}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}set(t=0,e=0,i=0,r){return this[0]=t,this[1]=e,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return(t=this[3])>=0&&t<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var t}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}toArray4(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}toVector3(t=[-0,-0,-0]){return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}get x(){return this[0]}set x(t){this[0]=(0,d.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,d.u5)(t)}get z(){return this[2]}set z(t){this[2]=(0,d.u5)(t)}get alpha(){return this[0]}set alpha(t){this[0]=(0,d.u5)(t)}get beta(){return this[1]}set beta(t){this[1]=(0,d.u5)(t)}get gamma(){return this[2]}set gamma(t){this[2]=(0,d.u5)(t)}get phi(){return this[0]}set phi(t){this[0]=(0,d.u5)(t)}get theta(){return this[1]}set theta(t){this[1]=(0,d.u5)(t)}get psi(){return this[2]}set psi(t){this[2]=(0,d.u5)(t)}get roll(){return this[0]}set roll(t){this[0]=(0,d.u5)(t)}get pitch(){return this[1]}set pitch(t){this[1]=(0,d.u5)(t)}get yaw(){return this[2]}set yaw(t){this[2]=(0,d.u5)(t)}get order(){return this[3]}set order(t){this[3]=function(t){if(t<0&&t>=6)throw new Error(m);return t}(t)}fromVector3(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}fromArray(t,e=0){return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}fromRollPitchYaw(t,e,i){return this.set(t,e,i,x.ZYX)}fromRotationMatrix(t,e=g.DefaultOrder){return this._fromRotationMatrix(t,e),this.check()}getRotationMatrix(t){return this._getRotationMatrix(t)}getQuaternion(){const t=new a.Z;switch(this[4]){case x.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case x.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case x.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case x.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case x.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case x.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(m)}}_fromRotationMatrix(t,e=g.DefaultOrder){const i=t[0],r=t[4],n=t[8],s=t[1],h=t[5],o=t[9],a=t[2],u=t[6],c=t[10];switch(e=e||this[3]){case g.XYZ:this[1]=Math.asin((0,f.uZ)(n,-1,1)),Math.abs(n)<p?(this[0]=Math.atan2(-o,c),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(u,h),this[2]=0);break;case g.YXZ:this[0]=Math.asin(-(0,f.uZ)(o,-1,1)),Math.abs(o)<p?(this[1]=Math.atan2(n,c),this[2]=Math.atan2(s,h)):(this[1]=Math.atan2(-a,i),this[2]=0);break;case g.ZXY:this[0]=Math.asin((0,f.uZ)(u,-1,1)),Math.abs(u)<p?(this[1]=Math.atan2(-a,c),this[2]=Math.atan2(-r,h)):(this[1]=0,this[2]=Math.atan2(s,i));break;case g.ZYX:this[1]=Math.asin(-(0,f.uZ)(a,-1,1)),Math.abs(a)<p?(this[0]=Math.atan2(u,c),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-r,h));break;case g.YZX:this[2]=Math.asin((0,f.uZ)(s,-1,1)),Math.abs(s)<p?(this[0]=Math.atan2(-o,h),this[1]=Math.atan2(-a,i)):(this[0]=0,this[1]=Math.atan2(n,c));break;case g.XZY:this[2]=Math.asin(-(0,f.uZ)(r,-1,1)),Math.abs(r)<p?(this[0]=Math.atan2(u,h),this[1]=Math.atan2(n,i)):(this[0]=Math.atan2(-o,c),this[1]=0);break;default:throw new Error(m)}return this[3]=e,this}_getRotationMatrix(t){const e=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,n=this.z,s=Math.cos(i),h=Math.cos(r),o=Math.cos(n),a=Math.sin(i),u=Math.sin(r),c=Math.sin(n);switch(this[3]){case g.XYZ:{const t=s*o,i=s*c,r=a*o,n=a*c;e[0]=h*o,e[4]=-h*c,e[8]=u,e[1]=i+r*u,e[5]=t-n*u,e[9]=-a*h,e[2]=n-t*u,e[6]=r+i*u,e[10]=s*h;break}case g.YXZ:{const t=h*o,i=h*c,r=u*o,n=u*c;e[0]=t+n*a,e[4]=r*a-i,e[8]=s*u,e[1]=s*c,e[5]=s*o,e[9]=-a,e[2]=i*a-r,e[6]=n+t*a,e[10]=s*h;break}case g.ZXY:{const t=h*o,i=h*c,r=u*o,n=u*c;e[0]=t-n*a,e[4]=-s*c,e[8]=r+i*a,e[1]=i+r*a,e[5]=s*o,e[9]=n-t*a,e[2]=-s*u,e[6]=a,e[10]=s*h;break}case g.ZYX:{const t=s*o,i=s*c,r=a*o,n=a*c;e[0]=h*o,e[4]=r*u-i,e[8]=t*u+n,e[1]=h*c,e[5]=n*u+t,e[9]=i*u-r,e[2]=-u,e[6]=a*h,e[10]=s*h;break}case g.YZX:{const t=s*h,i=s*u,r=a*h,n=a*u;e[0]=h*o,e[4]=n-t*c,e[8]=r*c+i,e[1]=c,e[5]=s*o,e[9]=-a*o,e[2]=-u*o,e[6]=i*c+r,e[10]=t-n*c;break}case g.XZY:{const t=s*h,i=s*u,r=a*h,n=a*u;e[0]=h*o,e[4]=-c,e[8]=u*o,e[1]=t*c+n,e[5]=s*o,e[9]=i*c-r,e[2]=r*c-i,e[6]=a*o,e[10]=n*c+t;break}default:throw new Error(m)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}toQuaternion(){const t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),n=Math.cos(.5*this.pitch),s=Math.sin(.5*this.pitch),h=t*i*n+e*r*s,o=t*r*n-e*i*s,u=t*i*s+e*r*n,c=e*i*n-t*r*s;return new a.Z(o,u,c,h)}}class y{constructor({x:t=0,y:e=0,z:i=0,roll:r=0,pitch:s=0,yaw:h=0,position:o,orientation:a}={}){(0,c.Z)(this,"position",void 0),(0,c.Z)(this,"orientation",void 0),Array.isArray(o)&&3===o.length?this.position=new n.Z(o):this.position=new n.Z(t,e,i),Array.isArray(a)&&4===a.length?this.orientation=new g(a,a[3]):this.orientation=new g(r,s,h,g.RollPitchYaw)}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get z(){return this.position.z}set z(t){this.position.z=t}get roll(){return this.orientation.roll}set roll(t){this.orientation.roll=t}get pitch(){return this.orientation.pitch}set pitch(t){this.orientation.pitch=t}get yaw(){return this.orientation.yaw}set yaw(t){this.orientation.yaw=t}getPosition(){return this.position}getOrientation(){return this.orientation}equals(t){return!!t&&(this.position.equals(t.position)&&this.orientation.equals(t.orientation))}exactEquals(t){return!!t&&(this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation))}getTransformationMatrix(){const t=Math.sin(this.roll),e=Math.sin(this.pitch),i=Math.sin(this.yaw),r=Math.cos(this.roll),n=Math.cos(this.pitch),s=Math.cos(this.yaw);return(new o.Z).setRowMajor(s*n,-i*r+s*e*t,i*t+s*e*r,this.x,i*n,s*r+i*e*t,-s*t+i*e*r,this.y,-e,n*t,n*r,this.z,0,0,0,1)}getTransformationMatrixFromPose(t){return(new o.Z).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}getTransformationMatrixToPose(t){return(new o.Z).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}var M=i(9057),Z=i(394)}}]);