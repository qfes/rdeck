"use strict";(self.webpackChunkrdeck=self.webpackChunkrdeck||[]).push([[977],{7359:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GeoJsonEditMode",{enumerable:!0,get:function(){return i.GeoJsonEditMode}}),Object.defineProperty(t,"ModifyMode",{enumerable:!0,get:function(){return a.ModifyMode}}),Object.defineProperty(t,"ResizeCircleMode",{enumerable:!0,get:function(){return u.ResizeCircleMode}}),Object.defineProperty(t,"TranslateMode",{enumerable:!0,get:function(){return c.TranslateMode}}),Object.defineProperty(t,"ScaleMode",{enumerable:!0,get:function(){return l.ScaleMode}}),Object.defineProperty(t,"RotateMode",{enumerable:!0,get:function(){return s.RotateMode}}),Object.defineProperty(t,"DuplicateMode",{enumerable:!0,get:function(){return f.DuplicateMode}}),Object.defineProperty(t,"ExtendLineStringMode",{enumerable:!0,get:function(){return p.ExtendLineStringMode}}),Object.defineProperty(t,"SplitPolygonMode",{enumerable:!0,get:function(){return d.SplitPolygonMode}}),Object.defineProperty(t,"ExtrudeMode",{enumerable:!0,get:function(){return y.ExtrudeMode}}),Object.defineProperty(t,"ElevationMode",{enumerable:!0,get:function(){return h.ElevationMode}}),Object.defineProperty(t,"TransformMode",{enumerable:!0,get:function(){return g.TransformMode}}),Object.defineProperty(t,"DrawPointMode",{enumerable:!0,get:function(){return b.DrawPointMode}}),Object.defineProperty(t,"DrawLineStringMode",{enumerable:!0,get:function(){return v.DrawLineStringMode}}),Object.defineProperty(t,"DrawPolygonMode",{enumerable:!0,get:function(){return m.DrawPolygonMode}}),Object.defineProperty(t,"DrawRectangleMode",{enumerable:!0,get:function(){return P.DrawRectangleMode}}),Object.defineProperty(t,"DrawSquareMode",{enumerable:!0,get:function(){return O.DrawSquareMode}}),Object.defineProperty(t,"DrawRectangleFromCenterMode",{enumerable:!0,get:function(){return S.DrawRectangleFromCenterMode}}),Object.defineProperty(t,"DrawSquareFromCenterMode",{enumerable:!0,get:function(){return w.DrawSquareFromCenterMode}}),Object.defineProperty(t,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return _.DrawCircleByDiameterMode}}),Object.defineProperty(t,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return j.DrawCircleFromCenterMode}}),Object.defineProperty(t,"DrawEllipseByBoundingBoxMode",{enumerable:!0,get:function(){return C.DrawEllipseByBoundingBoxMode}}),Object.defineProperty(t,"DrawEllipseUsingThreePointsMode",{enumerable:!0,get:function(){return M.DrawEllipseUsingThreePointsMode}}),Object.defineProperty(t,"DrawRectangleUsingThreePointsMode",{enumerable:!0,get:function(){return k.DrawRectangleUsingThreePointsMode}}),Object.defineProperty(t,"Draw90DegreePolygonMode",{enumerable:!0,get:function(){return E.Draw90DegreePolygonMode}}),Object.defineProperty(t,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return x.DrawPolygonByDraggingMode}}),Object.defineProperty(t,"ImmutableFeatureCollection",{enumerable:!0,get:function(){return R.ImmutableFeatureCollection}}),Object.defineProperty(t,"ViewMode",{enumerable:!0,get:function(){return D.ViewMode}}),Object.defineProperty(t,"MeasureDistanceMode",{enumerable:!0,get:function(){return T.MeasureDistanceMode}}),Object.defineProperty(t,"MeasureAreaMode",{enumerable:!0,get:function(){return A.MeasureAreaMode}}),Object.defineProperty(t,"MeasureAngleMode",{enumerable:!0,get:function(){return I.MeasureAngleMode}}),Object.defineProperty(t,"CompositeMode",{enumerable:!0,get:function(){return F.CompositeMode}}),Object.defineProperty(t,"SnappableMode",{enumerable:!0,get:function(){return L.SnappableMode}}),Object.defineProperty(t,"_memoize",{enumerable:!0,get:function(){return H.default}}),t.utils=void 0;var o,i=n(2254),a=n(7366),u=n(7339),c=n(6166),l=n(5892),s=n(83),f=n(2511),p=n(4546),d=n(6548),y=n(6601),h=n(1370),g=n(4061),b=n(5521),v=n(2116),m=n(5282),P=n(8725),O=n(2003),S=n(3301),w=n(3704),_=n(5790),j=n(6950),C=n(3199),M=n(5184),k=n(9050),E=n(1991),x=n(3039),R=n(6302),D=n(5279),T=n(63),A=n(244),I=n(9857),F=n(8874),L=n(3816),H=(o=n(3916))&&o.__esModule?o:{default:o},G=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=U();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(875));function U(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return U=function(){return e},e}t.utils=G},8874:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeMode=void 0;var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,n,r,a,d=(t=y,function(){var e,n=f(t);if(s()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function y(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),t=d.call(this),n=l(t),o=void 0,(r="_modes")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t._modes=e,t}return n=y,r=[{key:"_coalesce",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0;r<this._modes.length&&(t=e(this._modes[r]),!(n?n(t):t));r++);return t}},{key:"handleClick",value:function(e,t){this._coalesce((function(n){return n.handleClick(e,t)}))}},{key:"handlePointerMove",value:function(e,t){return this._coalesce((function(n){return n.handlePointerMove(e,t)}))}},{key:"handleStartDragging",value:function(e,t){return this._coalesce((function(n){return n.handleStartDragging(e,t)}))}},{key:"handleStopDragging",value:function(e,t){return this._coalesce((function(n){return n.handleStopDragging(e,t)}))}},{key:"handleDragging",value:function(e,t){return this._coalesce((function(n){return n.handleDragging(e,t)}))}},{key:"getGuides",value:function(e){var t,n=[],r=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=i(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(this._modes);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,o(a.getGuides(e).features))}}catch(e){r.e(e)}finally{r.f()}return{type:"FeatureCollection",features:n}}}],r&&u(n.prototype,r),a&&u(n,a),y}(n(2254).GeoJsonEditMode);t.CompositeMode=d},1991:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Draw90DegreePolygonMode=void 0;var r=l(n(3737)),o=l(n(1208)),i=l(n(3663)),a=l(n(1013)),u=n(4102),c=n(875);function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},b(e,t,n||e)}function v(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(y,e);var t,n,l,s,d=(t=y,function(){var e,n=P(t);if(m()){var r=P(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return v(this,e)});function y(){return h(this,y),d.apply(this,arguments)}return n=y,(l=[{key:"createTentativeFeature",value:function(e){var t,n=this.getClickSequence(),r=e.lastPointerMoveEvent.mapCoords;if(1===n.length)t=r;else{var o=n[n.length-2],i=n[n.length-1];t=p((0,c.generatePointsParallelToLinePoints)(o,i,r),1)[0]}return n.length<3?{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(f(n),[t])}}:{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(f(n),[t,n[0]])]}}}},{key:"getGuides",value:function(e){var t={type:"FeatureCollection",features:[]};if(0===this.getClickSequence().length||!e.lastPointerMoveEvent)return t;var n=this.createTentativeFeature(e);return t.features.push(n),t.features=t.features.concat((0,c.getEditHandlesForGeometry)(n.geometry,-1)),t.features=t.features.slice(0,-1),t}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell"),b(P(y.prototype),"handlePointerMove",this).call(this,e,t)}},{key:"handleClick",value:function(e,t){var n=e.picks,r=this.getTentativeGuide(t);this.addClickSequence(e);var o=this.getClickSequence();if(r){if(3===o.length&&"LineString"===r.geometry.type){var i=r.geometry;o[o.length-1]=i.coordinates[i.coordinates.length-1]}else if(o.length>3&&"Polygon"===r.geometry.type){var a=r.geometry;o[o.length-1]=a.coordinates[0][a.coordinates[0].length-2];var u=(0,c.getPickedEditHandle)(n);if(u&&Array.isArray(u.properties.positionIndexes)&&(0===u.properties.positionIndexes[1]||u.properties.positionIndexes[1]===a.coordinates[0].length-3)){var l={type:"Polygon",coordinates:this.finalizedCoordinates(f(a.coordinates[0]))};this.resetClickSequence();var s=this.getAddFeatureOrBooleanPolygonAction(l,t);s&&t.onEdit(s)}}var p={screenCoords:[-1,-1],mapCoords:e.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:function(){},sourceEvent:null};this.handlePointerMove(p,t)}}},{key:"finalizedCoordinates",value:function(e){var t=[[].concat(f(e.slice(0,-2)),[e[0]])],n=this.getIntermediatePoint(f(e));if(n)t=[[].concat(f(e.slice(0,-2)),[n,e[0]])];else{var r=f(e);r.splice(-3,1),(n=this.getIntermediatePoint(f(r)))&&(t=[[].concat(f(e.slice(0,-3)),[n,e[0]])])}return t}},{key:"getIntermediatePoint",value:function(e){var t;if(e.length>4){var n=f(e),c=n[0],l=n[1],s=(0,o.default)(c,l),p=e[e.length-3],d=e[e.length-4],y=(0,o.default)(p,d),h={first:[],second:[]};[1,2,3].forEach((function(e){var t=s+90*e;h.first.push(t>180?t-360:t);var n=y+90*e;h.second.push(n>180?n-360:n)}));var g=(0,a.default)((0,u.point)(c),(0,u.point)(p));[0,1,2].forEach((function(e){var n=(0,u.lineString)([c,(0,r.default)(c,g,h.first[e]).geometry.coordinates]);[0,1,2].forEach((function(e){var o=(0,u.lineString)([p,(0,r.default)(p,g,h.second[e]).geometry.coordinates]),a=(0,i.default)(n,o);a&&a.features.length&&(t=a.features[0].geometry.coordinates)}))}))}return t}}])&&g(n.prototype,l),s&&g(n,s),y}(n(2254).GeoJsonEditMode);t.Draw90DegreePolygonMode=S},5790:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawCircleByDiameterMode=void 0;var r=a(n(265)),o=a(n(1013)),i=n(2254);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(h,e);var t,n,a,u,y=(t=h,function(){var e,n=p(t);if(f()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function h(){return c(this,h),y.apply(this,arguments)}return n=h,(a=[{key:"getTwoClickPolygon",value:function(e,t,n){var a=(n||{}).steps,u=void 0===a?64:a,c={steps:u};u<4&&(console.warn("Minimum steps to draw a circle is 4 "),c.steps=4);var l=(0,i.getIntermediatePosition)(e,t),s=Math.max((0,o.default)(e,l),.001),f=(0,r.default)(l,s,c);return f.properties=f.properties||{},f.properties.shape="Circle",f}}])&&l(n.prototype,a),u&&l(n,u),h}(n(3124).TwoClickPolygonMode);t.DrawCircleByDiameterMode=y},6950:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawCircleFromCenterMode=void 0;var r=i(n(265)),o=i(n(1013));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,n,i,a,d=(t=y,function(){var e,n=f(t);if(s()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function y(){return u(this,y),d.apply(this,arguments)}return n=y,(i=[{key:"getTwoClickPolygon",value:function(e,t,n){var i=(n||{}).steps,a=void 0===i?64:i,u={steps:a};a<4&&(console.warn("Minimum steps to draw a circle is 4 "),u.steps=4);var c=Math.max((0,o.default)(e,t),.001),l=(0,r.default)(e,c,u);return l.properties=l.properties||{},l.properties.shape="Circle",l}}])&&c(n.prototype,i),a&&c(n,a),y}(n(3124).TwoClickPolygonMode);t.DrawCircleFromCenterMode=d},3199:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawEllipseByBoundingBoxMode=void 0;var r=c(n(3652)),o=c(n(1013)),i=c(n(1211)),a=n(4102),u=n(2254);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(b,e);var t,n,c,l,g=(t=b,function(){var e,n=y(t);if(d()){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return p(this,e)});function b(){return s(this,b),g.apply(this,arguments)}return n=b,(c=[{key:"getTwoClickPolygon",value:function(e,t,n){var c=Math.min(e[0],t[0]),l=Math.min(e[1],t[1]),s=Math.max(e[0],t[0]),f=Math.max(e[1],t[1]),p=(0,r.default)([c,l,s,f]).geometry.coordinates[0],d=(0,u.getIntermediatePosition)(e,t),y=Math.max((0,o.default)((0,a.point)(p[0]),(0,a.point)(p[1])),.001),h=Math.max((0,o.default)((0,a.point)(p[0]),(0,a.point)(p[3])),.001);return(0,i.default)(d,y,h)}}])&&f(n.prototype,c),l&&f(n,l),b}(n(3124).TwoClickPolygonMode);t.DrawEllipseByBoundingBoxMode=g},5184:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawEllipseUsingThreePointsMode=void 0;var r=c(n(1013)),o=c(n(1211)),i=c(n(1208)),a=n(4102),u=n(2254);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(b,e);var t,n,c,l,g=(t=b,function(){var e,n=y(t);if(d()){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return p(this,e)});function b(){return s(this,b),g.apply(this,arguments)}return n=b,(c=[{key:"getThreeClickPolygon",value:function(e,t,n,c){var l=(0,u.getIntermediatePosition)(e,t),s=Math.max((0,r.default)(l,(0,a.point)(n)),.001),f=Math.max((0,r.default)(e,t),.001)/2,p={angle:(0,i.default)(e,t)};return(0,o.default)(l,s,f,p)}}])&&f(n.prototype,c),l&&f(n,l),b}(n(1658).ThreeClickPolygonMode);t.DrawEllipseUsingThreePointsMode=g},2116:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawLineStringMode=void 0;var r=n(875);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,n,o,a,d=(t=y,function(){var e,n=f(t);if(s()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function y(){return u(this,y),d.apply(this,arguments)}return n=y,(o=[{key:"handleClick",value:function(e,t){var n=e.picks,o=(0,r.getPickedEditHandle)(n),a=!1;o||(this.addClickSequence(e),a=!0);var u=this.getClickSequence();if(u.length>1&&o&&Array.isArray(o.properties.positionIndexes)&&o.properties.positionIndexes[0]===u.length-1){var c={type:"LineString",coordinates:i(u)};this.resetClickSequence();var l=this.getAddFeatureAction(c,t.data);l&&t.onEdit(l)}else a&&t.onEdit({updatedData:t.data,editType:"addTentativePosition",editContext:{position:e.mapCoords}})}},{key:"handleKeyUp",value:function(e,t){if("Enter"===e.key){var n=this.getClickSequence();if(n.length>1){var r={type:"LineString",coordinates:i(n)};this.resetClickSequence();var o=this.getAddFeatureAction(r,t.data);o&&t.onEdit(o)}}}},{key:"getGuides",value:function(e){var t,n,r=e.lastPointerMoveEvent,o=this.getClickSequence(),a=r?[r.mapCoords]:[],u={type:"FeatureCollection",features:[]};o.length>0&&(n={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(i(o),a)}}),n&&u.features.push(n);var c=o.map((function(e,t){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[t]},geometry:{type:"Point",coordinates:e}}}));return(t=u.features).push.apply(t,i(c)),u}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}}])&&c(n.prototype,o),a&&c(n,a),y}(n(2254).GeoJsonEditMode);t.DrawLineStringMode=d},5521:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},a(e,t,n||e)}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DrawPointMode=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,r,f,p=(t=d,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u(this,e)});function d(){return o(this,d),p.apply(this,arguments)}return n=d,(r=[{key:"createTentativeFeature",value:function(e){var t=e.lastPointerMoveEvent;return{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Point",coordinates:(t?[t.mapCoords]:[])[0]}}}},{key:"handleClick",value:function(e,t){var n={type:"Point",coordinates:e.mapCoords};t.onEdit(this.getAddFeatureAction(n,t.data))}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell"),a(l(d.prototype),"handlePointerMove",this).call(this,e,t)}}])&&i(n.prototype,r),f&&i(n,f),d}(n(2254).GeoJsonEditMode);t.DrawPointMode=f},3039:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawPolygonByDraggingMode=void 0;var r,o=(r=n(3096))&&r.__esModule?r:{default:r},i=n(875);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(b,e);var t,n,r,a,c=(t=b,function(){var e,n=y(t);if(d()){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return f(this,e)});function b(){var e;l(this,b);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(p(e=c.call.apply(c,[this].concat(n))),"handleDraggingThrottled",null),e}return n=b,(r=[{key:"handleClick",value:function(e,t){}},{key:"handleStartDragging",value:function(e,t){e.cancelPan(),t.modeConfig&&t.modeConfig.throttleMs?this.handleDraggingThrottled=(0,o.default)(this.handleDraggingAux,t.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}},{key:"handleStopDragging",value:function(e,t){this.addClickSequence(e);var n=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),n.length>2){var r={type:"Polygon",coordinates:[[].concat(u(n),[n[0]])]};this.resetClickSequence();var o=this.getAddFeatureOrBooleanPolygonAction(r,t);o&&t.onEdit(o)}}},{key:"handleDraggingAux",value:function(e,t){var n=e.picks;(0,i.getPickedEditHandle)(n)||this.addClickSequence(e)}},{key:"handleDragging",value:function(e,t){this.handleDraggingThrottled&&this.handleDraggingThrottled(e,t)}}])&&s(n.prototype,r),a&&s(n,a),b}(n(5282).DrawPolygonMode);t.DrawPolygonByDraggingMode=b},5282:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawPolygonMode=void 0;var r,o=(r=n(3663))&&r.__esModule?r:{default:r},i=n(4102),a=n(875);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},p(e,t,n||e)}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(b,e);var t,n,r,u,l=(t=b,function(){var e,n=h(t);if(y()){var r=h(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d(this,e)});function b(){return s(this,b),l.apply(this,arguments)}return n=b,(r=[{key:"createTentativeFeature",value:function(e){var t,n=e.lastPointerMoveEvent,r=this.getClickSequence(),o=n?[n.mapCoords]:[];return 1===r.length||2===r.length?t={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(c(r),o)}}:r.length>2&&(t={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(c(r),o,[r[0]])]}}),t}},{key:"getGuides",value:function(e){var t,n=this.getClickSequence(),r={type:"FeatureCollection",features:[]},o=this.createTentativeFeature(e);o&&r.features.push(o);var i=n.map((function(e,t){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[t]},geometry:{type:"Point",coordinates:e}}}));return(t=r.features).push.apply(t,c(i)),r}},{key:"handleClick",value:function(e,t){var n=e.picks,r=(0,a.getPickedEditHandle)(n),u=this.getClickSequence(),l=!1;if(u.length>2&&t.modeConfig&&t.modeConfig.preventOverlappingLines){var s=(0,i.lineString)([u[u.length-1],e.mapCoords]),f=(0,i.lineString)(c(u.slice(0,u.length-1)));(0,o.default)(s,f).features.length>0&&(l=!0)}var p=!1;if(r||l||(this.addClickSequence(e),p=!0),u.length>2&&r&&Array.isArray(r.properties.positionIndexes)&&(0===r.properties.positionIndexes[0]||r.properties.positionIndexes[0]===u.length-1)){var d={type:"Polygon",coordinates:[[].concat(c(u),[u[0]])]};this.resetClickSequence();var y=this.getAddFeatureOrBooleanPolygonAction(d,t);y&&t.onEdit(y)}else p&&t.onEdit({updatedData:t.data,editType:"addTentativePosition",editContext:{position:e.mapCoords}})}},{key:"handleKeyUp",value:function(e,t){if("Enter"===e.key){var n=this.getClickSequence();if(n.length>2){var r={type:"Polygon",coordinates:[[].concat(c(n),[n[0]])]};this.resetClickSequence();var o=this.getAddFeatureOrBooleanPolygonAction(r,t);o&&t.onEdit(o)}}}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell"),p(h(b.prototype),"handlePointerMove",this).call(this,e,t)}}])&&f(n.prototype,r),u&&f(n,u),b}(n(2254).GeoJsonEditMode);t.DrawPolygonMode=b},3301:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawRectangleFromCenterMode=void 0;var r,o=(r=n(3652))&&r.__esModule?r:{default:r};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(d,e);var t,n,r,i,p=(t=d,function(){var e,n=s(t);if(l()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function d(){return a(this,d),p.apply(this,arguments)}return n=d,(r=[{key:"getTwoClickPolygon",value:function(e,t,n){var r=e[0]>t[0]?e[0]+Math.abs(e[0]-t[0]):e[0]-Math.abs(e[0]-t[0]),i=e[1]>t[1]?e[1]+Math.abs(e[1]-t[1]):e[1]-Math.abs(e[1]-t[1]),a=(0,o.default)([r,i,t[0],t[1]]);return a.properties=a.properties||{},a.properties.shape="Rectangle",a}}])&&u(n.prototype,r),i&&u(n,i),d}(n(3124).TwoClickPolygonMode);t.DrawRectangleFromCenterMode=p},8725:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawRectangleMode=void 0;var r,o=(r=n(3652))&&r.__esModule?r:{default:r};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(d,e);var t,n,r,i,p=(t=d,function(){var e,n=s(t);if(l()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function d(){return a(this,d),p.apply(this,arguments)}return n=d,(r=[{key:"getTwoClickPolygon",value:function(e,t,n){var r=(0,o.default)([e[0],e[1],t[0],t[1]]);return r.properties=r.properties||{},r.properties.shape="Rectangle",r}}])&&u(n.prototype,r),i&&u(n,i),d}(n(3124).TwoClickPolygonMode);t.DrawRectangleMode=p},9050:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawRectangleUsingThreePointsMode=void 0;var r=n(875);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,n,o,a,d=(t=y,function(){var e,n=f(t);if(s()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function y(){return u(this,y),d.apply(this,arguments)}return n=y,(o=[{key:"getThreeClickPolygon",value:function(e,t,n,o){var a=i((0,r.generatePointsParallelToLinePoints)(e,t,n),2);return{type:"Feature",properties:{shape:"Rectangle"},geometry:{type:"Polygon",coordinates:[[e,t,a[0],a[1],e]]}}}}])&&c(n.prototype,o),a&&c(n,a),y}(n(1658).ThreeClickPolygonMode);t.DrawRectangleUsingThreePointsMode=d},3704:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawSquareFromCenterMode=void 0;var r=u(n(3652)),o=u(n(1013)),i=u(n(5913)),a=n(4102);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(g,e);var t,n,u,c,h=(t=g,function(){var e,n=d(t);if(p()){var r=d(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return f(this,e)});function g(){return l(this,g),h.apply(this,arguments)}return n=g,(u=[{key:"getTwoClickPolygon",value:function(e,t,n){var u=[t[0],e[1]],c=[e[0],t[1]],l=(0,o.default)((0,a.point)(u),(0,a.point)(e)),s=(0,o.default)((0,a.point)(c),(0,a.point)(e)),f=l<=s?l:s,p=l<=s?u:c,d=(0,a.lineString)([p,t]),y=(0,i.default)(d,f).geometry.coordinates,h=e[0]>y[0]?e[0]+Math.abs(e[0]-y[0]):e[0]-Math.abs(e[0]-y[0]),g=e[1]>y[1]?e[1]+Math.abs(e[1]-y[1]):e[1]-Math.abs(e[1]-y[1]),b=(0,r.default)([h,g,y[0],y[1]]);return b.properties=b.properties||{},b.properties.shape="Square",b}}])&&s(n.prototype,u),c&&s(n,c),g}(n(3124).TwoClickPolygonMode);t.DrawSquareFromCenterMode=h},2003:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawSquareMode=void 0;var r=u(n(3652)),o=u(n(1013)),i=u(n(5913)),a=n(4102);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(g,e);var t,n,u,c,h=(t=g,function(){var e,n=d(t);if(p()){var r=d(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return f(this,e)});function g(){return l(this,g),h.apply(this,arguments)}return n=g,(u=[{key:"getTwoClickPolygon",value:function(e,t,n){var u=[t[0],e[1]],c=[e[0],t[1]],l=(0,o.default)((0,a.point)(u),(0,a.point)(e)),s=(0,o.default)((0,a.point)(c),(0,a.point)(e)),f=l<=s?l:s,p=l<=s?u:c,d=(0,a.lineString)([p,t]),y=(0,i.default)(d,f).geometry.coordinates,h=(0,r.default)([e[0],e[1],y[0],y[1]]);return h.properties=h.properties||{},h.properties.shape="Square",h}}])&&s(n.prototype,u),c&&s(n,c),g}(n(3124).TwoClickPolygonMode);t.DrawSquareMode=h},2511:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},a(e,t,n||e)}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DuplicateMode=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,r,f,p=(t=d,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u(this,e)});function d(){return o(this,d),p.apply(this,arguments)}return n=d,(r=[{key:"handleStartDragging",value:function(e,t){a(l(d.prototype),"handleStartDragging",this).call(this,e,t),this._geometryBeforeTranslate&&t.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,t.data))}},{key:"updateCursor",value:function(e){this._isTranslatable?e.onUpdateCursor("copy"):e.onUpdateCursor(null)}}])&&i(n.prototype,r),f&&i(n,f),d}(n(6166).TranslateMode);t.DuplicateMode=f},1370:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ElevationMode=void 0;var r=n(875);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},u(e,t,n||e)}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){var t=e.pointerDownScreenCoords,n=e.screenCoords;return 10*(t[1]-n[1])}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(h,e);var t,n,o,d,y=(t=h,function(){var e,n=s(t);if(l()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function h(){return i(this,h),y.apply(this,arguments)}return n=h,d=[{key:"calculateElevationChangeWithViewport",value:function(e,t){var n=t.pointerDownScreenCoords,r=t.screenCoords;return 156543.03392*Math.cos(e.latitude*Math.PI/180)/Math.pow(2,e.zoom)*(n[1]-r[1])/2}}],(o=[{key:"makeElevatedEvent",value:function(e,t,n){var r=n.modeConfig||{},o=r.minElevation,i=void 0===o?0:o,a=r.maxElevation,u=void 0===a?2e4:a,c=r.calculateElevationChange,l=void 0===c?p:c;if(!e.pointerDownScreenCoords)return e;var s=3===t.length?t[2]:0;return s+=l({pointerDownScreenCoords:e.pointerDownScreenCoords,screenCoords:e.screenCoords}),s=Math.min(s,u),s=Math.max(s,i),Object.assign({},e,{mapCoords:[t[0],t[1],s]})}},{key:"handlePointerMove",value:function(e,t){var n=(0,r.getPickedEditHandle)(e.pointerDownPicks),o=n?n.geometry.coordinates:e.mapCoords;u(s(h.prototype),"handlePointerMove",this).call(this,this.makeElevatedEvent(e,o,t),t)}},{key:"handleStopDragging",value:function(e,t){var n=(0,r.getPickedEditHandle)(e.picks),o=n?n.geometry.coordinates:e.mapCoords;u(s(h.prototype),"handleStopDragging",this).call(this,this.makeElevatedEvent(e,o,t),t)}},{key:"getCursor",value:function(e){var t=u(s(h.prototype),"getCursor",this).call(this,e);return"cell"===t&&(t="ns-resize"),t}}])&&a(n.prototype,o),d&&a(n,d),h}(n(7366).ModifyMode);t.ElevationMode=d},4546:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendLineStringMode=void 0;var r=n(2254),o=n(6302);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(d,e);var t,n,r,i,p=(t=d,function(){var e,n=s(t);if(l()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function d(){return a(this,d),p.apply(this,arguments)}return n=d,(r=[{key:"getSingleSelectedLineString",value:function(e){var t=this.getSelectedGeometry(e);return t&&"LineString"===t.type?t:null}},{key:"handleClick",value:function(e,t){var n=t.selectedIndexes,r=this.getSingleSelectedLineString(t);if(r){var i=[r.coordinates.length],a=t.modeConfig;a&&a.drawAtFront&&(i=[0]);var u=n[0],c=new o.ImmutableFeatureCollection(t.data).addPosition(u,i,e.mapCoords).getObject();t.onEdit({updatedData:c,editType:"addPosition",editContext:{featureIndexes:[u],positionIndexes:i,position:e.mapCoords}})}else console.warn("ExtendLineStringMode only supported for single LineString selection")}},{key:"getGuides",value:function(e){var t={type:"FeatureCollection",features:[]},n=this.getSingleSelectedLineString(e);if(!n)return t;var r=e.lastPointerMoveEvent&&e.lastPointerMoveEvent.mapCoords,o=null,i=e.modeConfig;return o=i&&i.drawAtFront?n.coordinates[0]:n.coordinates[n.coordinates.length-1],t.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[o,r]}}),t}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}}])&&u(n.prototype,r),i&&u(n,i),d}(r.GeoJsonEditMode);t.ExtendLineStringMode=p},6601:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtrudeMode=void 0;var r,o=(r=n(1208))&&r.__esModule?r:{default:r},i=n(875),a=n(7366),u=n(6302);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(f,e);var t,n,r,a,c=(t=f,function(){var e,n=v(t);if(b()){var r=v(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return h(this,e)});function f(){var e;d(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P(g(e=c.call.apply(c,[this].concat(n))),"isPointAdded",!1),e}return n=f,(r=[{key:"handleDragging",value:function(e,t){var n=(0,i.getPickedEditHandle)(e.pointerDownPicks);if(n){var r=n.properties.featureIndex,o=n.properties.positionIndexes,a=this.coordinatesSize(o,r,t.data);o=this.isPointAdded?this.nextPositionIndexes(o,a):o;var c=this.getPointForPositionIndexes(this.prevPositionIndexes(o,a),r,t.data),l=this.getPointForPositionIndexes(o,r,t.data);if(c&&l){var f=s((0,i.generatePointsParallelToLinePoints)(c,l,e.mapCoords),2),p=f[0],d=f[1],y=new u.ImmutableFeatureCollection(t.data).replacePosition(r,this.prevPositionIndexes(o,a),d).replacePosition(r,o,p).getObject();t.onEdit({updatedData:y,editType:"extruding",editContext:{featureIndexes:[r],positionIndexes:this.nextPositionIndexes(o,a),position:p}}),e.cancelPan()}}}},{key:"handleStartDragging",value:function(e,t){var n=t.selectedIndexes,r=(0,i.getPickedIntermediateEditHandle)(e.picks);if(n.length&&r){var o=r.properties,a=o.positionIndexes,c=o.featureIndex,l=this.coordinatesSize(a,c,t.data),s=this.getPointForPositionIndexes(this.prevPositionIndexes(a,l),c,t.data),f=this.getPointForPositionIndexes(a,c,t.data);if(s&&f){var p=new u.ImmutableFeatureCollection(t.data);this.isOrthogonal(a,c,l,t.data)||(p=p.addPosition(c,a,f)),this.isOrthogonal(this.prevPositionIndexes(a,l),c,l,t.data)||(p=p.addPosition(c,a,s),this.isPointAdded=!0),t.onEdit({updatedData:p.getObject(),editType:"startExtruding",editContext:{featureIndexes:[c],positionIndexes:a,position:s}})}}}},{key:"handleStopDragging",value:function(e,t){var n=t.selectedIndexes,r=(0,i.getPickedEditHandle)(e.pointerDownPicks);if(n.length&&r){var o=r.properties.featureIndex,a=r.properties.positionIndexes,c=this.coordinatesSize(a,o,t.data);a=this.isPointAdded?this.nextPositionIndexes(a,c):a;var l=this.getPointForPositionIndexes(this.prevPositionIndexes(a,c),o,t.data),f=this.getPointForPositionIndexes(a,o,t.data);if(l&&f){var p=s((0,i.generatePointsParallelToLinePoints)(l,f,e.mapCoords),2),d=p[0],y=p[1],h=new u.ImmutableFeatureCollection(t.data).replacePosition(o,this.prevPositionIndexes(a,c),y).replacePosition(o,a,d).getObject();t.onEdit({updatedData:h,editType:"extruded",editContext:{featureIndexes:[o],positionIndexes:a,position:d}})}}this.isPointAdded=!1}},{key:"coordinatesSize",value:function(e,t,n){var r=n.features,o=0;if(Array.isArray(e)){var i=r[t].geometry.coordinates;if(3===e.length){var a=s(e,2),u=a[0],c=a[1];i.length&&i[u].length&&(o=i[u][c].length)}else{var l=s(e,1)[0];i.length&&i[l].length&&(o=i[l].length)}}return o}},{key:"getBearing",value:function(e,t){var n=(0,o.default)(e,t);return n<0?Math.floor(360+n):Math.floor(n)}},{key:"isOrthogonal",value:function(e,t,n,r){if(!Array.isArray(e))return!1;e[e.length-1]===n-1&&(e[e.length-1]=0);var o=this.getPointForPositionIndexes(this.prevPositionIndexes(e,n),t,r),i=this.getPointForPositionIndexes(this.nextPositionIndexes(e,n),t,r),a=this.getPointForPositionIndexes(e,t,r),u=this.getBearing(a,o),c=this.getBearing(a,i);return[89,90,91,269,270,271].includes(Math.abs(u-c))}},{key:"nextPositionIndexes",value:function(e,t){if(!Array.isArray(e))return[];var n=l(e);return n.length&&(n[n.length-1]=n[n.length-1]===t-1?0:n[n.length-1]+1),n}},{key:"prevPositionIndexes",value:function(e,t){if(!Array.isArray(e))return[];var n=l(e);return n.length&&(n[n.length-1]=0===n[n.length-1]?t-2:n[n.length-1]-1),n}},{key:"getPointForPositionIndexes",value:function(e,t,n){var r,o=n.features;if(Array.isArray(e)){var i=o[t].geometry.coordinates;if(3===e.length){var a=s(e,3),u=a[0],c=a[1],l=a[2];i.length&&i[u].length&&(r=i[u][c][l])}else{var f=s(e,2),p=f[0],d=f[1];i.length&&i[p].length&&(r=i[p][d])}}return r}}])&&y(n.prototype,r),a&&y(n,a),f}(a.ModifyMode);t.ExtrudeMode=O},2254:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIntermediatePosition=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]},t.GeoJsonEditMode=void 0;var r=l(n(1959)),o=l(n(8727)),i=l(n(4170)),a=l(n(1138)),u=n(875),c=n(6302);function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y={type:"FeatureCollection",features:[]},h=[],g=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=[],(n="_clickSequence")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,l;return t=e,(n=[{key:"getGuides",value:function(e){return y}},{key:"getTooltips",value:function(e){return h}},{key:"getSelectedFeature",value:function(e){return 1===e.selectedIndexes.length?e.data.features[e.selectedIndexes[0]]:null}},{key:"getSelectedGeometry",value:function(e){var t=this.getSelectedFeature(e);return t?t.geometry:null}},{key:"getSelectedFeaturesAsFeatureCollection",value:function(e){var t=e.data.features;return{type:"FeatureCollection",features:e.selectedIndexes.map((function(e){return t[e]}))}}},{key:"getClickSequence",value:function(){return this._clickSequence}},{key:"addClickSequence",value:function(e){var t=e.mapCoords;this._clickSequence.push(t)}},{key:"resetClickSequence",value:function(){this._clickSequence=[]}},{key:"getTentativeGuide",value:function(e){return this.getGuides(e).features.find((function(e){return e.properties&&"tentative"===e.properties.guideType}))}},{key:"isSelectionPicked",value:function(e,t){if(!e.length)return!1;var n=(0,u.getNonGuidePicks)(e).map((function(e){return e.index})),r=(0,u.getPickedEditHandles)(e).map((function(e){return e.properties.featureIndex})),o=new Set([].concat(s(n),s(r)));return t.selectedIndexes.some((function(e){return o.has(e)}))}},{key:"rewindPolygon",value:function(e){var t=e.geometry;return"Polygon"===t.type||"MultiPolygon"===t.type?(0,a.default)(e):e}},{key:"getAddFeatureAction",value:function(e,t){var n=e,r="Feature"===n.type?n:{type:"Feature",properties:{},geometry:n},o=this.rewindPolygon(r),i=new c.ImmutableFeatureCollection(t).addFeature(o).getObject();return{updatedData:i,editType:"addFeature",editContext:{featureIndexes:[i.features.length-1]}}}},{key:"getAddManyFeaturesAction",value:function(e,t){var n,r=e.features,o=new c.ImmutableFeatureCollection(t),i=o.getObject().features.length,a=[],u=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=f(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(r);try{for(u.s();!(n=u.n()).done;){var l=n.value,s=l.properties,p=l.geometry;o=o.addFeature({type:"Feature",properties:s,geometry:p}),a.push(i+a.length)}}catch(e){u.e(e)}finally{u.f()}return{updatedData:o.getObject(),editType:"addFeature",editContext:{featureIndexes:a}}}},{key:"getAddFeatureOrBooleanPolygonAction",value:function(e,t){var n=e,a=this.getSelectedFeature(t),u=t.modeConfig;if(u&&u.booleanOperation){if(!a||"Polygon"!==a.geometry.type&&"MultiPolygon"!==a.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;var l,s="Feature"===n.type?n:{type:"Feature",geometry:n};if("union"===u.booleanOperation)l=(0,r.default)(a,s);else if("difference"===u.booleanOperation)l=(0,o.default)(a,s);else{if("intersection"!==u.booleanOperation)return console.warn("Invalid booleanOperation ".concat(u.booleanOperation)),null;l=(0,i.default)(a,s)}if(!l)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;var f=t.selectedIndexes[0];return{updatedData:new c.ImmutableFeatureCollection(t.data).replaceGeometry(f,l.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[f]}}}return this.getAddFeatureAction(e,t.data)}},{key:"createTentativeFeature",value:function(e){return null}},{key:"handleClick",value:function(e,t){}},{key:"handlePointerMove",value:function(e,t){var n=this.createTentativeFeature(t);n&&t.onEdit({updatedData:t.data,editType:"updateTentativeFeature",editContext:{feature:n}})}},{key:"handleStartDragging",value:function(e,t){}},{key:"handleStopDragging",value:function(e,t){}},{key:"handleDragging",value:function(e,t){}},{key:"handleKeyUp",value:function(e,t){"Escape"===e.key&&(this.resetClickSequence(),t.onEdit({updatedData:t.data,editType:"cancelFeature",editContext:{}}))}}])&&d(t.prototype,n),l&&d(t,l),e}();t.GeoJsonEditMode=g},6302:(e,t)=>{function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.ImmutableFeatureCollection=void 0;var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"featureCollection",void 0),this.featureCollection=t}var t,r,o;return t=e,(r=[{key:"getObject",value:function(){return this.featureCollection}},{key:"replacePosition",value:function(e,t,n){var r=this.featureCollection.features[e].geometry,o="Polygon"===r.type||"MultiPolygon"===r.type,a=i({},r,{coordinates:s(r.coordinates,t,n,o)});return this.replaceGeometry(e,a)}},{key:"removePosition",value:function(e,t){var n=this.featureCollection.features[e].geometry;if("Point"===n.type)throw Error("Can't remove a position from a Point or there'd be nothing left");if("MultiPoint"===n.type&&n.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if("LineString"===n.type&&n.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if("Polygon"===n.type&&n.coordinates[0].length<5&&Array.isArray(t)&&0===t[0])throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if("MultiLineString"===n.type&&1===n.coordinates.length&&n.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if("MultiPolygon"===n.type&&1===n.coordinates.length&&n.coordinates[0][0].length<5&&Array.isArray(t)&&0===t[0]&&0===t[1])throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");var r="Polygon"===n.type||"MultiPolygon"===n.type,o=i({},n,{coordinates:f(n.coordinates,t,r)});return function(e){switch(e.type){case"Polygon":!function(e){for(var t=e.coordinates,n=1;n<t.length;n++)d(t,n)&&n--}(e);break;case"MultiLineString":!function(e){for(var t=0;t<e.coordinates.length;t++)1===e.coordinates[t].length&&(e.coordinates.splice(t,1),t--)}(e);break;case"MultiPolygon":!function(e){for(var t=0;t<e.coordinates.length;t++){var n=e.coordinates[t];n[0].length<=3&&(e.coordinates.splice(t,1),t--);for(var r=1;r<n.length;r++)d(n,r)&&r--}}(e)}}(o),this.replaceGeometry(e,o)}},{key:"addPosition",value:function(e,t,n){var r=this.featureCollection.features[e].geometry;if("Point"===r.type)throw new Error("Unable to add a position to a Point feature");var o="Polygon"===r.type||"MultiPolygon"===r.type,a=i({},r,{coordinates:p(r.coordinates,t,n,o)});return this.replaceGeometry(e,a)}},{key:"replaceGeometry",value:function(t,r){var o=i({},this.featureCollection.features[t],{geometry:r});return new e(i({},this.featureCollection,{features:[].concat(n(this.featureCollection.features.slice(0,t)),[o],n(this.featureCollection.features.slice(t+1)))}))}},{key:"addFeature",value:function(e){return this.addFeatures([e])}},{key:"addFeatures",value:function(t){return new e(i({},this.featureCollection,{features:[].concat(n(this.featureCollection.features),n(t))}))}},{key:"deleteFeature",value:function(e){return this.deleteFeatures([e])}},{key:"deleteFeatures",value:function(t){var r=n(this.featureCollection.features);t.sort();for(var o=t.length-1;o>=0;o--){var a=t[o];a>=0&&a<r.length&&r.splice(a,1)}return new e(i({},this.featureCollection,{features:r}))}}])&&a(t.prototype,r),o&&a(t,o),e}();function l(e,t){if(2===e.length&&3===t.length){var n=t[2];return[e[0],e[1],n]}return e}function s(e,t,r,o){if(!t)return e;if(0===t.length)return l(r,e);if(1===t.length){var i=[].concat(n(e.slice(0,t[0])),[l(r,e[t[0]])],n(e.slice(t[0]+1)));return!o||0!==t[0]&&t[0]!==e.length-1||(i[0]=l(r,e[0]),i[e.length-1]=l(r,e[0])),i}return[].concat(n(e.slice(0,t[0])),[s(e[t[0]],t.slice(1,t.length),r,o)],n(e.slice(t[0]+1)))}function f(e,t,r){if(!t)return e;if(0===t.length)throw Error("Must specify the index of the position to remove");if(1===t.length){var o=[].concat(n(e.slice(0,t[0])),n(e.slice(t[0]+1)));return!r||0!==t[0]&&t[0]!==e.length-1||(0===t[0]?o[o.length-1]=o[0]:t[0]===e.length-1&&(o[0]=o[o.length-1])),o}return[].concat(n(e.slice(0,t[0])),[f(e[t[0]],t.slice(1,t.length),r)],n(e.slice(t[0]+1)))}function p(e,t,r,o){if(!t)return e;if(0===t.length)throw Error("Must specify the index of the position to remove");return 1===t.length?[].concat(n(e.slice(0,t[0])),[r],n(e.slice(t[0]))):[].concat(n(e.slice(0,t[0])),[p(e[t[0]],t.slice(1,t.length),r,o)],n(e.slice(t[0]+1)))}function d(e,t){return e[t].length<=3&&(e.splice(t,1),!0)}t.ImmutableFeatureCollection=c},9857:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureAngleMode=void 0;var r=u(n(1208)),o=u(n(8230)),i=u(n(3916)),a=n(2254);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=[],P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(s,e);var t,n,a,u,c=(t=s,function(){var e,n=g(t);if(h()){var r=g(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d(this,e)});function s(){var e;f(this,s);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return v(y(e=c.call.apply(c,[this].concat(n))),"_getTooltips",(0,i.default)((function(e){var t=e.modeConfig,n=e.vertex,i=e.point1,a=e.point2,u=m;if(n&&i&&a){var c,l=t||{},s=l.formatTooltip,f=l.measurementCallback,p=(0,r.default)(n,i),d=(0,r.default)(n,a),y=Math.abs(p-d);y>180&&(y=360-y),c=s?s(y):"".concat(parseFloat(y).toFixed(2)," ").concat("deg"),f&&f(y),u=[{position:(0,o.default)({type:"FeatureCollection",features:[i,a].map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e}}}))}).geometry.coordinates,text:c}]}return u}))),e}return n=s,(a=[{key:"handleClick",value:function(e,t){this.getClickSequence().length>=3&&this.resetClickSequence(),this.addClickSequence(e)}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}},{key:"getPoints",value:function(e){var t=this.getClickSequence(),n=l(t);return t.length<3&&e.lastPointerMoveEvent&&n.push(e.lastPointerMoveEvent.mapCoords),n}},{key:"getGuides",value:function(e){var t={type:"FeatureCollection",features:[]},n=t.features,r=this.getPoints(e);return r.length>2?n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0],r[2]]}}):r.length>1&&n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0]]}}),t}},{key:"getTooltips",value:function(e){var t=this.getPoints(e);return this._getTooltips({modeConfig:e.modeConfig,vertex:t[0],point1:t[1],point2:t[2]})}}])&&p(n.prototype,a),u&&p(n,u),s}(a.GeoJsonEditMode);t.MeasureAngleMode=P},244:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureAreaMode=void 0;var r=a(n(1070)),o=a(n(6338)),i=n(5282);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},p(e,t,n||e)}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}var b=[],v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(v,e);var t,n,i,a,u=(t=v,function(){var e,n=h(t);if(y()){var r=h(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d(this,e)});function v(){return s(this,v),u.apply(this,arguments)}return n=v,i=[{key:"handleClick",value:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{onEdit:function(){}});p(h(v.prototype),"handleClick",this).call(this,e,n)}},{key:"getTooltips",value:function(e){var t=this.getTentativeGuide(e);if(t&&"Polygon"===t.geometry.type){var n,i=e.modeConfig||{},a=i.formatTooltip,u=i.measurementCallback,c=(0,o.default)(t),l=(0,r.default)(t);return n=a?a(l):"".concat(parseFloat(l).toFixed(2)," ").concat("sq. m"),u&&u(l),[{position:c.geometry.coordinates,text:n}]}return b}}],i&&f(n.prototype,i),a&&f(n,a),v}(i.DrawPolygonMode);t.MeasureAreaMode=v},63:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureDistanceMode=void 0;var r=a(n(1013)),o=a(n(9034)),i=n(875);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(v,e);var t,n,a,u,l=(t=v,function(){var e,n=h(t);if(y()){var r=h(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return p(this,e)});function v(){var e;s(this,v);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return b(d(e=l.call.apply(l,[this].concat(n))),"_isMeasuringSessionFinished",!1),b(d(e),"_currentTooltips",[]),b(d(e),"_currentDistance",0),b(d(e),"_calculateDistanceForTooltip",(function(e){var t=e.positionA,n=e.positionB,o=e.modeConfig||{},i=o.turfOptions,a=o.measurementCallback,u=(0,r.default)(t,n,i);return a&&a(u),u})),e}return n=v,(a=[{key:"_formatTooltip",value:function(e,t){var n=t||{},r=n.formatTooltip,o=n.turfOptions,i=o&&o.units||"kilometers";return r?r(e):"".concat(parseFloat(e).toFixed(2)," ").concat(i)}},{key:"handleClick",value:function(e,t){var n=t.modeConfig,r=t.data,a=t.onEdit,u=(n||{}).centerTooltipsOnLine,c=void 0!==u&&u;this._isMeasuringSessionFinished&&(this._isMeasuringSessionFinished=!1,this.resetClickSequence(),this._currentTooltips=[],this._currentDistance=0);var l=e.picks,s=(0,i.getPickedEditHandle)(l),f=!1;s||(this.addClickSequence(e),f=!0);var p=this.getClickSequence();if(p.length>1&&s&&Array.isArray(s.properties.positionIndexes)&&s.properties.positionIndexes[0]===p.length-1)this._isMeasuringSessionFinished=!0;else if(f){if(p.length>1){this._currentDistance+=this._calculateDistanceForTooltip({positionA:p[p.length-2],positionB:p[p.length-1],modeConfig:n});var d=c?(0,o.default)(p[p.length-2],p[p.length-1]).geometry.coordinates:e.mapCoords;this._currentTooltips.push({position:d,text:this._formatTooltip(this._currentDistance,n)})}a({updatedData:r,editType:"addTentativePosition",editContext:{position:e.mapCoords}})}}},{key:"handleKeyUp",value:function(e,t){if(!this._isMeasuringSessionFinished){e.stopPropagation();var n=e.key,r=this.getClickSequence().length;switch(n){case"Escape":this._isMeasuringSessionFinished=!0,1===r&&(this.resetClickSequence(),this._currentTooltips=[]),t.onUpdateCursor("cell");break;case"Enter":this.handleClick(t.lastPointerMoveEvent,t),this._isMeasuringSessionFinished=!0}}}},{key:"getGuides",value:function(e){var t,n=e.lastPointerMoveEvent,r=this.getClickSequence(),o=n&&!this._isMeasuringSessionFinished?[n.mapCoords]:[],i={type:"FeatureCollection",features:[]};r.length>0&&i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(c(r),o)}});var a=r.map((function(e,t){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[t]},geometry:{type:"Point",coordinates:e}}}));return(t=i.features).push.apply(t,c(a)),i}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}},{key:"getTooltips",value:function(e){var t=e.lastPointerMoveEvent,n=e.modeConfig,r=(n||{}).centerTooltipsOnLine,i=void 0!==r&&r,a=this.getClickSequence();if(a.length>0&&t&&!this._isMeasuringSessionFinished){var u=this._calculateDistanceForTooltip({positionA:a[a.length-1],positionB:t.mapCoords,modeConfig:e.modeConfig}),l=i?(0,o.default)(a[a.length-1],t.mapCoords).geometry.coordinates:t.mapCoords;return[].concat(c(this._currentTooltips),[{position:l,text:this._formatTooltip(this._currentDistance+u,n)}])}return this._currentTooltips}}])&&f(n.prototype,a),u&&f(n,u),v}(n(2254).GeoJsonEditMode);t.MeasureDistanceMode=v},7366:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyMode=void 0;var r=n(4102),o=n(875),i=n(2254),a=n(6302);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(b,e);var t,n,i,u,s=(t=b,function(){var e,n=h(t);if(y()){var r=h(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d(this,e)});function b(){return f(this,b),s.apply(this,arguments)}return n=b,(i=[{key:"getGuides",value:function(e){var t,n=this,i=[],a=e.data,u=e.lastPointerMoveEvent,s=a.features,f=u&&u.picks,p=u&&u.mapCoords,d=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=l(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(e.selectedIndexes);try{for(d.s();!(t=d.n()).done;){var y=t.value;if(y<s.length){var h=s[y].geometry;i.push.apply(i,c((0,o.getEditHandlesForGeometry)(h,y)))}else console.warn("selectedFeatureIndexes out of range ".concat(y))}}catch(e){d.e(e)}finally{d.f()}if(f&&f.length&&p){var g,b=!(0,o.getPickedExistingEditHandle)(f)&&f.find((function(e){return!e.isGuide}));if(b&&!b.object.geometry.type.includes("Point")&&(!(null===(g=e.modeConfig)||void 0===g?void 0:g.lockRectangles)||"Rectangle"!==b.object.properties.shape)&&e.selectedIndexes.includes(b.index)){var v=null,m=[],P=(0,r.point)(p);if((0,o.recursivelyTraverseNestedArrays)(b.object.geometry.coordinates,[],(function(t,o){var i=(0,r.lineString)(t),a=n.getNearestPoint(i,P,e.modeConfig&&e.modeConfig.viewport);(!v||a.properties.dist<v.properties.dist)&&(v=a,m=o)})),v){var O=v,S=O.geometry.coordinates,w=O.properties.index;i.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:b.index,positionIndexes:[].concat(c(m),[w+1])},geometry:{type:"Point",coordinates:S}})}}}return{type:"FeatureCollection",features:i}}},{key:"getNearestPoint",value:function(e,t,n){if(e.geometry.coordinates.some((function(e){return e.length>2}))){if(n)return(0,o.nearestPointOnProjectedLine)(e,t,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,o.nearestPointOnLine)(e,t,n)}},{key:"handleClick",value:function(e,t){var n=(0,o.getPickedExistingEditHandle)(e.picks),r=(0,o.getPickedIntermediateEditHandle)(e.picks);if(n){var i,u=n.properties,c=u.featureIndex,l=u.positionIndexes;try{i=new a.ImmutableFeatureCollection(t.data).removePosition(c,l).getObject()}catch(e){}i&&t.onEdit({updatedData:i,editType:"removePosition",editContext:{featureIndexes:[c],positionIndexes:l,position:n.geometry.coordinates}})}else if(r){var s,f=r.properties,p=f.featureIndex,d=f.positionIndexes,y=t.data.features[p];if(!(null===(s=t.modeConfig)||void 0===s?void 0:s.lockRectangles)||"Rectangle"!==(null==y?void 0:y.properties.shape)){var h=new a.ImmutableFeatureCollection(t.data).addPosition(p,d,r.geometry.coordinates).getObject();h&&t.onEdit({updatedData:h,editType:"addPosition",editContext:{featureIndexes:[p],positionIndexes:d,position:r.geometry.coordinates}})}}}},{key:"handleDragging",value:function(e,t){var n=(0,o.getPickedEditHandle)(e.pointerDownPicks);n&&(e.cancelPan(),this._dragEditHandle("movePosition",t,n,e))}},{key:"_dragEditHandle",value:function(e,t,n,r){var i,u,c=n.properties,l=t.data.features[c.featureIndex];if((null===(i=t.modeConfig)||void 0===i?void 0:i.lockRectangles)&&"Rectangle"===l.properties.shape){var s=(0,o.updateRectanglePosition)(l,c.positionIndexes[1],r.mapCoords);u=new a.ImmutableFeatureCollection(t.data).replaceGeometry(c.featureIndex,{coordinates:s,type:"Polygon"}).getObject()}else u=new a.ImmutableFeatureCollection(t.data).replacePosition(c.featureIndex,c.positionIndexes,r.mapCoords).getObject();t.onEdit({updatedData:u,editType:e,editContext:{featureIndexes:[c.featureIndex],positionIndexes:c.positionIndexes,position:r.mapCoords}})}},{key:"handlePointerMove",value:function(e,t){var n=this.getCursor(e);t.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(e,t){var n=t.selectedIndexes,r=(0,o.getPickedIntermediateEditHandle)(e.picks);if(n.length&&r){var i=r.properties,u=new a.ImmutableFeatureCollection(t.data).addPosition(i.featureIndex,i.positionIndexes,e.mapCoords).getObject();t.onEdit({updatedData:u,editType:"addPosition",editContext:{featureIndexes:[i.featureIndex],positionIndexes:i.positionIndexes,position:e.mapCoords}})}}},{key:"handleStopDragging",value:function(e,t){var n=t.selectedIndexes,r=(0,o.getPickedEditHandle)(e.picks);n.length&&r&&this._dragEditHandle("finishMovePosition",t,r,e)}},{key:"getCursor",value:function(e){var t=e&&e.picks||[];return(0,o.getPickedEditHandles)(t).length?"cell":null}}])&&p(n.prototype,i),u&&p(n,u),b}(i.GeoJsonEditMode);t.ModifyMode=b},7339:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeCircleMode=void 0;var r=f(n(3807)),o=n(4102),i=f(n(265)),a=f(n(1013)),u=f(n(8230)),c=n(875),l=n(2254),s=n(6302);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(y,e);var t,n,l,f,p=(t=y,function(){var e,n=P(t);if(m()){var r=P(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b(this,e)});function y(){var e;h(this,y);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S(v(e=p.call.apply(p,[this].concat(n))),"_selectedEditHandle",void 0),S(v(e),"_isResizing",!1),e}return n=y,(l=[{key:"getGuides",value:function(e){var t=this,n=[],r=e.selectedIndexes,i=e.lastPointerMoveEvent,a=i&&i.picks,u=i&&i.mapCoords;if(a&&a.length&&u&&1===r.length&&!this._isResizing){var l=a.find((function(e){return!e.isGuide}));if(l&&l.object.properties.shape&&l.object.properties.shape.includes("Circle")&&e.selectedIndexes.includes(l.index)){var s=null,f=[],p=(0,o.point)(u);if((0,c.recursivelyTraverseNestedArrays)(l.object.geometry.coordinates,[],(function(n,r){var i=(0,o.lineString)(n),a=t.getNearestPoint(i,p,e.modeConfig&&e.modeConfig.viewport);(!s||a.properties.dist<s.properties.dist)&&(s=a,f=r)})),s){var y=s,h=y.geometry.coordinates,g=y.properties.index;n.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:l.index,positionIndexes:[].concat(d(f),[g+1])},geometry:{type:"Point",coordinates:h}})}}}return{type:"FeatureCollection",features:n}}},{key:"getNearestPoint",value:function(e,t,n){if(e.geometry.coordinates.some((function(e){return e.length>2}))){if(n)return(0,c.nearestPointOnProjectedLine)(e,t,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,r.default)(e,t)}},{key:"handleDragging",value:function(e,t){var n=(0,c.getPickedEditHandle)(e.pointerDownPicks);if(n){e.cancelPan();var r=n.properties,o=this.getSelectedFeature(t),l=(0,u.default)(o).geometry.coordinates,f=Object.entries(o.geometry.coordinates[0]).length-1,p=Math.max((0,a.default)(l,e.mapCoords),.001),d={}.steps,y={steps:void 0===d?f:d},h=(0,i.default)(l,p,y).geometry,g=new s.ImmutableFeatureCollection(t.data).replaceGeometry(r.featureIndex,h).getObject();t.onEdit({updatedData:g,editType:"unionGeometry",editContext:{featureIndexes:[r.featureIndex]}})}}},{key:"handlePointerMove",value:function(e,t){if(!this._isResizing){var n=(0,c.getPickedEditHandle)(e.picks);this._selectedEditHandle=n&&"intermediate"===n.properties.editHandleType?n:null}var r=this.getCursor(e);t.onUpdateCursor(r)}},{key:"handleStartDragging",value:function(e,t){this._selectedEditHandle&&(this._isResizing=!0)}},{key:"handleStopDragging",value:function(e,t){this._isResizing&&(this._selectedEditHandle=null,this._isResizing=!1)}},{key:"getCursor",value:function(e){var t=e&&e.picks||[];return(0,c.getPickedEditHandles)(t).length?"cell":null}}])&&g(n.prototype,l),f&&g(n,f),y}(l.GeoJsonEditMode);t.ResizeCircleMode=w},83:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RotateMode=void 0;var r=g(n(9705)),o=g(n(6338)),i=g(n(1208)),a=g(n(3652)),u=g(n(1013)),c=n(1540),l=n(611),s=n(4102),f=g(n(67)),p=g(n(7383)),d=n(875),y=n(2254),h=n(6302);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(M,e);var t,n,g,b,C=(t=M,function(){var e,n=w(t);if(S()){var r=w(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return P(this,e)});function M(){var e;v(this,M);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j(O(e=C.call.apply(C,[this].concat(n))),"_selectedEditHandle",void 0),j(O(e),"_geometryBeingRotated",void 0),j(O(e),"_isRotating",!1),j(O(e),"_isSinglePointGeometrySelected",(function(e){var t=(e||{}).features;return!(!Array.isArray(t)||1!==t.length)&&"Point"===(0,l.getGeom)(t[0]).type})),j(O(e),"getIsRotating",(function(){return e._isRotating})),e}return n=M,(g=[{key:"getGuides",value:function(e){var t=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(e);if(this._isSinglePointGeometrySelected(t))return{type:"FeatureCollection",features:[]};if(this._isRotating)return(0,s.featureCollection)([(0,o.default)(t)]);var n=(0,a.default)((0,r.default)(t)),i=null,l=null,f=0;(0,c.coordEach)(n,(function(e){if(i){var t=(0,y.getIntermediatePosition)(e,i);(!l||t[1]>l[1])&&(l=t);var n=(0,u.default)(e,i);f=Math.max(f,n)}i=e}));var d=l&&[l[0],l[1]+f/1e3],h=(0,s.lineString)([l,d]),g=(0,s.point)(d,{guideType:"editHandle",editHandleType:"rotate"});return(0,s.featureCollection)([(0,p.default)(n),g,h])}},{key:"handleDragging",value:function(e,t){if(this._isRotating){var n=this.getRotateAction(e.pointerDownMapCoords,e.mapCoords,"rotating",t);n&&t.onEdit(n),e.cancelPan()}}},{key:"handlePointerMove",value:function(e,t){if(!this._isRotating){var n=(0,d.getPickedEditHandle)(e.picks);this._selectedEditHandle=n&&"rotate"===n.properties.editHandleType?n:null}this.updateCursor(t)}},{key:"handleStartDragging",value:function(e,t){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(t))}},{key:"handleStopDragging",value:function(e,t){if(this._isRotating){var n=this.getRotateAction(e.pointerDownMapCoords,e.mapCoords,"rotated",t);n&&t.onEdit(n),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}},{key:"updateCursor",value:function(e){this._selectedEditHandle?e.onUpdateCursor("crosshair"):e.onUpdateCursor(null)}},{key:"getRotateAction",value:function(e,t,n,r){if(!this._geometryBeingRotated)return null;for(var a=(0,o.default)(this._geometryBeingRotated),u=function(e,t,n){var r=(0,i.default)(e,t);return(0,i.default)(e,n)-r}(a,e,t),c=(0,f.default)(this._geometryBeingRotated,u,{pivot:a}),l=new h.ImmutableFeatureCollection(r.data),s=r.selectedIndexes,p=0;p<s.length;p++){var d=s[p],y=c.features[p];l=l.replaceGeometry(d,y.geometry)}return{updatedData:l.getObject(),editType:n,editContext:{featureIndexes:s}}}}])&&m(n.prototype,g),b&&m(n,b),M}(y.GeoJsonEditMode);t.RotateMode=C},5892:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleMode=void 0;var r=g(n(9705)),o=g(n(6338)),i=g(n(1208)),a=g(n(3652)),u=n(4102),c=g(n(7383)),l=n(1540),s=g(n(1013)),f=g(n(7517)),p=n(611),d=n(875),y=n(2254),h=n(6302);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(b,e);var t,n,s,y,g=(t=b,function(){var e,n=j(t);if(_()){var r=j(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return S(this,e)});function b(){var e;P(this,b);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return M(w(e=g.call.apply(g,[this].concat(n))),"_geometryBeingScaled",void 0),M(w(e),"_selectedEditHandle",void 0),M(w(e),"_cornerGuidePoints",void 0),M(w(e),"_cursor",void 0),M(w(e),"_isScaling",!1),M(w(e),"_isSinglePointGeometrySelected",(function(e){var t=(e||{}).features;return!(!Array.isArray(t)||1!==t.length)&&"Point"===(0,p.getGeom)(t[0]).type})),M(w(e),"_getOppositeScaleHandle",(function(t){var n=t&&t.properties&&Array.isArray(t.properties.positionIndexes)&&t.properties.positionIndexes[0];if("number"!=typeof n)return null;var r=e._cornerGuidePoints.length,o=(n+r/2)%r;return e._cornerGuidePoints.find((function(e){return!!Array.isArray(e.properties.positionIndexes)&&e.properties.positionIndexes[0]===o}))})),M(w(e),"_getUpdatedData",(function(e,t){for(var n=new h.ImmutableFeatureCollection(e.data),r=e.selectedIndexes,o=0;o<r.length;o++){var i=r[o],a=t.features[o];n=n.replaceGeometry(i,a.geometry)}return n.getObject()})),M(w(e),"isEditHandleSelected",(function(){return Boolean(e._selectedEditHandle)})),M(w(e),"getScaleAction",(function(t,n,r,o){if(!e._selectedEditHandle)return null;var i=e._getOppositeScaleHandle(e._selectedEditHandle),a=(0,p.getCoord)(i),u=E(a,t,n),c=(0,f.default)(e._geometryBeingScaled,u,{origin:a});return{updatedData:e._getUpdatedData(o,c),editType:r,editContext:{featureIndexes:o.selectedIndexes}}})),M(w(e),"updateCursor",(function(t){if(e._selectedEditHandle){e._cursor&&t.onUpdateCursor(e._cursor);var n=e.getSelectedFeaturesAsFeatureCollection(t),r=(0,o.default)(n),a=(0,i.default)(r,e._selectedEditHandle),u=a<0?a+180:a;u>=0&&u<=90||u>=180&&u<=270?(e._cursor="nesw-resize",t.onUpdateCursor("nesw-resize")):(e._cursor="nwse-resize",t.onUpdateCursor("nwse-resize"))}else t.onUpdateCursor(null),e._cursor=null})),e}return n=b,(s=[{key:"handlePointerMove",value:function(e,t){if(!this._isScaling){var n=(0,d.getPickedEditHandle)(e.picks);this._selectedEditHandle=n&&"scale"===n.properties.editHandleType?n:null,this.updateCursor(t)}}},{key:"handleStartDragging",value:function(e,t){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(t))}},{key:"handleDragging",value:function(e,t){if(this._isScaling){t.onUpdateCursor(this._cursor);var n=this.getScaleAction(e.pointerDownMapCoords,e.mapCoords,"scaling",t);n&&t.onEdit(n),e.cancelPan()}}},{key:"handleStopDragging",value:function(e,t){if(this._isScaling){var n=this.getScaleAction(e.pointerDownMapCoords,e.mapCoords,"scaled",t);n&&t.onEdit(n),t.onUpdateCursor(null),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}},{key:"getGuides",value:function(e){this._cornerGuidePoints=[];var t=this.getSelectedFeaturesAsFeatureCollection(e);if(this._isSinglePointGeometrySelected(t))return{type:"FeatureCollection",features:[]};var n=(0,a.default)((0,r.default)(t));n.properties.mode="scale";var o=[];return(0,l.coordEach)(n,(function(e,t){if(t<4){var n=(0,u.point)(e,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[t]});o.push(n)}})),this._cornerGuidePoints=o,(0,u.featureCollection)([(0,c.default)(n)].concat(v(this._cornerGuidePoints)))}}])&&O(n.prototype,s),y&&O(n,y),b}(y.GeoJsonEditMode);function E(e,t,n){var r=(0,s.default)(e,t);return(0,s.default)(e,n)/r}t.ScaleMode=k},3816:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SnappableMode=void 0;var r=n(875);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(b,e);var t,n,o,u,g=(t=b,function(){var e,n=d(t);if(p()){var r=d(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),h(f(t=g.call(this)),"_handler",void 0),t._handler=e,t}return n=b,o=[{key:"_getSnappedMouseEvent",value:function(e,t,n){return Object.assign(e,{mapCoords:n.geometry.coordinates,pointerDownMapCoords:t&&t.geometry.coordinates})}},{key:"_getPickedSnapTarget",value:function(e){return(0,r.getPickedEditHandles)(e).find((function(e){return"snap-target"===e.properties.editHandleType}))}},{key:"_getPickedSnapSource",value:function(e){return(0,r.getPickedSnapSourceEditHandle)(e)}},{key:"_getUpdatedSnapSourceHandle",value:function(e,t){var n=e.properties,r=n.featureIndex,o=n.positionIndexes;if(!Array.isArray(o))return e;var i=t.features[r];return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{geometry:{type:"Point",coordinates:o.reduce((function(e,t){return e[t]}),i.geometry.coordinates)}})}},{key:"_getSnapTargets",value:function(e){var t=(e.modeConfig||{}).additionalSnapTargets;return t=t||[],[].concat(i(e.data.features),i(t))}},{key:"_getSnapTargetHandles",value:function(e){for(var t=[],n=this._getSnapTargets(e),o=0;o<n.length;o++)if(!e.selectedIndexes.includes(o)){var a=n[o].geometry;t.push.apply(t,i((0,r.getEditHandlesForGeometry)(a,o,"snap-target")))}return t}},{key:"getGuides",value:function(e){var t=e.modeConfig,n=e.lastPointerMoveEvent,o=(t||{}).enableSnapping,u={type:"FeatureCollection",features:i(this._handler.getGuides(e).features)};if(!o)return u;var c,l=n&&this._getPickedSnapSource(n.pointerDownPicks);if(l)return(c=u.features).push.apply(c,i(this._getSnapTargetHandles(e)).concat([this._getUpdatedSnapSourceHandle(l,e.data)])),u;var s,f=e.data.features,p=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(e.selectedIndexes);try{for(p.s();!(s=p.n()).done;){var d=s.value;if(d<f.length){var y,h=f[d].geometry;(y=u.features).push.apply(y,i((0,r.getEditHandlesForGeometry)(h,d,"snap-source")))}}}catch(e){p.e(e)}finally{p.f()}return u}},{key:"_getSnapAwareEvent",value:function(e,t){var n=this._getPickedSnapSource(t.lastPointerMoveEvent.pointerDownPicks),r=this._getPickedSnapTarget(e.picks);return n&&r?this._getSnappedMouseEvent(e,n,r):e}},{key:"handleStartDragging",value:function(e,t){this._handler.handleStartDragging(e,t)}},{key:"handleStopDragging",value:function(e,t){this._handler.handleStopDragging(this._getSnapAwareEvent(e,t),t)}},{key:"handleDragging",value:function(e,t){this._handler.handleDragging(this._getSnapAwareEvent(e,t),t)}},{key:"handlePointerMove",value:function(e,t){this._handler.handlePointerMove(this._getSnapAwareEvent(e,t),t)}}],o&&l(n.prototype,o),u&&l(n,u),b}(n(2254).GeoJsonEditMode);t.SnappableMode=g},6548:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SplitPolygonMode=void 0;var r=g(n(8147)),o=g(n(8727)),i=g(n(5419)),a=g(n(3663)),u=n(4102),c=g(n(1208)),l=g(n(1013)),s=g(n(3737)),f=g(n(7383)),p=g(n(3807)),d=n(875),y=n(2254),h=n(6302);function g(e){return e&&e.__esModule?e:{default:e}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function M(e,t){return M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},M(e,t)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(P,e);var t,n,y,g,b=(t=P,function(){var e,n=C(t);if(j()){var r=C(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return _(this,e)});function P(){return S(this,P),b.apply(this,arguments)}return n=P,(y=[{key:"calculateMapCoords",value:function(e,t,n){var r=n.modeConfig;if(!r||!r.lock90Degree||!e.length)return t;if(1===e.length){var o=e[0],i=this.getSelectedGeometry(n),a=(0,f.default)(i),y="FeatureCollection"===a.type?a.features:[a],h=Number.MAX_SAFE_INTEGER,g=null;if(y.forEach((function(e){var t=(0,p.default)(e,o),n=(0,l.default)(t,o);h>n&&(h=n,g=t)})),g){var b=(0,c.default)(o,g),v=(0,l.default)(o,t,{units:"meters"});return(0,s.default)(o,v,b,{units:"meters"}).geometry.coordinates}return t}var P=e[e.length-1],O=m((0,d.generatePointsParallelToLinePoints)(e[e.length-2],P,t),1)[0];return(0,p.default)((0,u.lineString)([P,O]),t).geometry.coordinates}},{key:"getGuides",value:function(e){var t=this.getClickSequence(),n={type:"FeatureCollection",features:[]};if(0===t.length||!e.lastPointerMoveEvent)return n;var r=e.lastPointerMoveEvent.mapCoords;return n.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(v(t),[this.calculateMapCoords(t,r,e)])}}),n}},{key:"handleClick",value:function(e,t){var n=this.getTentativeGuide(t),o=this.getSelectedGeometry(t);if(o){var i=this.getClickSequence();n&&"LineString"===n.geometry.type?i.push(n.geometry.coordinates[n.geometry.coordinates.length-1]):this.addClickSequence(e);var u={type:"Point",coordinates:i[i.length-1]},c=(0,r.default)(u,o);if(i.length>1&&n&&!c){if(this.resetClickSequence(),0===(0,a.default)(n,o).features.length)return;var l=this.splitPolygon(n,t);l&&t.onEdit(l)}}else console.warn("A polygon must be selected for splitting")}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell")}},{key:"splitPolygon",value:function(e,t){var n=this.getSelectedGeometry(t),r=t.selectedIndexes[0],a=t.modeConfig||{},u=a.gap,c=void 0===u?.1:u,l=a.units,s=void 0===l?"centimeters":l;0===c&&(c=.1,s="centimeters");var f=(0,i.default)(e,c,{units:s}),p=(0,o.default)(n,f);if(!p)return console.warn("Canceling edit. Split Polygon erased"),null;var d=p.geometry,y=d.type,g=d.coordinates,b=[];return b="Polygon"===y?g.map((function(e){return[e]})):g.reduce((function(e,t){return t.forEach((function(t){e.push([t])})),e}),[]),{updatedData:new h.ImmutableFeatureCollection(t.data).replaceGeometry(r,{type:"MultiPolygon",coordinates:b}).getObject(),editType:"split",editContext:{featureIndexes:[r]}}}}])&&w(n.prototype,y),g&&w(n,g),P}(y.GeoJsonEditMode);t.SplitPolygonMode=k},1658:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},a(e,t,n||e)}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeClickPolygonMode=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,r,f,p=(t=d,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u(this,e)});function d(){return o(this,d),p.apply(this,arguments)}return n=d,(r=[{key:"handleClick",value:function(e,t){this.addClickSequence(e);var n=this.getClickSequence(),r=this.getTentativeGuide(t);if(n.length>2&&r&&"Polygon"===r.geometry.type){var o=this.getAddFeatureOrBooleanPolygonAction(r.geometry,t);this.resetClickSequence(),o&&t.onEdit(o)}}},{key:"getGuides",value:function(e){var t=e.lastPointerMoveEvent,n=e.modeConfig,r=this.getClickSequence(),o={type:"FeatureCollection",features:[]};if(0===r.length)return o;var i=t.mapCoords;if(1===r.length)o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[0],i]}});else{var a=this.getThreeClickPolygon(r[0],r[1],i,n);a&&o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:a.geometry})}return o}},{key:"getThreeClickPolygon",value:function(e,t,n,r){return null}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell"),a(l(d.prototype),"handlePointerMove",this).call(this,e,t)}},{key:"createTentativeFeature",value:function(e){var t,n=e.lastPointerMoveEvent,r=this.getClickSequence(),o=n?[n.mapCoords]:[];return 2===r.length&&(t=this.getThreeClickPolygon(r[0],r[1],o[0],e.modeConfig)),t}}])&&i(n.prototype,r),f&&i(n,f),d}(n(2254).GeoJsonEditMode);t.ThreeClickPolygonMode=f},4061:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransformMode=void 0;var r=n(4102),o=n(6166),i=n(5892),a=n(83);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},f(e,t,n||e)}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(v,e);var t,n,u,g,b=(t=v,function(){var e,n=y(t);if(d()){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return p(this,e)});function v(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),b.call(this,[new o.TranslateMode,new i.ScaleMode,new a.RotateMode])}return n=v,u=[{key:"handlePointerMove",value:function(e,t){var n=null;f(y(v.prototype),"handlePointerMove",this).call(this,e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{onUpdateCursor:function(e){n=e||n}})),t.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(e,t){var n=null,r=null,a=[];this._modes.forEach((function(e){e instanceof o.TranslateMode?r=e:(e instanceof i.ScaleMode&&(n=e),a.push(e))})),n instanceof i.ScaleMode&&!n.isEditHandleSelected()&&a.push(r),a.filter(Boolean).forEach((function(n){return n.handleStartDragging(e,t)}))}},{key:"getGuides",value:function(e){var t=f(y(v.prototype),"getGuides",this).call(this,e),n=(this._modes||[]).find((function(e){return e instanceof a.RotateMode}));if(n instanceof a.RotateMode){var o=t.features.filter((function(e){var t=e.properties||{},r=t.editHandleType,o=[t.mode];return n.getIsRotating()&&o.push(r),!o.includes("scale")}));t=(0,r.featureCollection)(o)}return t}}],u&&s(n.prototype,u),g&&s(n,g),v}(n(8874).CompositeMode);t.TransformMode=g},6166:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TranslateMode=void 0;var r=f(n(1208)),o=f(n(1013)),i=f(n(2418)),a=n(4102),u=f(n(4235)),c=n(875),l=n(2254),s=n(6302);function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(O,e);var t,n,l,f,p=(t=O,function(){var e,n=v(t);if(b()){var r=v(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return h(this,e)});function O(){var e;d(this,O);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P(g(e=p.call.apply(p,[this].concat(n))),"_geometryBeforeTranslate",void 0),P(g(e),"_isTranslatable",void 0),e}return n=O,(l=[{key:"handleDragging",value:function(e,t){if(this._isTranslatable){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(e.pointerDownMapCoords,e.mapCoords,"translating",t);n&&t.onEdit(n)}e.cancelPan()}}},{key:"handlePointerMove",value:function(e,t){this._isTranslatable=this.isSelectionPicked(e.pointerDownPicks||e.picks,t),this.updateCursor(t)}},{key:"handleStartDragging",value:function(e,t){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(t))}},{key:"handleStopDragging",value:function(e,t){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(e.pointerDownMapCoords,e.mapCoords,"translated",t);n&&t.onEdit(n),this._geometryBeforeTranslate=null}}},{key:"updateCursor",value:function(e){this._isTranslatable?e.onUpdateCursor("move"):e.onUpdateCursor(null)}},{key:"getTranslateAction",value:function(e,t,n,l){var f=this;if(!this._geometryBeforeTranslate)return null;var p=new s.ImmutableFeatureCollection(l.data),d=l.selectedIndexes,y=l.modeConfig||{},h=y.viewport,g=y.screenSpace;if(h&&g)!function(){for(var n=h.project?h:new u.default(h),r=n.project(e),o=n.project(t),i=o[0]-r[0],a=o[1]-r[1],l=0;l<d.length;l++){var s=d[l],y=f._geometryBeforeTranslate.features[l],g=y.geometry.coordinates;g&&(g=(0,c.mapCoords)(g,(function(e){var t=n.project(e);return t?(t[0]+=i,t[1]+=a,n.unproject(t)):null})),p=p.replaceGeometry(s,{type:y.geometry.type,coordinates:g}))}}();else for(var b=(0,a.point)(e),v=(0,a.point)(t),m=(0,o.default)(b,v),P=(0,r.default)(b,v),O=(0,i.default)(this._geometryBeforeTranslate,m,P),S=0;S<d.length;S++){var w=d[S],_=O.features[S];p=p.replaceGeometry(w,_.geometry)}return{updatedData:p.getObject(),editType:n,editContext:{featureIndexes:d}}}}])&&y(n.prototype,l),f&&y(n,f),O}(l.GeoJsonEditMode);t.TranslateMode=O},3124:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},a(e,t,n||e)}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TwoClickPolygonMode=void 0;var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,r,f,p=(t=d,function(){var e,n=l(t);if(c()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return u(this,e)});function d(){return o(this,d),p.apply(this,arguments)}return n=d,(r=[{key:"handleClick",value:function(e,t){t.modeConfig&&t.modeConfig.dragToDraw||(this.addClickSequence(e),this.checkAndFinishPolygon(t))}},{key:"handleStartDragging",value:function(e,t){t.modeConfig&&t.modeConfig.dragToDraw&&(this.addClickSequence(e),e.cancelPan())}},{key:"handleStopDragging",value:function(e,t){t.modeConfig&&t.modeConfig.dragToDraw&&(this.addClickSequence(e),this.checkAndFinishPolygon(t))}},{key:"checkAndFinishPolygon",value:function(e){var t=this.getClickSequence(),n=this.getTentativeGuide(e);if(t.length>1&&n&&"Polygon"===n.geometry.type){var r={type:"Feature",properties:{shape:n.properties.shape},geometry:{type:"Polygon",coordinates:n.geometry.coordinates}},o=this.getAddFeatureOrBooleanPolygonAction(r,e);this.resetClickSequence(),o&&e.onEdit(o)}}},{key:"getGuides",value:function(e){var t=e.lastPointerMoveEvent,n=e.modeConfig,r=this.getClickSequence(),o={type:"FeatureCollection",features:[]};if(0===r.length)return o;var i=r[0],a=t.mapCoords,u=this.getTwoClickPolygon(i,a,n);return u&&o.features.push({type:"Feature",properties:{shape:u.properties&&u.properties.shape,guideType:"tentative"},geometry:u.geometry}),o}},{key:"getTwoClickPolygon",value:function(e,t,n){return null}},{key:"handlePointerMove",value:function(e,t){t.onUpdateCursor("cell"),a(l(d.prototype),"handlePointerMove",this).call(this,e,t)}},{key:"createTentativeFeature",value:function(e){var t,n=e.lastPointerMoveEvent,r=this.getClickSequence(),o=n?[n.mapCoords]:[];return 1===r.length&&(t=this.getTwoClickPolygon(r[0],o[0],e.modeConfig)),t}}])&&i(n.prototype,r),f&&i(n,f),d}(n(2254).GeoJsonEditMode);t.TwoClickPolygonMode=f},5279:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ViewMode=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t,n=(t=r,function(){var e,n=u(t);if(a()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function r(){return o(this,r),n.apply(this,arguments)}return r}(n(2254).GeoJsonEditMode);t.ViewMode=l},3916:(e,t)=>{function n(e,t){if(e===t)return!0;if(Array.isArray(e)){var n=e.length;if(!t||t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r={};return function(o){for(var i in o)if(!n(o[i],r[i])){t=e(o),r=o;break}return t}}},875:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toDeckColor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];if(!Array.isArray(e))return t;return[255*e[0],255*e[1],255*e[2],255*e[3]]},t.recursivelyTraverseNestedArrays=function e(t,n,r){if(!Array.isArray(t[0]))return!0;for(var o=0;o<t.length;o++)if(e(t[o],[].concat(p(n),[o]),r)){r(t,n);break}return!1},t.generatePointsParallelToLinePoints=function(e,t,n){var a={type:"LineString",coordinates:[e,t]},c=(0,u.point)(n),l=(0,i.default)(c,a),s=(0,o.default)(e,t),f=(n[0]-e[0])*(t[1]-e[1])-(n[1]-e[1])*(t[0]-e[0])<0?s-90:s-270,p=(0,r.default)(t,l,f),d=(0,r.default)(e,l,f);return[p.geometry.coordinates,d.geometry.coordinates]},t.distance2d=h,t.mix=g,t.nearestPointOnProjectedLine=function(e,t,n){var r=new l.default(n),o=e.geometry.coordinates.map((function(e){var t=f(e,3),n=t[0],o=t[1],i=t[2],a=void 0===i?0:i;return r.project([n,o,a])})),i=f(r.project(t.geometry.coordinates),2),a=i[0],u=i[1],c=1/0,s={};o.forEach((function(e,t){var n=f(e,2),r=n[0],i=n[1];if(0!==t){var l=f(o[t-1],2),p=l[0],d=l[1],y=d-i,h=r-p,g=p*i-r*d,b=y*y+h*h,v=Math.abs(y*a+h*u+g)/Math.sqrt(b);v<c&&(c=v,s={index:t,x0:(h*(h*a-y*u)-y*g)/b,y0:(y*(-h*a+y*u)-h*g)/b})}}));var p=s,d=p.index,y=p.x0,b=p.y0,v=f(o[d-1],3),m=v[0],P=v[1],O=v[2],S=void 0===O?0:O,w=f(o[d],3),_=w[0],j=w[1],C=w[2],M=void 0===C?0:C,k=h(m,P,_,j),E=h(m,P,y,b),x=g(S,M,E/k);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([y,b,x])},properties:{dist:c,index:d-1}}},t.nearestPointOnLine=function(e,t,n){var r,o,i;n&&(i=new l.default(n));var s=(0,u.point)([1/0,1/0],{dist:1/0});if(!(null===(r=e.geometry)||void 0===r?void 0:r.coordinates.length)||(null===(o=e.geometry)||void 0===o?void 0:o.coordinates.length)<2)return s;return(0,a.flattenEach)(e,(function(e){var n,r,o,a,l,f,p,d=(0,c.getCoords)(e),y=(0,c.getCoords)(t);if(d.length>1&&y.length){var h,g;i?(h=d.map((function(e){return i.project(e)})),g=i.project(y)):(h=d,g=y);for(var b=1;b<h.length;b++){if(h[b][0]!==h[b-1][0]){var v=(h[b][1]-h[b-1][1])/(h[b][0]-h[b-1][0]),m=h[b][1]-v*h[b][0];p=Math.abs(v*g[0]+m-g[1])/Math.sqrt(v*v+1)}else p=Math.abs(g[0]-h[b][0]);var P=Math.pow(h[b][1]-h[b-1][1],2)+Math.pow(h[b][0]-h[b-1][0],2),O=Math.pow(h[b][1]-g[1],2)+Math.pow(h[b][0]-g[0],2),S=Math.pow(h[b-1][1]-g[1],2)+Math.pow(h[b-1][0]-g[0],2),w=Math.pow(p,2),_=O-w+S-w;_>P&&(p=Math.sqrt(Math.min(O,S))),(null==n||n>p)&&(_>P?S<O?(r=0,o=1):(o=0,r=1):(r=Math.sqrt(S-w)/Math.sqrt(P),o=Math.sqrt(O-w)/Math.sqrt(P)),n=p,f=b)}var j=h[f-1][0]-h[f][0],C=h[f-1][1]-h[f][1];a=h[f-1][0]-j*r,l=h[f-1][1]-C*r}var M={x:a,y:l,idx:f-1,to:r,from:o};if(i){var k=i.unproject([M.x,M.y]);M={x:k[0],y:k[1],idx:f-1,to:r,from:o}}s=(0,u.point)([M.x,M.y],{dist:Math.abs(M.from-M.to),index:M.idx})})),s},t.getPickedEditHandle=function(e){var t=b(e);return t.length?t[0]:null},t.getPickedSnapSourceEditHandle=function(e){return b(e).find((function(e){return"snap-source"===e.properties.editHandleType}))},t.getNonGuidePicks=function(e){return e&&e.filter((function(e){return!e.isGuide}))},t.getPickedExistingEditHandle=function(e){return b(e).find((function(e){var t=e.properties;return t.featureIndex>=0&&"existing"===t.editHandleType}))},t.getPickedIntermediateEditHandle=function(e){return b(e).find((function(e){var t=e.properties;return t.featureIndex>=0&&"intermediate"===t.editHandleType}))},t.getPickedEditHandles=b,t.getEditHandlesForGeometry=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"existing",r=[];switch(e.type){case"Point":r=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:n,positionIndexes:[],featureIndex:t},geometry:{type:"Point",coordinates:e.coordinates}}];break;case"MultiPoint":case"LineString":r=r.concat(v(e.coordinates,[],t,n));break;case"Polygon":case"MultiLineString":for(var o=0;o<e.coordinates.length;o++)r=r.concat(v(e.coordinates[o],[o],t,n)),"Polygon"===e.type&&(r=r.slice(0,-1));break;case"MultiPolygon":for(var i=0;i<e.coordinates.length;i++)for(var a=0;a<e.coordinates[i].length;a++)r=(r=r.concat(v(e.coordinates[i][a],[i,a],t,n))).slice(0,-1);break;default:throw Error("Unhandled geometry type: ".concat(e.type))}return r},t.updateRectanglePosition=function(e,t,n){var r=e.geometry.coordinates;if(!r)return null;var o=r[0].slice(0,4);o[t%4]=n;var i=o[(t+2)%4],a=o[t%4];return o[(t+1)%4]=[a[0],i[1]],o[(t+3)%4]=[i[0],a[1]],[[].concat(p(o),[o[0]])]},t.mapCoords=function e(t,n){if("number"==typeof t[0])return!isNaN(t[0])&&isFinite(t[0])?n(t):t;return t.map((function(t){return e(t,n)})).filter(Boolean)};var r=s(n(3737)),o=s(n(1208)),i=s(n(3892)),a=n(1540),u=n(4102),c=n(611),l=s(n(4235));function s(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n,r){var o=e-n,i=t-r;return Math.sqrt(o*o+i*i)}function g(e,t,n){return t*n+e*(1-n)}function b(e){return e&&e.filter((function(e){return e.isGuide&&"editHandle"===e.object.properties.guideType})).map((function(e){return e.object}))||[]}function v(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"existing",o=[],i=0;i<e.length;i++){var a=e[i];o.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[].concat(p(t),[i]),featureIndex:n,editHandleType:r},geometry:{type:"Point",coordinates:a}})}return o}},7504:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UNIT=t.PROJECTED_PIXEL_SIZE_MULTIPLIER=void 0;t.PROJECTED_PIXEL_SIZE_MULTIPLIER=2/3;t.UNIT={common:0,meters:1,pixels:2}},9900:(e,t,n)=>{Object.defineProperty(t,"nk",{enumerable:!0,get:function(){return o.default}});var r=n(1399),o=p(n(2444)),i=p(n(2465)),a=p(n(1845)),u=p(n(7964)),c=p(n(6734)),l=p(n(647)),s=p(n(6949)),f=n(9545);function p(e){return e&&e.__esModule?e:{default:e}}},2444:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(7786),o=n(7359),i=n(7504),a=c(n(6759)),u=c(n(9762));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},h(e,t,n||e)}function g(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=[0,0,0,153],S=[0,0,0,144],w=[0,0,0,255],_=[0,0,144,144],j=[144,144,144,255],C=[144,144,144,144],M=[192,0,0,255],k=[0,0,0,128],E=[124,0,192,255],x=[255,255,255,255],R=32*i.PROJECTED_PIXEL_SIZE_MULTIPLIER,D=o.DrawPolygonMode;function T(e){return e&&"function"==typeof e?function(t){return e(function(e){if(e.__source)return e.__source.object;if(e.sourceFeature)return e.sourceFeature.feature;return e}(t))}:e}function A(e){switch(e.properties.editHandleType){case"existing":return M;case"snap-source":return E;default:return k}}var I={mode:D,onEdit:function(){},pickable:!0,pickingRadius:10,pickingDepth:5,fp64:!1,filled:!0,stroked:!0,lineWidthScale:i.PROJECTED_PIXEL_SIZE_MULTIPLIER,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,pickingLineWidthExtraPixels:0,lineWidthUnits:"pixels",lineJointRounded:!1,lineCapRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:function(e,t,n){return t?w:O},getFillColor:function(e,t,n){return t?_:S},getRadius:function(e){return e&&e.properties&&e.properties.radius||e&&e.properties&&e.properties.size||1},getLineWidth:function(e){return e&&e.properties&&e.properties.lineWidth||3},getTentativeLineColor:function(e){return j},getTentativeFillColor:function(e){return C},getTentativeLineWidth:function(e){return e&&e.properties&&e.properties.lineWidth||3},editHandleType:"point",editHandlePointRadiusScale:1,editHandlePointOutline:!0,editHandlePointStrokeWidth:2,editHandlePointRadiusUnits:"pixels",editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:A,getEditHandlePointOutlineColor:function(e){return x},getEditHandlePointRadius:function(e){switch(e.properties.editHandleType){case"existing":return 5;case"snap":return 7;default:return 3}},editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,editHandleIconSizeUnits:"pixels",getEditHandleIcon:function(e){return e.properties.editHandleType},getEditHandleIconSize:10,getEditHandleIconColor:A,getEditHandleIconAngle:0,billboard:!0},F={view:o.ViewMode,modify:o.ModifyMode,translate:new o.SnappableMode(new o.TranslateMode),transform:new o.SnappableMode(new o.TransformMode),scale:o.ScaleMode,rotate:o.RotateMode,duplicate:o.DuplicateMode,split:o.SplitPolygonMode,extrude:o.ExtrudeMode,elevation:o.ElevationMode,drawPoint:o.DrawPointMode,drawLineString:o.DrawLineStringMode,drawPolygon:o.DrawPolygonMode,drawRectangle:o.DrawRectangleMode,drawSquare:o.DrawSquareMode,drawRectangleFromCenter:o.DrawRectangleFromCenterMode,drawSquareFromCenter:o.DrawSquareFromCenterMode,drawCircleFromCenter:o.DrawCircleFromCenterMode,drawCircleByBoundingBox:o.DrawCircleByDiameterMode,drawEllipseByBoundingBox:o.DrawEllipseByBoundingBoxMode,drawRectangleUsing3Points:o.DrawRectangleUsingThreePointsMode,drawEllipseUsing3Points:o.DrawEllipseUsingThreePointsMode,draw90DegreePolygon:o.Draw90DegreePolygonMode,drawPolygonByDragging:o.DrawPolygonByDraggingMode},L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,o,i,a=(t=c,function(){var e,n=v(t);if(b()){var r=v(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return g(this,e)});function c(){return d(this,c),a.apply(this,arguments)}return n=c,o=[{key:"renderLayers",value:function(){var e=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getPointRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),_subLayerProps:{linestrings:{billboard:this.props.billboard,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}},"polygons-stroke":{billboard:this.props.billboard,pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels,type:u.default,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}}},updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getPointRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode]}}),t=[new r.GeoJsonLayer(e)];return t=t.concat(this.createGuidesLayers(),this.createTooltipsLayers())}},{key:"initializeState",value:function(){h(v(c.prototype),"initializeState",this).call(this),this.setState({selectedFeatures:[],editHandles:[]})}},{key:"shouldUpdateState",value:function(e){return h(v(c.prototype),"shouldUpdateState",this).call(this,e)||e.changeFlags.stateChanged}},{key:"updateState",value:function(e){var t,n=e.props,r=e.oldProps,o=e.changeFlags,i=e.context;(h(v(c.prototype),"updateState",this).call(this,{oldProps:r,props:n,changeFlags:o,context:i}),!o.propsOrDataChanged||0!==Object.keys(r).length&&n.mode===r.mode)||("function"==typeof n.mode?t=new(0,n.mode):"string"==typeof n.mode?(t=F[n.mode],console.warn("Deprecated use of passing `mode` as a string. Pass the mode's class constructor instead.")):t=n.mode,t||(console.warn("No mode configured for ".concat(String(n.mode))),t=new D),t!==this.state.mode&&this.setState({mode:t,cursor:null}));var a=[];Array.isArray(n.selectedFeatureIndexes)&&(a=n.selectedFeatureIndexes.map((function(e){return n.data.features[e]}))),this.setState({selectedFeatures:a})}},{key:"getModeProps",value:function(e){var t=this;return{modeConfig:e.modeConfig,data:e.data,selectedIndexes:e.selectedFeatureIndexes,lastPointerMoveEvent:this.state.lastPointerMoveEvent,cursor:this.state.cursor,onEdit:function(n){t.setNeedsUpdate(),e.onEdit(n)},onUpdateCursor:function(e){t.setState({cursor:e})}}}},{key:"selectionAwareAccessor",value:function(e){var t=this;return"function"!=typeof e?e:function(n){return e(n,t.isFeatureSelected(n),t.props.mode)}}},{key:"isFeatureSelected",value:function(e){if(!this.props.data||!this.props.selectedFeatureIndexes)return!1;if(!this.props.selectedFeatureIndexes.length)return!1;var t=this.props.data.features.indexOf(e);return this.props.selectedFeatureIndexes.includes(t)}},{key:"getPickingInfo",value:function(e){var t=e.info;return e.sourceLayer.id.endsWith("guides")&&(t.isGuide=!0),t}},{key:"_updateAutoHighlight",value:function(e){if(null==e?void 0:e.sourceLayer)if(e.isGuide){var t,n=f(e.sourceLayer.getSubLayers());try{for(n.s();!(t=n.n()).done;)t.value.updateAutoHighlight(e)}catch(e){n.e(e)}finally{n.f()}}else e.sourceLayer.updateAutoHighlight(e)}},{key:"createGuidesLayers",value:function(){var e=this.getActiveMode().getGuides(this.getModeProps(this.props));if(!e||!e.features.length)return[];var t={linestrings:{billboard:this.props.billboard,autoHighlight:!1},"polygons-fill":{autoHighlight:!1},"polygons-stroke":{billboard:this.props.billboard}};return"icon"===this.props.editHandleType?t["points-icon"]={type:r.IconLayer,iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeUnits:this.props.editHandleIconSizeUnits,sizeScale:this.props.editHandleIconSizeScale,getIcon:T(this.props.getEditHandleIcon),getSize:T(this.props.getEditHandleIconSize),getColor:T(this.props.getEditHandleIconColor),getAngle:T(this.props.getEditHandleIconAngle)}:t["points-circle"]={type:r.ScatterplotLayer,radiusScale:this.props.editHandlePointRadiusScale,stroked:this.props.editHandlePointOutline,getLineWidth:this.props.editHandlePointStrokeWidth,radiusUnits:this.props.editHandlePointRadiusUnits,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:T(this.props.getEditHandlePointRadius),getFillColor:T(this.props.getEditHandlePointColor),getLineColor:T(this.props.getEditHandlePointOutlineColor)},[new r.GeoJsonLayer(this.getSubLayerProps({id:"guides",data:e,fp64:this.props.fp64,_subLayerProps:t,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,getLineColor:T(this.props.getTentativeLineColor),getLineWidth:T(this.props.getTentativeLineWidth),getFillColor:T(this.props.getTentativeFillColor),pointType:"icon"===this.props.editHandleType?"icon":"circle",iconAtlas:this.props.editHandleIconAtlas}))]}},{key:"createTooltipsLayers",value:function(){var e=this.getActiveMode().getTooltips(this.getModeProps(this.props)),t=new r.TextLayer(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({getSize:R},this.getSubLayerProps({id:"tooltips",data:e})));return[t]}},{key:"onLayerClick",value:function(e){this.getActiveMode().handleClick(e,this.getModeProps(this.props))}},{key:"onLayerKeyUp",value:function(e){this.getActiveMode().handleKeyUp(e,this.getModeProps(this.props))}},{key:"onStartDragging",value:function(e){this.getActiveMode().handleStartDragging(e,this.getModeProps(this.props))}},{key:"onDragging",value:function(e){this.getActiveMode().handleDragging(e,this.getModeProps(this.props))}},{key:"onStopDragging",value:function(e){this.getActiveMode().handleStopDragging(e,this.getModeProps(this.props))}},{key:"onPointerMove",value:function(e){this.setState({lastPointerMoveEvent:e}),this.getActiveMode().handlePointerMove(e,this.getModeProps(this.props))}},{key:"getCursor",value:function(e){var t=e.isDragging;if(null===this.state)return null;var n=this.state.cursor;return n||(n=t?"grabbing":"grab"),n}},{key:"getActiveMode",value:function(){return this.state.mode}}],o&&y(n.prototype,o),i&&y(n,i),c}(a.default);t.default=L,P(L,"layerName","EditableGeoJsonLayer"),P(L,"defaultProps",I)},2465:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(803),o=n(7359),i=n(9947),a=n(7504),u=l(n(2444)),c=l(n(6759));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},h(e,t,n||e)}function g(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=o.ViewMode,_={type:"FeatureCollection",features:[]},j=O({mode:w},u.default.defaultProps,{data:[],selectedIndexes:[],filled:!1,stroked:!0,lineWidthScale:a.PROJECTED_PIXEL_SIZE_MULTIPLIER,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthUnits:"pixels",getHexagons:function(e){return e.hexIds},getEditedCluster:function(e,t){return t?O({},t,{hexIds:e}):{hexIds:e}},resolution:9}),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(l,e);var t,n,o,a,c=(t=l,function(){var e,n=v(t);if(b()){var r=v(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return g(this,e)});function l(){return d(this,l),c.apply(this,arguments)}return n=l,(o=[{key:"initializeState",value:function(){h(v(l.prototype),"initializeState",this).call(this),this.setState({tentativeHexagonIDs:[]})}},{key:"getDerivedHexagonIDs",value:function(e){return(0,i.polyfill)(e,this.props.resolution,!0)}},{key:"getDerivedHexagonID",value:function(e){return(0,i.geoToH3)(e[1],e[0],this.props.resolution)}},{key:"renderLayers",value:function(){var e=this;return[new u.default(this.getSubLayerProps({id:"editable-geojson",mode:this.props.mode,data:_,selectedFeatureIndexes:[],onEdit:function(t){var n=t.editType,r=t.editContext;switch(n){case"updateTentativeFeature":if("Polygon"===r.feature.geometry.type){var o=r.feature.geometry.coordinates,i=e.getDerivedHexagonIDs(o);e.setState({tentativeHexagonIDs:i})}else if("Point"===r.feature.geometry.type){var a=r.feature.geometry.coordinates,u=e.getDerivedHexagonID(a);e.setState({tentativeHexagonIDs:[u]})}break;case"addFeature":var c=f(e.props.data),l=e.props.modeConfig;if(l&&l.booleanOperation)if(1!==e.props.selectedIndexes.length)console.warn("booleanOperation only supported for single cluster selection");else{var s,p=new Set(e.getSelectedHexIDs()),d=new Set(e.state.tentativeHexagonIDs);switch(l.booleanOperation){case"union":default:s=f(new Set([].concat(f(p),f(d))));break;case"intersection":s=f(p).filter((function(e){return d.has(e)}));break;case"difference":s=f(p).filter((function(e){return!d.has(e)}))}var y=e.props.selectedIndexes[0],h=e.props.data[y];c[y]=e.props.getEditedCluster(s,h)}else c.push(e.props.getEditedCluster(e.state.tentativeHexagonIDs,null));e.setState({tentativeHexagonIDs:[]}),e.props.onEdit({updatedData:c})}}})),new r.H3ClusterLayer(this.getSubLayerProps({id:"hexagons",data:this.props.data,getHexagons:this.props.getHexagons})),new r.H3ClusterLayer(this.getSubLayerProps({id:"tentative-hexagons",data:[{hexIds:this.state.tentativeHexagonIDs}],getHexagons:function(e){return e.hexIds}}))]}},{key:"getSelectedHexIDs",value:function(){var e=this,t=[];return this.props.selectedIndexes.forEach((function(n){var r=e.props.data[n],o=e.props.getHexagons(r);t=t.concat(o)})),t}},{key:"getCursor",value:function(e){var t=e.isDragging,n=(this.state||{}).cursor;return n||(n=t?"grabbing":"grab"),n}}])&&y(n.prototype,o),a&&y(n,a),l}(c.default);t.default=C,S(C,"layerName","EditableH3ClusterLayer"),S(C,"defaultProps",j)},6759:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2860);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=["anyclick","pointermove","panstart","panmove","panend","keyup"],b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(c,e);var t,n,r,o,i=(t=c,function(){var e,n=d(t);if(p()){var r=d(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return f(this,e)});function c(){return l(this,c),i.apply(this,arguments)}return n=c,(r=[{key:"onLayerClick",value:function(e){}},{key:"onStartDragging",value:function(e){}},{key:"onStopDragging",value:function(e){}},{key:"onDragging",value:function(e){}},{key:"onPointerMove",value:function(e){}},{key:"onLayerKeyUp",value:function(e){}},{key:"initializeState",value:function(){this.setState({_editableLayerState:{pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,eventHandler:this._forwardEventToCurrentLayer.bind(this)}}),this._addEventHandlers()}},{key:"finalizeState",value:function(){this._removeEventHandlers()}},{key:"_addEventHandlers",value:function(){var e,t=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=u(g);try{for(r.s();!(e=r.n()).done;){var o=e.value;t.on(o,n,{priority:100})}}catch(e){r.e(e)}finally{r.f()}}},{key:"_removeEventHandlers",value:function(){var e,t=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=u(g);try{for(r.s();!(e=r.n()).done;){var o=e.value;t.off(o,n)}}catch(e){r.e(e)}finally{r.f()}}},{key:"_forwardEventToCurrentLayer",value:function(e){var t=this.getCurrentLayer(),n=t["_on".concat(e.type)].bind(t);n?n(e):console.warn("no handler for mjolnir.js event ".concat(e.type))}},{key:"_onanyclick",value:function(e){var t=e.srcEvent,n=this.getScreenCoords(t),r=this.getMapCoords(n),o=this.getPicks(n);this.onLayerClick({mapCoords:r,screenCoords:n,picks:o,sourceEvent:t})}},{key:"_onkeyup",value:function(e){var t=e.srcEvent;this.onLayerKeyUp(t)}},{key:"_onpanstart",value:function(e){var t=this.getScreenCoords(e.srcEvent),n=this.getMapCoords(t),r=this.getPicks(t);this.setState({_editableLayerState:a({},this.state._editableLayerState,{pointerDownScreenCoords:t,pointerDownMapCoords:n,pointerDownPicks:r})}),this.onStartDragging({picks:r,screenCoords:t,mapCoords:n,pointerDownScreenCoords:t,pointerDownMapCoords:n,cancelPan:e.stopImmediatePropagation,sourceEvent:e.srcEvent})}},{key:"_onpanmove",value:function(e){var t=e.srcEvent,n=this.getScreenCoords(t),r=this.getMapCoords(n),o=this.state._editableLayerState,i=o.pointerDownPicks,a=o.pointerDownScreenCoords,u=o.pointerDownMapCoords,c=this.getPicks(n);this.onDragging({screenCoords:n,mapCoords:r,picks:c,pointerDownPicks:i,pointerDownScreenCoords:a,pointerDownMapCoords:u,sourceEvent:t,cancelPan:e.stopImmediatePropagation})}},{key:"_onpanend",value:function(e){var t=e.srcEvent,n=this.getScreenCoords(t),r=this.getMapCoords(n),o=this.state._editableLayerState,i=o.pointerDownPicks,u=o.pointerDownScreenCoords,c=o.pointerDownMapCoords,l=this.getPicks(n);this.onStopDragging({picks:l,screenCoords:n,mapCoords:r,pointerDownPicks:i,pointerDownScreenCoords:u,pointerDownMapCoords:c,sourceEvent:t}),this.setState({_editableLayerState:a({},this.state._editableLayerState,{pointerDownScreenCoords:null,pointerDownMapCoords:null,pointerDownPicks:null})})}},{key:"_onpointermove",value:function(e){var t=e.srcEvent,n=this.getScreenCoords(t),r=this.getMapCoords(n),o=this.state._editableLayerState,i=o.pointerDownPicks,a=o.pointerDownScreenCoords,u=o.pointerDownMapCoords,c=this.getPicks(n);this.onPointerMove({screenCoords:n,mapCoords:r,picks:c,pointerDownPicks:i,pointerDownScreenCoords:a,pointerDownMapCoords:u,sourceEvent:t})}},{key:"getPicks",value:function(e){return this.context.deck.pickMultipleObjects({x:e[0],y:e[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth})}},{key:"getScreenCoords",value:function(e){return[e.clientX-this.context.gl.canvas.getBoundingClientRect().left,e.clientY-this.context.gl.canvas.getBoundingClientRect().top]}},{key:"getMapCoords",value:function(e){return this.context.viewport.unproject([e[0],e[1]])}}])&&s(n.prototype,r),o&&s(n,o),c}(r.CompositeLayer);t.default=b,h(b,"layerName","EditableLayer")},9762:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(7786),o=n(9545);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},c(e,t,n||e)}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=y({},r.PathLayer.defaultProps,{pickingLineWidthExtraPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER}}),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(h,e);var t,n,r,i,d=(t=h,function(){var e,n=f(t);if(s()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function h(){return a(this,h),d.apply(this,arguments)}return n=h,(r=[{key:"getShaders",value:function(){var e,t=c(f(h.prototype),"getShaders",this).call(this);return t.vs=(0,o.insertBefore)(t.vs,"vec3 width;","\n       if(picking_uActive){\n        widthPixels.xy += pickingLineWidthExtraPixels;\n       }\n      "),y({},t,{inject:y({},t.inject||{},{"vs:#decl":((null===(e=t.inject)||void 0===e?void 0:e["vs:#decl"])||"").concat("uniform float pickingLineWidthExtraPixels;")})})}},{key:"draw",value:function(e){c(f(h.prototype),"draw",this).call(this,y({},e,{uniforms:y({},e.uniforms,{pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels})}))}}])&&u(n.prototype,r),i&&u(n,i),h}(r.PathLayer);t.default=b,b.defaultProps=g,b.layerName="EditablePathLayer"},7964:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2860),o=n(7786);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(d,e);var t,n,r,i,p=(t=d,function(){var e,n=s(t);if(l()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return c(this,e)});function d(){return a(this,d),p.apply(this,arguments)}return n=d,(r=[{key:"renderLayers",value:function(){return[new o.ScatterplotLayer(Object.assign({},this.props,{id:"".concat(this.props.id,"-ScatterplotLayer"),data:this.props.data})),new o.LineLayer(Object.assign({},this.props,{id:"".concat(this.props.id,"-LineLayer"),data:this.props.data,pickable:!1,getSourcePosition:function(e){var t=e.position;return[t[0],t[1],0]},getTargetPosition:function(e){var t=e.position;return[t[0],t[1],t[2]||0]},getColor:[150,150,150,200],getStrokeWidth:3}))]}}])&&u(n.prototype,r),i&&u(n,i),d}(r.CompositeLayer);t.default=d,p(d,"layerName","ElevatedEditHandleLayer"),p(d,"defaultProps",{})},6949:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2860),o=n(7786);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(y,e);var t,n,r,i,a=(t=y,function(){var e,n=p(t);if(f()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return s(this,e)});function y(){return c(this,y),a.apply(this,arguments)}return n=y,(r=[{key:"renderLayers",value:function(){var e=this.props,t=e.id,n=e.getFillColor,r=e.getStrokeColor,i=e.getInnerRadius,a=e.updateTriggers;return[new o.ScatterplotLayer(u({},this.props,{id:"".concat(t,"-full"),data:this.props.data,getLineColor:r,updateTriggers:u({},a,{getStrokeColor:a.getStrokeColor})})),new o.ScatterplotLayer(u({},this.props,{id:"".concat(t,"-inner"),data:this.props.data,getFillColor:n,getRadius:i,pickable:!1,updateTriggers:u({},a,{getFillColor:a.getFillColor,getRadius:a.getInnerRadius})}))]}}])&&l(n.prototype,r),i&&l(n,i),y}(r.CompositeLayer);t.default=h,y(h,"layerName","JunctionScatterplotLayer"),y(h,"defaultProps",u({},o.ScatterplotLayer.defaultProps,{getFillColor:function(e){return[0,0,0,255]},getStrokeColor:function(e){return[255,255,255,255]},getInnerRadius:function(e){return 1}}))},6484:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t,n=(t=r,function(){var e,n=u(t);if(a()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return i(this,e)});function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),n.call(this,Object.assign({},e,{attributes:s(e)}))}return r}(n(1282).Geometry);function s(e){for(var t=e.length,n=void 0===t?1:t,r=e.headSize,o=void 0===r?.2:r,i=e.tailWidth,a=void 0===i?.05:i,u=e.tailStart,c=void 0===u?.05:u,l=[.5,1,0,.5-o/2,1-o,0,.5+o/2,1-o,0,.5-a/2,c,0,.5+a/2,1-o,0,.5+a/2,c,0,.5-a/2,c,0,.5-a/2,1-o,0,.5+a/2,1-o,0],s=new Array(l.length),f=0;f<l.length/3;f++){var p=3*f;s[p+0]=(l[p+0]-.5)*n,s[p+1]=(l[p+1]-.5)*n,s[p+2]=0}return{positions:new Float32Array(s),normals:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]),texCoords:new Float32Array(l)}}t.default=l},6971:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.data,i=e.getPath,s=void 0===i?function(e){return e.path}:i,f=e.getDirection,p=void 0===f?function(e){return e.direction}:f,d=e.getColor,y=void 0===d?function(e){return u}:d,h=e.getMarkerPercentages,g=void 0===h?function(e,t){return[.5]}:h,b=e.projectFlat,v=[],m=o(n);try{for(m.s();!(t=m.n()).done;){var P,O=t.value,S=s(O),w=p(O)||c,_=y(O),j=S.map((function(e){return new r.Vector2(e)})),C=j.slice(0).reverse(),M=a(j),k=o(g(O,{lineLength:M}));try{for(k.s();!(P=k.n()).done;){var E=P.value;if(w.forward){var x=l({path:j,percentage:E,lineLength:M,color:_,object:O,projectFlat:b});v.push(x)}if(w.backward){var R=l({path:C,percentage:E,lineLength:M,color:_,object:O,projectFlat:b});v.push(R)}}}catch(e){k.e(e)}finally{k.f()}}}catch(e){m.e(e)}finally{m.f()}return v};var r=n(964);function o(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].distance(e[n+1]);return t}var u=[0,0,0,255],c={forward:!0,backward:!1};function l(e){var t=e.path,n=e.percentage,o=e.lineLength,i=e.color,a=e.object,u=e.projectFlat,c=o*n,l=0,s=0,f=0;for(f=0;f<t.length-1&&!((l+=t[f].distance(t[f+1]))>c);f++)s=l;f===t.length-1&&(f-=1);var p=c-s,d=t[f+1].clone().subtract(t[f]).normalize().clone().multiply(new r.Vector2(p,p)).add(t[f]),y=180*new r.Vector2(u(t[f+1])).subtract(u(t[f])).verticalAngle()/Math.PI;return{position:[d.x,d.y,0],angle:y,color:i,object:a}}},647:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2860),o=n(7786),i=n(1956),a=s(n(6734)),u=s(n(6484)),c=s(n(6971)),l=n(1666);function s(e){return e&&e.__esModule?e:{default:e}}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=i.SimpleMeshLayer,S={mesh:new u.default({headSize:.2,tailWidth:.05})},w=Object.assign({},a.default.defaultProps,{MarkerLayer:O,markerLayerProps:S,sizeScale:100,fp64:!1,highlightIndex:-1,highlightPoint:null,getPath:function(e){return e.path},getColor:function(e){return e.color},getMarkerColor:function(e){return[0,0,0,255]},getDirection:function(e){return e.direction},getMarkerPercentages:function(e,t){return t.lineLength>.1?[.25,.5,.75]:[.5]}}),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(d,e);var t,n,i,s,f=(t=d,function(){var e,n=v(t);if(b()){var r=v(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return g(this,e)});function d(){return y(this,d),f.apply(this,arguments)}return n=d,(i=[{key:"initializeState",value:function(){this.state={markers:[],mesh:new u.default({headSize:.2,tailWidth:.05}),closestPoint:null}}},{key:"projectFlat",value:function(e,t,n,o){if(n===r.COORDINATE_SYSTEM.METER_OFFSETS){var i=p(t.metersToLngLatDelta(e),2),a=i[0],u=i[1],c=p(o,2),l=c[0],s=c[1];return t.projectFlat([l+a,u+s])}if(n===r.COORDINATE_SYSTEM.LNGLAT_OFFSETS){var f=p(e,2),d=f[0],y=f[1],h=p(o,2),g=h[0],b=h[1];return t.projectFlat([g+d,y+b])}return t.projectFlat(e)}},{key:"updateState",value:function(e){var t=this,n=e.props,r=e.oldProps,o=e.changeFlags;if(o.dataChanged||o.updateTriggersChanged){var i=this.props,a=i.data,u=i.getPath,l=i.getDirection,s=i.getMarkerColor,f=i.getMarkerPercentages,p=i.coordinateSystem,d=i.coordinateOrigin,y=this.context.viewport;this.state.markers=(0,c.default)({data:a,getPath:u,getDirection:l,getColor:s,getMarkerPercentages:f,projectFlat:function(e){return t.projectFlat(e,y,p,d)}}),this._recalculateClosestPoint()}o.propsChanged&&n.point!==r.point&&this._recalculateClosestPoint()}},{key:"_recalculateClosestPoint",value:function(){var e=this.props,t=e.highlightPoint,n=e.highlightIndex;if(t&&n>=0){var r=this.props.data[n],o=this.props.getPath(r),i=(0,l.getClosestPointOnPolyline)({points:o,p:t}).point;this.state.closestPoints=[{position:i}]}else this.state.closestPoints=[]}},{key:"getPickingInfo",value:function(e){var t=e.info;return Object.assign(t,{object:t.object&&t.object.path||t.object})}},{key:"renderLayers",value:function(){return[new a.default(this.props,this.getSubLayerProps({id:"paths",data:this.props.data})),new this.props.MarkerLayer(this.getSubLayerProps(Object.assign({},this.props.markerLayerProps,{id:"markers",data:this.state.markers,getOrientation:function(e){return[0,-e.angle,0]},getColor:function(e){return e.color},sizeScale:this.props.sizeScale,fp64:this.props.fp64,pickable:!1,parameters:{blend:!1,depthTest:!1}}))),this.state.closestPoints&&new o.ScatterplotLayer({id:"".concat(this.props.id,"-highlight"),data:this.state.closestPoints,fp64:this.props.fp64})]}}])&&h(n.prototype,i),s&&h(n,s),d}(r.CompositeLayer);t.default=_,P(_,"layerName","PathMarkerLayer"),P(_,"defaultProps",w)},1666:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getClosestPointOnLine=o,t.getClosestPointOnPolyline=function(e){var t=e.p,n=e.points;t=new r.Vector3(t);for(var i=null,a=1/0,u=-1,c=0;c<n.length-1;++c){var l=n[c],s=n[c+1],f=o({p:t,p1:l,p2:s}),p=t.distanceSquared(f);p<a&&(a=p,i=f,u=c)}return{point:i,index:u,p1:n[u],p2:n[u+1],distanceSquared:a,distance:Math.sqrt(a)}};var r=n(964);function o(e){var t=e.p,n=e.p1,o=e.p2,i=e.clampToLine,a=void 0===i||i,u=new r.Vector3(o).subtract(n),c=new r.Vector3(t).subtract(n),l=u.dot(c);return a&&(l=(0,r.clamp)(l,0,1)),u.lerp(l)}},6734:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(7786),o=c(n(9757)),i=n(1282),a=c(n(7673)),u=n(7504);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},p(e,t,n||e)}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=e.source,n=e.code,r=void 0===n?"":n;return t.replace(/}[^{}]*$/,r.concat("\n}\n"))}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(b,e);var t,n,r,c,l=(t=b,function(){var e,n=h(t);if(y()){var r=h(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d(this,e)});function b(){return s(this,b),l.apply(this,arguments)}return n=b,(r=[{key:"getShaders",value:function(){var e=p(h(b.prototype),"getShaders",this).call(this);return Object.assign({},e,{modules:e.modules.concat([a.default]),vs:v({source:e.vs,code:"  outline_setUV(gl_Position);\n  outline_setZLevel(instanceZLevel);\n"}),fs:v({source:e.fs,code:"  gl_FragColor = outline_filterColor(gl_FragColor);\n"})})}},{key:"initializeState",value:function(e){p(h(b.prototype),"initializeState",this).call(this,e),this.setState({outlineFramebuffer:new i.Framebuffer(e.gl),dummyTexture:new i.Texture2D(e.gl)}),this.state.attributeManager.addInstanced({instanceZLevel:{size:1,type:o.default.UNSIGNED_BYTE,accessor:"getZLevel"}})}},{key:"draw",value:function(e){e.moduleParameters,e.parameters;var t=e.uniforms,n=(e.context,this.props),r=n.jointRounded,i=n.capRounded,a=n.billboard,c=n.miterLimit,l=n.widthUnits,s=n.widthScale,f=n.widthMinPixels,p=n.widthMaxPixels;t=Object.assign({},t,{jointType:Number(r),capType:Number(i),billboard:a,widthUnits:u.UNIT[l],widthScale:s,miterLimit:c,widthMinPixels:f,widthMaxPixels:p});var d=this.state,y=d.outlineFramebuffer,h=d.dummyTexture;y.resize(),y.clear({color:!0,depth:!0}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!0,outlineShadowmap:h}),this.state.model.draw({uniforms:Object.assign({},t,{jointType:0,widthScale:1.3*this.props.widthScale}),parameters:{depthTest:!1,blendEquation:o.default.MAX},framebuffer:y}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!1,outlineShadowmap:y}),this.state.model.draw({uniforms:Object.assign({},t,{jointType:Number(r),capType:Number(i),widthScale:this.props.widthScale}),parameters:{depthTest:!1}})}}])&&f(n.prototype,r),c&&f(n,c),b}(r.PathLayer);t.default=m,b(m,"layerName","PathOutlineLayer"),b(m,"defaultProps",{getZLevel:function(){return 0}})},1845:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SELECTION_TYPE=void 0;var r,o=n(2860),i=n(7786),a=n(4102),u=f(n(5419)),c=f(n(8727)),l=n(7359),s=f(n(2444));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C={NONE:null,RECTANGLE:"rectangle",POLYGON:"polygon"};t.SELECTION_TYPE=C;var M=(j(r={},C.RECTANGLE,l.DrawRectangleMode),j(r,C.POLYGON,l.DrawPolygonMode),r),k=j({},C.RECTANGLE,{dragToDraw:!0}),E={selectionType:C.RECTANGLE,layerIds:[],onSelect:function(){}},x={type:"FeatureCollection",features:[]},R="selection-blocker",D=["lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","lineWidthUnits","lineJointRounded","lineCapRounded","lineMiterLimit","pointRadiusScale","pointRadiusMinPixels","pointRadiusMaxPixels","lineDashJustified","getLineColor","getFillColor","getRadius","getLineWidth","getLineDashArray","getTentativeLineDashArray","getTentativeLineColor","getTentativeFillColor","getTentativeLineWidth"],T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(p,e);var t,n,r,o,f=(t=p,function(){var e,n=w(t);if(S()){var r=w(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return O(this,e)});function p(){return m(this,p),f.apply(this,arguments)}return n=p,(r=[{key:"_selectRectangleObjects",value:function(e){var t=this.props,n=t.layerIds,r=t.onSelect,o=g(this.context.viewport.project(e[0][0]),2),i=o[0],a=o[1],u=g(this.context.viewport.project(e[0][2]),2),c=u[0],l=u[1];r({pickingInfos:this.context.deck.pickObjects({x:Math.min(i,c),y:Math.min(a,l),width:Math.abs(c-i),height:Math.abs(l-a),layerIds:n})})}},{key:"_selectPolygonObjects",value:function(e){var t,n=this,r=this.props,o=r.layerIds,i=r.onSelect,l=e[0].map((function(e){return n.context.viewport.project(e)})),s=l.map((function(e){return e[0]})),f=l.map((function(e){return e[1]})),p=Math.min.apply(Math,h(s)),d=Math.min.apply(Math,h(f)),y=Math.max.apply(Math,h(s)),g=Math.max.apply(Math,h(f)),b=(0,a.polygon)(e),v=(0,u.default)(b,50);try{t=(0,c.default)(v,b)}catch(e){return void console.log("turfDifference() error",e)}this.setState({pendingPolygonSelection:{bigPolygon:t}});var m="".concat(this.props.id,"-").concat(R);setTimeout((function(){var e=n.context.deck.pickObjects({x:p,y:d,width:y-p,height:g-d,layerIds:[m].concat(h(o))});i({pickingInfos:e.filter((function(e){return e.layer.id!==n.props.id}))})}),250)}},{key:"renderLayers",value:function(){var e=this,t=this.state.pendingPolygonSelection,n=M[this.props.selectionType]||l.ViewMode,r=k[this.props.selectionType],o={};D.forEach((function(t){void 0!==e.props[t]&&(o[t]=e.props[t])}));var a=[new s.default(this.getSubLayerProps(y({id:"selection-geojson",pickable:!0,mode:n,modeConfig:r,selectedFeatureIndexes:[],data:x,onEdit:function(t){var n=t.updatedData;if("addFeature"===t.editType){var r=n.features[0].geometry.coordinates;e.props.selectionType===C.RECTANGLE?e._selectRectangleObjects(r):e.props.selectionType===C.POLYGON&&e._selectPolygonObjects(r)}}},o)))];if(t){var u=t.bigPolygon;a.push(new i.PolygonLayer(this.getSubLayerProps({id:R,pickable:!0,stroked:!1,opacity:1,data:[u],getLineColor:function(e){return[0,0,0,1]},getFillColor:function(e){return[0,0,0,1]},getPolygon:function(e){return e.geometry.coordinates}})))}return a}},{key:"shouldUpdateState",value:function(e){var t=e.changeFlags,n=t.stateChanged,r=t.propsOrDataChanged;return n||r}}])&&P(n.prototype,r),o&&P(n,o),p}(o.CompositeLayer);t.default=T,j(T,"layerName","SelectionLayer"),j(T,"defaultProps",E)},7673:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={outlineEnabled:!1,outlineRenderShadowmap:!1,outlineShadowmap:null};var r={name:"outline",vs:"attribute float instanceZLevel;\nvarying float outline_vzLevel;\nvarying vec4 outline_vPosition;\n\n// Set the z level for the outline shadowmap rendering\nvoid outline_setZLevel(float zLevel) {\n  outline_vzLevel = zLevel;\n}\n\n// Store an adjusted position for texture2DProj\nvoid outline_setUV(vec4 position) {\n  // mat4(\n  //   0.5, 0.0, 0.0, 0.0,\n  //   0.0, 0.5, 0.0, 0.0,\n  //   0.0, 0.0, 0.5, 0.0,\n  //   0.5, 0.5, 0.5, 1.0\n  // ) * position;\n  outline_vPosition = vec4(position.xyz * 0.5 + position.w * 0.5, position.w);\n}\n",fs:"uniform bool outline_uEnabled;\nuniform bool outline_uRenderOutlines;\nuniform sampler2D outline_uShadowmap;\n\nvarying float outline_vzLevel;\n// varying vec2 outline_vUV;\nvarying vec4 outline_vPosition;\n\nconst float OUTLINE_Z_LEVEL_ERROR = 0.01;\n\n// Return a darker color in shadowmap\nvec4 outline_filterShadowColor(vec4 color) {\n  return vec4(outline_vzLevel / 255., outline_vzLevel / 255., outline_vzLevel / 255., 1.);\n}\n\n// Return a darker color if in shadowmap\nvec4 outline_filterDarkenColor(vec4 color) {\n  if (outline_uEnabled) {\n    float maxZLevel;\n    if (outline_vPosition.q > 0.0) {\n      maxZLevel = texture2DProj(outline_uShadowmap, outline_vPosition).r * 255.;\n    } else {\n      discard;\n    }\n    if (maxZLevel < outline_vzLevel + OUTLINE_Z_LEVEL_ERROR) {\n      vec4(color.rgb * 0.5, color.a);\n    } else {\n      discard;\n    }\n  }\n  return color;\n}\n\n// if enabled and rendering outlines - Render depth to shadowmap\n// if enabled and rendering colors - Return a darker color if in shadowmap\n// if disabled, just return color\nvec4 outline_filterColor(vec4 color) {\n  if (outline_uEnabled) {\n    return outline_uRenderOutlines ?\n      outline_filterShadowColor(color) :\n      outline_filterDarkenColor(color);\n  }\n  return color;\n}\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=e.outlineEnabled,r=e.outlineRenderShadowmap,o=e.outlineShadowmap,i={};return void 0!==t&&(i.outline_uEnabled=t),void 0!==r&&(i.outline_uRenderOutlines=r),void 0!==o&&(i.outline_uShadowmap=o),i}};t.default=r},1399:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_ARROWS=t.DEFAULT_ARROWS=t.ArrowStyles=void 0;t.ArrowStyles={NONE:0,FORWARD:1,BACKWARD:2,BOTH:3};t.DEFAULT_ARROWS=1;t.MAX_ARROWS=3},9545:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toDeckColor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];if(!Array.isArray(e))return t;return[255*e[0],255*e[1],255*e[2],255*e[3]]},t.recursivelyTraverseNestedArrays=function e(t,n,r){if(!Array.isArray(t[0]))return!0;for(var o=0;o<t.length;o++)if(e(t[o],[].concat(function(e){if(Array.isArray(e))return f(e)}(i=n)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(i)||s(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o]),r)){r(t,n);break}var i;return!1},t.generatePointsParallelToLinePoints=function(e,t,n){var u={type:"LineString",coordinates:[e,t]},c=(0,a.point)(n),l=(0,i.default)(c,u),s=(0,o.default)(e,t),f=(n[0]-e[0])*(t[1]-e[1])-(n[1]-e[1])*(t[0]-e[0])<0?s-90:s-270,p=(0,r.default)(t,l,f),d=(0,r.default)(e,l,f);return[p.geometry.coordinates,d.geometry.coordinates]},t.distance2d=p,t.mix=d,t.nearestPointOnProjectedLine=function(e,t,n){var r=new u.default(n),o=e.geometry.coordinates.map((function(e){var t=l(e,3),n=t[0],o=t[1],i=t[2],a=void 0===i?0:i;return r.project([n,o,a])})),i=l(r.project(t.geometry.coordinates),2),a=i[0],c=i[1],s=1/0,f={};o.forEach((function(e,t){var n=l(e,2),r=n[0],i=n[1];if(0!==t){var u=l(o[t-1],2),p=u[0],d=u[1],y=d-i,h=r-p,g=p*i-r*d,b=y*y+h*h,v=Math.abs(y*a+h*c+g)/Math.sqrt(b);v<s&&(s=v,f={index:t,x0:(h*(h*a-y*c)-y*g)/b,y0:(y*(-h*a+y*c)-h*g)/b})}}));var y=f,h=y.index,g=y.x0,b=y.y0,v=l(o[h-1],3),m=v[0],P=v[1],O=v[2],S=void 0===O?0:O,w=l(o[h],3),_=w[0],j=w[1],C=w[2],M=void 0===C?0:C,k=p(m,P,_,j),E=p(m,P,g,b),x=d(S,M,E/k);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([g,b,x])},properties:{dist:s,index:h-1}}},t.insertBefore=function(e,t,n){var r=e.indexOf(t);if(r<0)return e;return e.slice(0,r)+n+e.slice(r)};var r=c(n(3737)),o=c(n(1208)),i=c(n(3892)),a=n(4102),u=c(n(4235));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r){var o=e-n,i=t-r;return Math.sqrt(o*o+i*i)}function d(e,t,n){return t*n+e*(1-n)}}}]);